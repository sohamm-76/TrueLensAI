(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function O_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Cd={exports:{}},za={},kd={exports:{}},xe={};var Dg;function nT(){if(Dg)return xe;Dg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function C(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,j={};function L(V,G,Se){this.props=V,this.context=G,this.refs=j,this.updater=Se||z}L.prototype.isReactComponent={},L.prototype.setState=function(V,G){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,G,"setState")},L.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Z(){}Z.prototype=L.prototype;function X(V,G,Se){this.props=V,this.context=G,this.refs=j,this.updater=Se||z}var W=X.prototype=new Z;W.constructor=X,O(W,L.prototype),W.isPureReactComponent=!0;var te=Array.isArray,se=Object.prototype.hasOwnProperty,de={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(V,G,Se){var Te,Pe={},Ne=null,Be=null;if(G!=null)for(Te in G.ref!==void 0&&(Be=G.ref),G.key!==void 0&&(Ne=""+G.key),G)se.call(G,Te)&&!k.hasOwnProperty(Te)&&(Pe[Te]=G[Te]);var Fe=arguments.length-2;if(Fe===1)Pe.children=Se;else if(1<Fe){for(var Ke=Array(Fe),Ht=0;Ht<Fe;Ht++)Ke[Ht]=arguments[Ht+2];Pe.children=Ke}if(V&&V.defaultProps)for(Te in Fe=V.defaultProps,Fe)Pe[Te]===void 0&&(Pe[Te]=Fe[Te]);return{$$typeof:r,type:V,key:Ne,ref:Be,props:Pe,_owner:de.current}}function R(V,G){return{$$typeof:r,type:V.type,key:G,ref:V.ref,props:V.props,_owner:V._owner}}function b(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function x(V){var G={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Se){return G[Se]})}var M=/\/+/g;function A(V,G){return typeof V=="object"&&V!==null&&V.key!=null?x(""+V.key):G.toString(36)}function Le(V,G,Se,Te,Pe){var Ne=typeof V;(Ne==="undefined"||Ne==="boolean")&&(V=null);var Be=!1;if(V===null)Be=!0;else switch(Ne){case"string":case"number":Be=!0;break;case"object":switch(V.$$typeof){case r:case e:Be=!0}}if(Be)return Be=V,Pe=Pe(Be),V=Te===""?"."+A(Be,0):Te,te(Pe)?(Se="",V!=null&&(Se=V.replace(M,"$&/")+"/"),Le(Pe,G,Se,"",function(Ht){return Ht})):Pe!=null&&(b(Pe)&&(Pe=R(Pe,Se+(!Pe.key||Be&&Be.key===Pe.key?"":(""+Pe.key).replace(M,"$&/")+"/")+V)),G.push(Pe)),1;if(Be=0,Te=Te===""?".":Te+":",te(V))for(var Fe=0;Fe<V.length;Fe++){Ne=V[Fe];var Ke=Te+A(Ne,Fe);Be+=Le(Ne,G,Se,Ke,Pe)}else if(Ke=C(V),typeof Ke=="function")for(V=Ke.call(V),Fe=0;!(Ne=V.next()).done;)Ne=Ne.value,Ke=Te+A(Ne,Fe++),Be+=Le(Ne,G,Se,Ke,Pe);else if(Ne==="object")throw G=String(V),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Be}function lt(V,G,Se){if(V==null)return V;var Te=[],Pe=0;return Le(V,Te,"","",function(Ne){return G.call(Se,Ne,Pe++)}),Te}function He(V){if(V._status===-1){var G=V._result;G=G(),G.then(function(Se){(V._status===0||V._status===-1)&&(V._status=1,V._result=Se)},function(Se){(V._status===0||V._status===-1)&&(V._status=2,V._result=Se)}),V._status===-1&&(V._status=0,V._result=G)}if(V._status===1)return V._result.default;throw V._result}var We={current:null},re={transition:null},me={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:re,ReactCurrentOwner:de};function ae(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:lt,forEach:function(V,G,Se){lt(V,function(){G.apply(this,arguments)},Se)},count:function(V){var G=0;return lt(V,function(){G++}),G},toArray:function(V){return lt(V,function(G){return G})||[]},only:function(V){if(!b(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},xe.Component=L,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=X,xe.StrictMode=i,xe.Suspense=g,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,xe.act=ae,xe.cloneElement=function(V,G,Se){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Te=O({},V.props),Pe=V.key,Ne=V.ref,Be=V._owner;if(G!=null){if(G.ref!==void 0&&(Ne=G.ref,Be=de.current),G.key!==void 0&&(Pe=""+G.key),V.type&&V.type.defaultProps)var Fe=V.type.defaultProps;for(Ke in G)se.call(G,Ke)&&!k.hasOwnProperty(Ke)&&(Te[Ke]=G[Ke]===void 0&&Fe!==void 0?Fe[Ke]:G[Ke])}var Ke=arguments.length-2;if(Ke===1)Te.children=Se;else if(1<Ke){Fe=Array(Ke);for(var Ht=0;Ht<Ke;Ht++)Fe[Ht]=arguments[Ht+2];Te.children=Fe}return{$$typeof:r,type:V.type,key:Pe,ref:Ne,props:Te,_owner:Be}},xe.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},xe.createElement=I,xe.createFactory=function(V){var G=I.bind(null,V);return G.type=V,G},xe.createRef=function(){return{current:null}},xe.forwardRef=function(V){return{$$typeof:f,render:V}},xe.isValidElement=b,xe.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:He}},xe.memo=function(V,G){return{$$typeof:y,type:V,compare:G===void 0?null:G}},xe.startTransition=function(V){var G=re.transition;re.transition={};try{V()}finally{re.transition=G}},xe.unstable_act=ae,xe.useCallback=function(V,G){return We.current.useCallback(V,G)},xe.useContext=function(V){return We.current.useContext(V)},xe.useDebugValue=function(){},xe.useDeferredValue=function(V){return We.current.useDeferredValue(V)},xe.useEffect=function(V,G){return We.current.useEffect(V,G)},xe.useId=function(){return We.current.useId()},xe.useImperativeHandle=function(V,G,Se){return We.current.useImperativeHandle(V,G,Se)},xe.useInsertionEffect=function(V,G){return We.current.useInsertionEffect(V,G)},xe.useLayoutEffect=function(V,G){return We.current.useLayoutEffect(V,G)},xe.useMemo=function(V,G){return We.current.useMemo(V,G)},xe.useReducer=function(V,G,Se){return We.current.useReducer(V,G,Se)},xe.useRef=function(V){return We.current.useRef(V)},xe.useState=function(V){return We.current.useState(V)},xe.useSyncExternalStore=function(V,G,Se){return We.current.useSyncExternalStore(V,G,Se)},xe.useTransition=function(){return We.current.useTransition()},xe.version="18.3.1",xe}var Og;function xf(){return Og||(Og=1,kd.exports=nT()),kd.exports}var Vg;function rT(){if(Vg)return za;Vg=1;var r=xf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var v,E={},C=null,z=null;y!==void 0&&(C=""+y),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(z=g.ref);for(v in g)i.call(g,v)&&!l.hasOwnProperty(v)&&(E[v]=g[v]);if(f&&f.defaultProps)for(v in g=f.defaultProps,g)E[v]===void 0&&(E[v]=g[v]);return{$$typeof:e,type:f,key:C,ref:z,props:E,_owner:o.current}}return za.Fragment=t,za.jsx=h,za.jsxs=h,za}var Lg;function iT(){return Lg||(Lg=1,Cd.exports=rT()),Cd.exports}var D=iT(),Ee=xf();const sT=O_(Ee);var $u={},Pd={exports:{}},en={},xd={exports:{}},Nd={};var Mg;function oT(){return Mg||(Mg=1,(function(r){function e(re,me){var ae=re.length;re.push(me);e:for(;0<ae;){var V=ae-1>>>1,G=re[V];if(0<o(G,me))re[V]=me,re[ae]=G,ae=V;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var me=re[0],ae=re.pop();if(ae!==me){re[0]=ae;e:for(var V=0,G=re.length,Se=G>>>1;V<Se;){var Te=2*(V+1)-1,Pe=re[Te],Ne=Te+1,Be=re[Ne];if(0>o(Pe,ae))Ne<G&&0>o(Be,Pe)?(re[V]=Be,re[Ne]=ae,V=Ne):(re[V]=Pe,re[Te]=ae,V=Te);else if(Ne<G&&0>o(Be,ae))re[V]=Be,re[Ne]=ae,V=Ne;else break e}}return me}function o(re,me){var ae=re.sortIndex-me.sortIndex;return ae!==0?ae:re.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var g=[],y=[],v=1,E=null,C=3,z=!1,O=!1,j=!1,L=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(re){for(var me=t(y);me!==null;){if(me.callback===null)i(y);else if(me.startTime<=re)i(y),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(y)}}function te(re){if(j=!1,W(re),!O)if(t(g)!==null)O=!0,He(se);else{var me=t(y);me!==null&&We(te,me.startTime-re)}}function se(re,me){O=!1,j&&(j=!1,Z(I),I=-1),z=!0;var ae=C;try{for(W(me),E=t(g);E!==null&&(!(E.expirationTime>me)||re&&!x());){var V=E.callback;if(typeof V=="function"){E.callback=null,C=E.priorityLevel;var G=V(E.expirationTime<=me);me=r.unstable_now(),typeof G=="function"?E.callback=G:E===t(g)&&i(g),W(me)}else i(g);E=t(g)}if(E!==null)var Se=!0;else{var Te=t(y);Te!==null&&We(te,Te.startTime-me),Se=!1}return Se}finally{E=null,C=ae,z=!1}}var de=!1,k=null,I=-1,R=5,b=-1;function x(){return!(r.unstable_now()-b<R)}function M(){if(k!==null){var re=r.unstable_now();b=re;var me=!0;try{me=k(!0,re)}finally{me?A():(de=!1,k=null)}}else de=!1}var A;if(typeof X=="function")A=function(){X(M)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,lt=Le.port2;Le.port1.onmessage=M,A=function(){lt.postMessage(null)}}else A=function(){L(M,0)};function He(re){k=re,de||(de=!0,A())}function We(re,me){I=L(function(){re(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){O||z||(O=!0,He(se))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(re){switch(C){case 1:case 2:case 3:var me=3;break;default:me=C}var ae=C;C=me;try{return re()}finally{C=ae}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,me){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ae=C;C=re;try{return me()}finally{C=ae}},r.unstable_scheduleCallback=function(re,me,ae){var V=r.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?V+ae:V):ae=V,re){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ae+G,re={id:v++,callback:me,priorityLevel:re,startTime:ae,expirationTime:G,sortIndex:-1},ae>V?(re.sortIndex=ae,e(y,re),t(g)===null&&re===t(y)&&(j?(Z(I),I=-1):j=!0,We(te,ae-V))):(re.sortIndex=G,e(g,re),O||z||(O=!0,He(se))),re},r.unstable_shouldYield=x,r.unstable_wrapCallback=function(re){var me=C;return function(){var ae=C;C=me;try{return re.apply(this,arguments)}finally{C=ae}}}})(Nd)),Nd}var Fg;function aT(){return Fg||(Fg=1,xd.exports=oT()),xd.exports}var Ug;function lT(){if(Ug)return en;Ug=1;var r=xf(),e=aT();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function C(n){return g.call(E,n)?!0:g.call(v,n)?!1:y.test(n)?E[n]=!0:(v[n]=!0,!1)}function z(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function O(n,s,a,c){if(s===null||typeof s>"u"||z(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function j(n,s,a,c,d,p,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=p,this.removeEmptyString=w}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){L[n]=new j(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];L[s]=new j(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){L[n]=new j(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){L[n]=new j(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){L[n]=new j(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){L[n]=new j(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){L[n]=new j(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){L[n]=new j(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){L[n]=new j(n,5,!1,n.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function X(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(Z,X);L[s]=new j(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(Z,X);L[s]=new j(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(Z,X);L[s]=new j(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){L[n]=new j(n,1,!1,n.toLowerCase(),null,!1,!1)}),L.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){L[n]=new j(n,1,!1,n.toLowerCase(),null,!0,!0)});function W(n,s,a,c){var d=L.hasOwnProperty(s)?L[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(O(s,a,d,c)&&(a=null),c||d===null?C(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var te=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),de=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),lt=Symbol.for("react.memo"),He=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),re=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,V;function G(n){if(V===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||""}return`
`+V+n}var Se=!1;function Te(n,s){if(!n||Se)return"";Se=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var c=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){c=$}n.call(s.prototype)}else{try{throw Error()}catch($){c=$}n()}}catch($){if($&&c&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,S=p.length-1;1<=w&&0<=S&&d[w]!==p[S];)S--;for(;1<=w&&0<=S;w--,S--)if(d[w]!==p[S]){if(w!==1||S!==1)do if(w--,S--,0>S||d[w]!==p[S]){var P=`
`+d[w].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=w&&0<=S);break}}}finally{Se=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function Pe(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=Te(n.type,!1),n;case 11:return n=Te(n.type.render,!1),n;case 1:return n=Te(n.type,!0),n;default:return""}}function Ne(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case de:return"Portal";case R:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case Le:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case x:return(n.displayName||"Context")+".Consumer";case b:return(n._context.displayName||"Context")+".Provider";case M:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case lt:return s=n.displayName||null,s!==null?s:Ne(n.type)||"Memo";case He:s=n._payload,n=n._init;try{return Ne(n(s))}catch{}}return null}function Be(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ke(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ht(n){var s=Ke(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function bs(n){n._valueTracker||(n._valueTracker=Ht(n))}function Ko(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Ke(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Kr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ds(n,s){var a=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function kl(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Fe(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Os(n,s){s=s.checked,s!=null&&W(n,"checked",s,!1)}function Ui(n,s){Os(n,s);var a=Fe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?ft(n,s.type,a):s.hasOwnProperty("defaultValue")&&ft(n,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Go(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ft(n,s,a){(s!=="number"||Kr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ut=Array.isArray;function Rn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Qo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Xo(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(ut(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Fe(a)}}function Pl(n,s){var a=Fe(s.value),c=Fe(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Gr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Jo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vs(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Jo(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Qr,xl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Qr=Qr||document.createElement("div"),Qr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Qr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function ji(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Xr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nl=["Webkit","ms","Moz","O"];Object.keys(Xr).forEach(function(n){Nl.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Xr[s]=Xr[n]})});function Jr(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Xr.hasOwnProperty(n)&&Xr[n]?(""+s).trim():s+"px"}function Ls(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Jr(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Yo=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cn(n,s){if(s){if(Yo[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Ms(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yr=null;function Fs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var gr=null,yr=null,ot=null;function Zo(n){if(n=Ra(n)){if(typeof gr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=iu(s),gr(n.stateNode,n.type,s))}}function Zr(n){yr?ot?ot.push(n):ot=[n]:yr=n}function ei(){if(yr){var n=yr,s=ot;if(ot=yr=null,Zo(n),s)for(n=0;n<s.length;n++)Zo(s[n])}}function bl(n,s){return n(s)}function Dl(){}var $n=!1;function Ol(n,s,a){if($n)return n(s,a);$n=!0;try{return bl(n,s,a)}finally{$n=!1,(yr!==null||ot!==null)&&(Dl(),ei())}}function zi(n,s){var a=n.stateNode;if(a===null)return null;var c=iu(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var ti=!1;if(f)try{var ni={};Object.defineProperty(ni,"passive",{get:function(){ti=!0}}),window.addEventListener("test",ni,ni),window.removeEventListener("test",ni,ni)}catch{ti=!1}function Vl(n,s,a,c,d,p,w,S,P){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(Y){this.onError(Y)}}var _r=!1,qn=null,Us=!1,gn=null,Ll={onError:function(n){_r=!0,qn=n}};function Ml(n,s,a,c,d,p,w,S,P){_r=!1,qn=null,Vl.apply(Ll,arguments)}function ea(n,s,a,c,d,p,w,S,P){if(Ml.apply(this,arguments),_r){if(_r){var $=qn;_r=!1,qn=null}else throw Error(t(198));Us||(Us=!0,gn=$)}}function kn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function ta(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Fl(n){if(kn(n)!==n)throw Error(t(188))}function Ul(n){var s=n.alternate;if(!s){if(s=kn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Fl(d),n;if(p===c)return Fl(d),s;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,S=d.child;S;){if(S===a){w=!0,a=d,c=p;break}if(S===c){w=!0,c=d,a=p;break}S=S.sibling}if(!w){for(S=p.child;S;){if(S===a){w=!0,a=p,c=d;break}if(S===c){w=!0,c=p,a=d;break}S=S.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function jl(n){return n=Ul(n),n!==null?Bi(n):null}function Bi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Bi(n);if(s!==null)return s;n=n.sibling}return null}var na=e.unstable_scheduleCallback,js=e.unstable_cancelCallback,$i=e.unstable_shouldYield,vr=e.unstable_requestPaint,Ye=e.unstable_now,ih=e.unstable_getCurrentPriorityLevel,zs=e.unstable_ImmediatePriority,ra=e.unstable_UserBlockingPriority,qi=e.unstable_NormalPriority,ia=e.unstable_LowPriority,Bs=e.unstable_IdlePriority,Hi=null,on=null;function zl(n){if(on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Hi,n,void 0,(n.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Wi,Hn=Math.log,yn=Math.LN2;function Wi(n){return n>>>=0,n===0?32:31-(Hn(n)/yn|0)|0}var Wn=64,ri=4194304;function ze(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function wr(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var S=w&~d;S!==0?c=ze(S):(p&=w,p!==0&&(c=ze(p)))}else w=a&~d,w!==0?c=ze(w):p!==0&&(c=ze(p));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,p=s&-s,d>=p||d===16&&(p&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-an(s),d=1<<a,c|=n[a],s&=~d;return c}function Ki(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gi(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-an(p),S=1<<w,P=d[w];P===-1?((S&a)===0||(S&c)!==0)&&(d[w]=Ki(S,s)):P<=s&&(n.expiredLanes|=S),p&=~S}}function sa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function oa(){var n=Wn;return Wn<<=1,(Wn&4194240)===0&&(Wn=64),n}function aa(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Qi(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-an(s),n[s]=a}function sh(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-an(a),p=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function la(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-an(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Ve=0;function Kn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ua,$s,ca,ha,da,Gn=!1,qs=[],Qn=null,Xn=null,xt=null,Xi=new Map,Er=new Map,ln=[],Bl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ii(n,s){switch(n){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Xi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(s.pointerId)}}function Pn(n,s,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},s!==null&&(s=Ra(s),s!==null&&$s(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function $l(n,s,a,c,d){switch(s){case"focusin":return Qn=Pn(Qn,n,s,a,c,d),!0;case"dragenter":return Xn=Pn(Xn,n,s,a,c,d),!0;case"mouseover":return xt=Pn(xt,n,s,a,c,d),!0;case"pointerover":var p=d.pointerId;return Xi.set(p,Pn(Xi.get(p)||null,n,s,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Er.set(p,Pn(Er.get(p)||null,n,s,a,c,d)),!0}return!1}function Hs(n){var s=es(n.target);if(s!==null){var a=kn(s);if(a!==null){if(s=a.tag,s===13){if(s=ta(a),s!==null){n.blockedOn=s,da(n.priority,function(){ca(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ge(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Ws(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Yr=c,a.target.dispatchEvent(c),Yr=null}else return s=Ra(a),s!==null&&$s(s),n.blockedOn=a,!1;s.shift()}return!0}function ql(n,s,a){Ge(n)&&a.delete(s)}function oh(){Gn=!1,Qn!==null&&Ge(Qn)&&(Qn=null),Xn!==null&&Ge(Xn)&&(Xn=null),xt!==null&&Ge(xt)&&(xt=null),Xi.forEach(ql),Er.forEach(ql)}function si(n,s){n.blockedOn===s&&(n.blockedOn=null,Gn||(Gn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,oh)))}function oi(n){function s(d){return si(d,n)}if(0<qs.length){si(qs[0],n);for(var a=1;a<qs.length;a++){var c=qs[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Qn!==null&&si(Qn,n),Xn!==null&&si(Xn,n),xt!==null&&si(xt,n),Xi.forEach(s),Er.forEach(s),a=0;a<ln.length;a++)c=ln[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<ln.length&&(a=ln[0],a.blockedOn===null);)Hs(a),a.blockedOn===null&&ln.shift()}var Tr=te.ReactCurrentBatchConfig,Ir=!0;function Jn(n,s,a,c){var d=Ve,p=Tr.transition;Tr.transition=null;try{Ve=1,fa(n,s,a,c)}finally{Ve=d,Tr.transition=p}}function Hl(n,s,a,c){var d=Ve,p=Tr.transition;Tr.transition=null;try{Ve=4,fa(n,s,a,c)}finally{Ve=d,Tr.transition=p}}function fa(n,s,a,c){if(Ir){var d=Ws(n,s,a,c);if(d===null)yh(n,s,c,Yn,a),ii(n,c);else if($l(d,n,s,a,c))c.stopPropagation();else if(ii(n,c),s&4&&-1<Bl.indexOf(n)){for(;d!==null;){var p=Ra(d);if(p!==null&&ua(p),p=Ws(n,s,a,c),p===null&&yh(n,s,c,Yn,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else yh(n,s,c,null,a)}}var Yn=null;function Ws(n,s,a,c){if(Yn=null,n=Fs(c),n=es(n),n!==null)if(s=kn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=ta(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Yn=n,null}function Ks(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ih()){case zs:return 1;case ra:return 4;case qi:case ia:return 16;case Bs:return 536870912;default:return 16}default:return 16}}var un=null,Gs=null,Sr=null;function Wl(){if(Sr)return Sr;var n,s=Gs,a=s.length,c,d="value"in un?un.value:un.textContent,p=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[p-c];c++);return Sr=d.slice(n,1<c?1-c:void 0)}function Ji(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Zn(){return!0}function pa(){return!1}function Vt(n){function s(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Zn:pa,this.isPropagationStopped=pa,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),s}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yi=Vt(er),ai=ae({},er,{view:0,detail:0}),Qs=Vt(ai),Xs,Js,cn,Zi=ae({},ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Re,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==cn&&(cn&&n.type==="mousemove"?(Xs=n.screenX-cn.screenX,Js=n.screenY-cn.screenY):Js=Xs=0,cn=n),Xs)},movementY:function(n){return"movementY"in n?n.movementY:Js}}),ma=Vt(Zi),Kl=ae({},Zi,{dataTransfer:0}),Gl=Vt(Kl),Ys=ae({},ai,{relatedTarget:0}),Nt=Vt(Ys),Ql=ae({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Xl=Vt(Ql),li=ae({},er,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Vt(li),m=ae({},er,{data:0}),_=Vt(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ie(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=q[n])?!!s[n]:!1}function Re(){return ie}var ct=ae({},ai,{key:function(n){if(n.key){var s=T[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ji(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?U[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Re,charCode:function(n){return n.type==="keypress"?Ji(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ji(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qe=Vt(ct),pt=ae({},Zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hn=Vt(pt),Ar=ae({},ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Re}),tr=Vt(Ar),nr=ae({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zs=Vt(nr),ga=ae({},Zi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),XE=Vt(ga),JE=[9,13,27,32],ah=f&&"CompositionEvent"in window,ya=null;f&&"documentMode"in document&&(ya=document.documentMode);var YE=f&&"TextEvent"in window&&!ya,Ap=f&&(!ah||ya&&8<ya&&11>=ya),Rp=" ",Cp=!1;function kp(n,s){switch(n){case"keyup":return JE.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var eo=!1;function ZE(n,s){switch(n){case"compositionend":return Pp(s);case"keypress":return s.which!==32?null:(Cp=!0,Rp);case"textInput":return n=s.data,n===Rp&&Cp?null:n;default:return null}}function e0(n,s){if(eo)return n==="compositionend"||!ah&&kp(n,s)?(n=Wl(),Sr=Gs=un=null,eo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ap&&s.locale!=="ko"?null:s.data;default:return null}}var t0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!t0[n.type]:s==="textarea"}function Np(n,s,a,c){Zr(c),s=tu(s,"onChange"),0<s.length&&(a=new Yi("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var _a=null,va=null;function n0(n){Qp(n,0)}function Jl(n){var s=so(n);if(Ko(s))return n}function r0(n,s){if(n==="change")return s}var bp=!1;if(f){var lh;if(f){var uh="oninput"in document;if(!uh){var Dp=document.createElement("div");Dp.setAttribute("oninput","return;"),uh=typeof Dp.oninput=="function"}lh=uh}else lh=!1;bp=lh&&(!document.documentMode||9<document.documentMode)}function Op(){_a&&(_a.detachEvent("onpropertychange",Vp),va=_a=null)}function Vp(n){if(n.propertyName==="value"&&Jl(va)){var s=[];Np(s,va,n,Fs(n)),Ol(n0,s)}}function i0(n,s,a){n==="focusin"?(Op(),_a=s,va=a,_a.attachEvent("onpropertychange",Vp)):n==="focusout"&&Op()}function s0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Jl(va)}function o0(n,s){if(n==="click")return Jl(s)}function a0(n,s){if(n==="input"||n==="change")return Jl(s)}function l0(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var xn=typeof Object.is=="function"?Object.is:l0;function wa(n,s){if(xn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(s,d)||!xn(n[d],s[d]))return!1}return!0}function Lp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Mp(n,s){var a=Lp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lp(a)}}function Fp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Fp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Up(){for(var n=window,s=Kr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Kr(n.document)}return s}function ch(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function u0(n){var s=Up(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Fp(a.ownerDocument.documentElement,a)){if(c!==null&&ch(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=Mp(a,p);var w=Mp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var c0=f&&"documentMode"in document&&11>=document.documentMode,to=null,hh=null,Ea=null,dh=!1;function jp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;dh||to==null||to!==Kr(c)||(c=to,"selectionStart"in c&&ch(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ea&&wa(Ea,c)||(Ea=c,c=tu(hh,"onSelect"),0<c.length&&(s=new Yi("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=to)))}function Yl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var no={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionend:Yl("Transition","TransitionEnd")},fh={},zp={};f&&(zp=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Zl(n){if(fh[n])return fh[n];if(!no[n])return n;var s=no[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in zp)return fh[n]=s[a];return n}var Bp=Zl("animationend"),$p=Zl("animationiteration"),qp=Zl("animationstart"),Hp=Zl("transitionend"),Wp=new Map,Kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(n,s){Wp.set(n,s),l(s,[n])}for(var ph=0;ph<Kp.length;ph++){var mh=Kp[ph],h0=mh.toLowerCase(),d0=mh[0].toUpperCase()+mh.slice(1);ui(h0,"on"+d0)}ui(Bp,"onAnimationEnd"),ui($p,"onAnimationIteration"),ui(qp,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(Hp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Gp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,ea(c,s,void 0,n),n.currentTarget=null}function Qp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var w=c.length-1;0<=w;w--){var S=c[w],P=S.instance,$=S.currentTarget;if(S=S.listener,P!==p&&d.isPropagationStopped())break e;Gp(d,S,$),p=P}else for(w=0;w<c.length;w++){if(S=c[w],P=S.instance,$=S.currentTarget,S=S.listener,P!==p&&d.isPropagationStopped())break e;Gp(d,S,$),p=P}}}if(Us)throw n=gn,Us=!1,gn=null,n}function Ze(n,s){var a=s[Ih];a===void 0&&(a=s[Ih]=new Set);var c=n+"__bubble";a.has(c)||(Xp(s,n,2,!1),a.add(c))}function gh(n,s,a){var c=0;s&&(c|=4),Xp(a,n,c,s)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Ia(n){if(!n[eu]){n[eu]=!0,i.forEach(function(a){a!=="selectionchange"&&(f0.has(a)||gh(a,!1,n),gh(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[eu]||(s[eu]=!0,gh("selectionchange",!1,s))}}function Xp(n,s,a,c){switch(Ks(s)){case 1:var d=Jn;break;case 4:d=Hl;break;default:d=fa}a=d.bind(null,s,a,n),d=void 0,!ti||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function yh(n,s,a,c,d){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var P=w.tag;if((P===3||P===4)&&(P=w.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;w=w.return}for(;S!==null;){if(w=es(S),w===null)return;if(P=w.tag,P===5||P===6){c=p=w;continue e}S=S.parentNode}}c=c.return}Ol(function(){var $=p,Y=Fs(a),ee=[];e:{var J=Wp.get(n);if(J!==void 0){var oe=Yi,he=n;switch(n){case"keypress":if(Ji(a)===0)break e;case"keydown":case"keyup":oe=qe;break;case"focusin":he="focus",oe=Nt;break;case"focusout":he="blur",oe=Nt;break;case"beforeblur":case"afterblur":oe=Nt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Gl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=tr;break;case Bp:case $p:case qp:oe=Xl;break;case Hp:oe=Zs;break;case"scroll":oe=Qs;break;case"wheel":oe=XE;break;case"copy":case"cut":case"paste":oe=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=hn}var fe=(s&4)!==0,ht=!fe&&n==="scroll",F=fe?J!==null?J+"Capture":null:J;fe=[];for(var N=$,B;N!==null;){B=N;var ne=B.stateNode;if(B.tag===5&&ne!==null&&(B=ne,F!==null&&(ne=zi(N,F),ne!=null&&fe.push(Sa(N,ne,B)))),ht)break;N=N.return}0<fe.length&&(J=new oe(J,he,null,a,Y),ee.push({event:J,listeners:fe}))}}if((s&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",oe=n==="mouseout"||n==="pointerout",J&&a!==Yr&&(he=a.relatedTarget||a.fromElement)&&(es(he)||he[Rr]))break e;if((oe||J)&&(J=Y.window===Y?Y:(J=Y.ownerDocument)?J.defaultView||J.parentWindow:window,oe?(he=a.relatedTarget||a.toElement,oe=$,he=he?es(he):null,he!==null&&(ht=kn(he),he!==ht||he.tag!==5&&he.tag!==6)&&(he=null)):(oe=null,he=$),oe!==he)){if(fe=ma,ne="onMouseLeave",F="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(fe=hn,ne="onPointerLeave",F="onPointerEnter",N="pointer"),ht=oe==null?J:so(oe),B=he==null?J:so(he),J=new fe(ne,N+"leave",oe,a,Y),J.target=ht,J.relatedTarget=B,ne=null,es(Y)===$&&(fe=new fe(F,N+"enter",he,a,Y),fe.target=B,fe.relatedTarget=ht,ne=fe),ht=ne,oe&&he)t:{for(fe=oe,F=he,N=0,B=fe;B;B=ro(B))N++;for(B=0,ne=F;ne;ne=ro(ne))B++;for(;0<N-B;)fe=ro(fe),N--;for(;0<B-N;)F=ro(F),B--;for(;N--;){if(fe===F||F!==null&&fe===F.alternate)break t;fe=ro(fe),F=ro(F)}fe=null}else fe=null;oe!==null&&Jp(ee,J,oe,fe,!1),he!==null&&ht!==null&&Jp(ee,ht,he,fe,!0)}}e:{if(J=$?so($):window,oe=J.nodeName&&J.nodeName.toLowerCase(),oe==="select"||oe==="input"&&J.type==="file")var pe=r0;else if(xp(J))if(bp)pe=a0;else{pe=s0;var ye=i0}else(oe=J.nodeName)&&oe.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(pe=o0);if(pe&&(pe=pe(n,$))){Np(ee,pe,a,Y);break e}ye&&ye(n,J,$),n==="focusout"&&(ye=J._wrapperState)&&ye.controlled&&J.type==="number"&&ft(J,"number",J.value)}switch(ye=$?so($):window,n){case"focusin":(xp(ye)||ye.contentEditable==="true")&&(to=ye,hh=$,Ea=null);break;case"focusout":Ea=hh=to=null;break;case"mousedown":dh=!0;break;case"contextmenu":case"mouseup":case"dragend":dh=!1,jp(ee,a,Y);break;case"selectionchange":if(c0)break;case"keydown":case"keyup":jp(ee,a,Y)}var _e;if(ah)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else eo?kp(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Ap&&a.locale!=="ko"&&(eo||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&eo&&(_e=Wl()):(un=Y,Gs="value"in un?un.value:un.textContent,eo=!0)),ye=tu($,Ie),0<ye.length&&(Ie=new _(Ie,n,null,a,Y),ee.push({event:Ie,listeners:ye}),_e?Ie.data=_e:(_e=Pp(a),_e!==null&&(Ie.data=_e)))),(_e=YE?ZE(n,a):e0(n,a))&&($=tu($,"onBeforeInput"),0<$.length&&(Y=new _("onBeforeInput","beforeinput",null,a,Y),ee.push({event:Y,listeners:$}),Y.data=_e))}Qp(ee,s)})}function Sa(n,s,a){return{instance:n,listener:s,currentTarget:a}}function tu(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=zi(n,a),p!=null&&c.unshift(Sa(n,p,d)),p=zi(n,s),p!=null&&c.push(Sa(n,p,d))),n=n.return}return c}function ro(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Jp(n,s,a,c,d){for(var p=s._reactName,w=[];a!==null&&a!==c;){var S=a,P=S.alternate,$=S.stateNode;if(P!==null&&P===c)break;S.tag===5&&$!==null&&(S=$,d?(P=zi(a,p),P!=null&&w.unshift(Sa(a,P,S))):d||(P=zi(a,p),P!=null&&w.push(Sa(a,P,S)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var p0=/\r\n?/g,m0=/\u0000|\uFFFD/g;function Yp(n){return(typeof n=="string"?n:""+n).replace(p0,`
`).replace(m0,"")}function nu(n,s,a){if(s=Yp(s),Yp(n)!==s&&a)throw Error(t(425))}function ru(){}var _h=null,vh=null;function wh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Eh=typeof setTimeout=="function"?setTimeout:void 0,g0=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,y0=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(n){return Zp.resolve(null).then(n).catch(_0)}:Eh;function _0(n){setTimeout(function(){throw n})}function Th(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),oi(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);oi(s)}function ci(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function em(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var io=Math.random().toString(36).slice(2),rr="__reactFiber$"+io,Aa="__reactProps$"+io,Rr="__reactContainer$"+io,Ih="__reactEvents$"+io,v0="__reactListeners$"+io,w0="__reactHandles$"+io;function es(n){var s=n[rr];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Rr]||a[rr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=em(n);n!==null;){if(a=n[rr])return a;n=em(n)}return s}n=a,a=n.parentNode}return null}function Ra(n){return n=n[rr]||n[Rr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function so(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function iu(n){return n[Aa]||null}var Sh=[],oo=-1;function hi(n){return{current:n}}function et(n){0>oo||(n.current=Sh[oo],Sh[oo]=null,oo--)}function Qe(n,s){oo++,Sh[oo]=n.current,n.current=s}var di={},Lt=hi(di),Qt=hi(!1),ts=di;function ao(n,s){var a=n.type.contextTypes;if(!a)return di;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=s[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function Xt(n){return n=n.childContextTypes,n!=null}function su(){et(Qt),et(Lt)}function tm(n,s,a){if(Lt.current!==di)throw Error(t(168));Qe(Lt,s),Qe(Qt,a)}function nm(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,Be(n)||"Unknown",d));return ae({},a,c)}function ou(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||di,ts=Lt.current,Qe(Lt,n),Qe(Qt,Qt.current),!0}function rm(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=nm(n,s,ts),c.__reactInternalMemoizedMergedChildContext=n,et(Qt),et(Lt),Qe(Lt,n)):et(Qt),Qe(Qt,a)}var Cr=null,au=!1,Ah=!1;function im(n){Cr===null?Cr=[n]:Cr.push(n)}function E0(n){au=!0,im(n)}function fi(){if(!Ah&&Cr!==null){Ah=!0;var n=0,s=Ve;try{var a=Cr;for(Ve=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Cr=null,au=!1}catch(d){throw Cr!==null&&(Cr=Cr.slice(n+1)),na(zs,fi),d}finally{Ve=s,Ah=!1}}return null}var lo=[],uo=0,lu=null,uu=0,_n=[],vn=0,ns=null,kr=1,Pr="";function rs(n,s){lo[uo++]=uu,lo[uo++]=lu,lu=n,uu=s}function sm(n,s,a){_n[vn++]=kr,_n[vn++]=Pr,_n[vn++]=ns,ns=n;var c=kr;n=Pr;var d=32-an(c)-1;c&=~(1<<d),a+=1;var p=32-an(s)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,kr=1<<32-an(s)+d|a<<d|c,Pr=p+n}else kr=1<<p|a<<d|c,Pr=n}function Rh(n){n.return!==null&&(rs(n,1),sm(n,1,0))}function Ch(n){for(;n===lu;)lu=lo[--uo],lo[uo]=null,uu=lo[--uo],lo[uo]=null;for(;n===ns;)ns=_n[--vn],_n[vn]=null,Pr=_n[--vn],_n[vn]=null,kr=_n[--vn],_n[vn]=null}var dn=null,fn=null,tt=!1,Nn=null;function om(n,s){var a=In(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function am(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,dn=n,fn=ci(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,dn=n,fn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=ns!==null?{id:kr,overflow:Pr}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=In(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,dn=n,fn=null,!0):!1;default:return!1}}function kh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ph(n){if(tt){var s=fn;if(s){var a=s;if(!am(n,s)){if(kh(n))throw Error(t(418));s=ci(a.nextSibling);var c=dn;s&&am(n,s)?om(c,a):(n.flags=n.flags&-4097|2,tt=!1,dn=n)}}else{if(kh(n))throw Error(t(418));n.flags=n.flags&-4097|2,tt=!1,dn=n}}}function lm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;dn=n}function cu(n){if(n!==dn)return!1;if(!tt)return lm(n),tt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!wh(n.type,n.memoizedProps)),s&&(s=fn)){if(kh(n))throw um(),Error(t(418));for(;s;)om(n,s),s=ci(s.nextSibling)}if(lm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){fn=ci(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}fn=null}}else fn=dn?ci(n.stateNode.nextSibling):null;return!0}function um(){for(var n=fn;n;)n=ci(n.nextSibling)}function co(){fn=dn=null,tt=!1}function xh(n){Nn===null?Nn=[n]:Nn.push(n)}var T0=te.ReactCurrentBatchConfig;function Ca(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(w){var S=d.refs;w===null?delete S[p]:S[p]=w},s._stringRef=p,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function hu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function cm(n){var s=n._init;return s(n._payload)}function hm(n){function s(F,N){if(n){var B=F.deletions;B===null?(F.deletions=[N],F.flags|=16):B.push(N)}}function a(F,N){if(!n)return null;for(;N!==null;)s(F,N),N=N.sibling;return null}function c(F,N){for(F=new Map;N!==null;)N.key!==null?F.set(N.key,N):F.set(N.index,N),N=N.sibling;return F}function d(F,N){return F=Ei(F,N),F.index=0,F.sibling=null,F}function p(F,N,B){return F.index=B,n?(B=F.alternate,B!==null?(B=B.index,B<N?(F.flags|=2,N):B):(F.flags|=2,N)):(F.flags|=1048576,N)}function w(F){return n&&F.alternate===null&&(F.flags|=2),F}function S(F,N,B,ne){return N===null||N.tag!==6?(N=Ed(B,F.mode,ne),N.return=F,N):(N=d(N,B),N.return=F,N)}function P(F,N,B,ne){var pe=B.type;return pe===k?Y(F,N,B.props.children,ne,B.key):N!==null&&(N.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===He&&cm(pe)===N.type)?(ne=d(N,B.props),ne.ref=Ca(F,N,B),ne.return=F,ne):(ne=Vu(B.type,B.key,B.props,null,F.mode,ne),ne.ref=Ca(F,N,B),ne.return=F,ne)}function $(F,N,B,ne){return N===null||N.tag!==4||N.stateNode.containerInfo!==B.containerInfo||N.stateNode.implementation!==B.implementation?(N=Td(B,F.mode,ne),N.return=F,N):(N=d(N,B.children||[]),N.return=F,N)}function Y(F,N,B,ne,pe){return N===null||N.tag!==7?(N=hs(B,F.mode,ne,pe),N.return=F,N):(N=d(N,B),N.return=F,N)}function ee(F,N,B){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Ed(""+N,F.mode,B),N.return=F,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case se:return B=Vu(N.type,N.key,N.props,null,F.mode,B),B.ref=Ca(F,null,N),B.return=F,B;case de:return N=Td(N,F.mode,B),N.return=F,N;case He:var ne=N._init;return ee(F,ne(N._payload),B)}if(ut(N)||me(N))return N=hs(N,F.mode,B,null),N.return=F,N;hu(F,N)}return null}function J(F,N,B,ne){var pe=N!==null?N.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return pe!==null?null:S(F,N,""+B,ne);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case se:return B.key===pe?P(F,N,B,ne):null;case de:return B.key===pe?$(F,N,B,ne):null;case He:return pe=B._init,J(F,N,pe(B._payload),ne)}if(ut(B)||me(B))return pe!==null?null:Y(F,N,B,ne,null);hu(F,B)}return null}function oe(F,N,B,ne,pe){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return F=F.get(B)||null,S(N,F,""+ne,pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case se:return F=F.get(ne.key===null?B:ne.key)||null,P(N,F,ne,pe);case de:return F=F.get(ne.key===null?B:ne.key)||null,$(N,F,ne,pe);case He:var ye=ne._init;return oe(F,N,B,ye(ne._payload),pe)}if(ut(ne)||me(ne))return F=F.get(B)||null,Y(N,F,ne,pe,null);hu(N,ne)}return null}function he(F,N,B,ne){for(var pe=null,ye=null,_e=N,Ie=N=0,Rt=null;_e!==null&&Ie<B.length;Ie++){_e.index>Ie?(Rt=_e,_e=null):Rt=_e.sibling;var je=J(F,_e,B[Ie],ne);if(je===null){_e===null&&(_e=Rt);break}n&&_e&&je.alternate===null&&s(F,_e),N=p(je,N,Ie),ye===null?pe=je:ye.sibling=je,ye=je,_e=Rt}if(Ie===B.length)return a(F,_e),tt&&rs(F,Ie),pe;if(_e===null){for(;Ie<B.length;Ie++)_e=ee(F,B[Ie],ne),_e!==null&&(N=p(_e,N,Ie),ye===null?pe=_e:ye.sibling=_e,ye=_e);return tt&&rs(F,Ie),pe}for(_e=c(F,_e);Ie<B.length;Ie++)Rt=oe(_e,F,Ie,B[Ie],ne),Rt!==null&&(n&&Rt.alternate!==null&&_e.delete(Rt.key===null?Ie:Rt.key),N=p(Rt,N,Ie),ye===null?pe=Rt:ye.sibling=Rt,ye=Rt);return n&&_e.forEach(function(Ti){return s(F,Ti)}),tt&&rs(F,Ie),pe}function fe(F,N,B,ne){var pe=me(B);if(typeof pe!="function")throw Error(t(150));if(B=pe.call(B),B==null)throw Error(t(151));for(var ye=pe=null,_e=N,Ie=N=0,Rt=null,je=B.next();_e!==null&&!je.done;Ie++,je=B.next()){_e.index>Ie?(Rt=_e,_e=null):Rt=_e.sibling;var Ti=J(F,_e,je.value,ne);if(Ti===null){_e===null&&(_e=Rt);break}n&&_e&&Ti.alternate===null&&s(F,_e),N=p(Ti,N,Ie),ye===null?pe=Ti:ye.sibling=Ti,ye=Ti,_e=Rt}if(je.done)return a(F,_e),tt&&rs(F,Ie),pe;if(_e===null){for(;!je.done;Ie++,je=B.next())je=ee(F,je.value,ne),je!==null&&(N=p(je,N,Ie),ye===null?pe=je:ye.sibling=je,ye=je);return tt&&rs(F,Ie),pe}for(_e=c(F,_e);!je.done;Ie++,je=B.next())je=oe(_e,F,Ie,je.value,ne),je!==null&&(n&&je.alternate!==null&&_e.delete(je.key===null?Ie:je.key),N=p(je,N,Ie),ye===null?pe=je:ye.sibling=je,ye=je);return n&&_e.forEach(function(tT){return s(F,tT)}),tt&&rs(F,Ie),pe}function ht(F,N,B,ne){if(typeof B=="object"&&B!==null&&B.type===k&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case se:e:{for(var pe=B.key,ye=N;ye!==null;){if(ye.key===pe){if(pe=B.type,pe===k){if(ye.tag===7){a(F,ye.sibling),N=d(ye,B.props.children),N.return=F,F=N;break e}}else if(ye.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===He&&cm(pe)===ye.type){a(F,ye.sibling),N=d(ye,B.props),N.ref=Ca(F,ye,B),N.return=F,F=N;break e}a(F,ye);break}else s(F,ye);ye=ye.sibling}B.type===k?(N=hs(B.props.children,F.mode,ne,B.key),N.return=F,F=N):(ne=Vu(B.type,B.key,B.props,null,F.mode,ne),ne.ref=Ca(F,N,B),ne.return=F,F=ne)}return w(F);case de:e:{for(ye=B.key;N!==null;){if(N.key===ye)if(N.tag===4&&N.stateNode.containerInfo===B.containerInfo&&N.stateNode.implementation===B.implementation){a(F,N.sibling),N=d(N,B.children||[]),N.return=F,F=N;break e}else{a(F,N);break}else s(F,N);N=N.sibling}N=Td(B,F.mode,ne),N.return=F,F=N}return w(F);case He:return ye=B._init,ht(F,N,ye(B._payload),ne)}if(ut(B))return he(F,N,B,ne);if(me(B))return fe(F,N,B,ne);hu(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,N!==null&&N.tag===6?(a(F,N.sibling),N=d(N,B),N.return=F,F=N):(a(F,N),N=Ed(B,F.mode,ne),N.return=F,F=N),w(F)):a(F,N)}return ht}var ho=hm(!0),dm=hm(!1),du=hi(null),fu=null,fo=null,Nh=null;function bh(){Nh=fo=fu=null}function Dh(n){var s=du.current;et(du),n._currentValue=s}function Oh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function po(n,s){fu=n,Nh=fo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Jt=!0),n.firstContext=null)}function wn(n){var s=n._currentValue;if(Nh!==n)if(n={context:n,memoizedValue:s,next:null},fo===null){if(fu===null)throw Error(t(308));fo=n,fu.dependencies={lanes:0,firstContext:n}}else fo=fo.next=n;return s}var is=null;function Vh(n){is===null?is=[n]:is.push(n)}function fm(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,Vh(s)):(a.next=d.next,d.next=a),s.interleaved=a,xr(n,c)}function xr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var pi=!1;function Lh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Nr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function mi(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ue&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,xr(n,a)}return d=c.interleaved,d===null?(s.next=s,Vh(c)):(s.next=d.next,d.next=s),c.interleaved=s,xr(n,a)}function pu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,la(n,a)}}function mm(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=s:p=p.next=s}else d=p=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function mu(n,s,a,c){var d=n.updateQueue;pi=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var P=S,$=P.next;P.next=null,w===null?p=$:w.next=$,w=P;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,S=Y.lastBaseUpdate,S!==w&&(S===null?Y.firstBaseUpdate=$:S.next=$,Y.lastBaseUpdate=P))}if(p!==null){var ee=d.baseState;w=0,Y=$=P=null,S=p;do{var J=S.lane,oe=S.eventTime;if((c&J)===J){Y!==null&&(Y=Y.next={eventTime:oe,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var he=n,fe=S;switch(J=s,oe=a,fe.tag){case 1:if(he=fe.payload,typeof he=="function"){ee=he.call(oe,ee,J);break e}ee=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=fe.payload,J=typeof he=="function"?he.call(oe,ee,J):he,J==null)break e;ee=ae({},ee,J);break e;case 2:pi=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,J=d.effects,J===null?d.effects=[S]:J.push(S))}else oe={eventTime:oe,lane:J,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Y===null?($=Y=oe,P=ee):Y=Y.next=oe,w|=J;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;J=S,S=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);if(Y===null&&(P=ee),d.baseState=P,d.firstBaseUpdate=$,d.lastBaseUpdate=Y,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else p===null&&(d.shared.lanes=0);as|=w,n.lanes=w,n.memoizedState=ee}}function gm(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ka={},ir=hi(ka),Pa=hi(ka),xa=hi(ka);function ss(n){if(n===ka)throw Error(t(174));return n}function Mh(n,s){switch(Qe(xa,s),Qe(Pa,n),Qe(ir,ka),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Vs(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Vs(s,n)}et(ir),Qe(ir,s)}function mo(){et(ir),et(Pa),et(xa)}function ym(n){ss(xa.current);var s=ss(ir.current),a=Vs(s,n.type);s!==a&&(Qe(Pa,n),Qe(ir,a))}function Fh(n){Pa.current===n&&(et(ir),et(Pa))}var nt=hi(0);function gu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Uh=[];function jh(){for(var n=0;n<Uh.length;n++)Uh[n]._workInProgressVersionPrimary=null;Uh.length=0}var yu=te.ReactCurrentDispatcher,zh=te.ReactCurrentBatchConfig,os=0,rt=null,wt=null,St=null,_u=!1,Na=!1,ba=0,I0=0;function Mt(){throw Error(t(321))}function Bh(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!xn(n[a],s[a]))return!1;return!0}function $h(n,s,a,c,d,p){if(os=p,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,yu.current=n===null||n.memoizedState===null?C0:k0,n=a(c,d),Na){p=0;do{if(Na=!1,ba=0,25<=p)throw Error(t(301));p+=1,St=wt=null,s.updateQueue=null,yu.current=P0,n=a(c,d)}while(Na)}if(yu.current=Eu,s=wt!==null&&wt.next!==null,os=0,St=wt=rt=null,_u=!1,s)throw Error(t(300));return n}function qh(){var n=ba!==0;return ba=0,n}function sr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?rt.memoizedState=St=n:St=St.next=n,St}function En(){if(wt===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var s=St===null?rt.memoizedState:St.next;if(s!==null)St=s,wt=n;else{if(n===null)throw Error(t(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},St===null?rt.memoizedState=St=n:St=St.next=n}return St}function Da(n,s){return typeof s=="function"?s(n):s}function Hh(n){var s=En(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=wt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var S=w=null,P=null,$=p;do{var Y=$.lane;if((os&Y)===Y)P!==null&&(P=P.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),c=$.hasEagerState?$.eagerState:n(c,$.action);else{var ee={lane:Y,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};P===null?(S=P=ee,w=c):P=P.next=ee,rt.lanes|=Y,as|=Y}$=$.next}while($!==null&&$!==p);P===null?w=c:P.next=S,xn(c,s.memoizedState)||(Jt=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=P,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,rt.lanes|=p,as|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Wh(n){var s=En(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);xn(p,s.memoizedState)||(Jt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,c]}function _m(){}function vm(n,s){var a=rt,c=En(),d=s(),p=!xn(c.memoizedState,d);if(p&&(c.memoizedState=d,Jt=!0),c=c.queue,Kh(Tm.bind(null,a,c,n),[n]),c.getSnapshot!==s||p||St!==null&&St.memoizedState.tag&1){if(a.flags|=2048,Oa(9,Em.bind(null,a,c,d,s),void 0,null),At===null)throw Error(t(349));(os&30)!==0||wm(a,s,d)}return d}function wm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Em(n,s,a,c){s.value=a,s.getSnapshot=c,Im(s)&&Sm(n)}function Tm(n,s,a){return a(function(){Im(s)&&Sm(n)})}function Im(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!xn(n,a)}catch{return!0}}function Sm(n){var s=xr(n,1);s!==null&&Vn(s,n,1,-1)}function Am(n){var s=sr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:n},s.queue=n,n=n.dispatch=R0.bind(null,rt,n),[s.memoizedState,n]}function Oa(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function Rm(){return En().memoizedState}function vu(n,s,a,c){var d=sr();rt.flags|=n,d.memoizedState=Oa(1|s,a,void 0,c===void 0?null:c)}function wu(n,s,a,c){var d=En();c=c===void 0?null:c;var p=void 0;if(wt!==null){var w=wt.memoizedState;if(p=w.destroy,c!==null&&Bh(c,w.deps)){d.memoizedState=Oa(s,a,p,c);return}}rt.flags|=n,d.memoizedState=Oa(1|s,a,p,c)}function Cm(n,s){return vu(8390656,8,n,s)}function Kh(n,s){return wu(2048,8,n,s)}function km(n,s){return wu(4,2,n,s)}function Pm(n,s){return wu(4,4,n,s)}function xm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Nm(n,s,a){return a=a!=null?a.concat([n]):null,wu(4,4,xm.bind(null,s,n),a)}function Gh(){}function bm(n,s){var a=En();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Bh(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function Dm(n,s){var a=En();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Bh(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function Om(n,s,a){return(os&21)===0?(n.baseState&&(n.baseState=!1,Jt=!0),n.memoizedState=a):(xn(a,s)||(a=oa(),rt.lanes|=a,as|=a,n.baseState=!0),s)}function S0(n,s){var a=Ve;Ve=a!==0&&4>a?a:4,n(!0);var c=zh.transition;zh.transition={};try{n(!1),s()}finally{Ve=a,zh.transition=c}}function Vm(){return En().memoizedState}function A0(n,s,a){var c=vi(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Lm(n))Mm(s,a);else if(a=fm(n,s,a,c),a!==null){var d=Kt();Vn(a,n,c,d),Fm(a,s,c)}}function R0(n,s,a){var c=vi(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lm(n))Mm(s,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var w=s.lastRenderedState,S=p(w,a);if(d.hasEagerState=!0,d.eagerState=S,xn(S,w)){var P=s.interleaved;P===null?(d.next=d,Vh(s)):(d.next=P.next,P.next=d),s.interleaved=d;return}}catch{}finally{}a=fm(n,s,d,c),a!==null&&(d=Kt(),Vn(a,n,c,d),Fm(a,s,c))}}function Lm(n){var s=n.alternate;return n===rt||s!==null&&s===rt}function Mm(n,s){Na=_u=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Fm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,la(n,a)}}var Eu={readContext:wn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},C0={readContext:wn,useCallback:function(n,s){return sr().memoizedState=[n,s===void 0?null:s],n},useContext:wn,useEffect:Cm,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,vu(4194308,4,xm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return vu(4194308,4,n,s)},useInsertionEffect:function(n,s){return vu(4,2,n,s)},useMemo:function(n,s){var a=sr();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=sr();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=A0.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var s=sr();return n={current:n},s.memoizedState=n},useState:Am,useDebugValue:Gh,useDeferredValue:function(n){return sr().memoizedState=n},useTransition:function(){var n=Am(!1),s=n[0];return n=S0.bind(null,n[1]),sr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=rt,d=sr();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),At===null)throw Error(t(349));(os&30)!==0||wm(c,s,a)}d.memoizedState=a;var p={value:a,getSnapshot:s};return d.queue=p,Cm(Tm.bind(null,c,p,n),[n]),c.flags|=2048,Oa(9,Em.bind(null,c,p,a,s),void 0,null),a},useId:function(){var n=sr(),s=At.identifierPrefix;if(tt){var a=Pr,c=kr;a=(c&~(1<<32-an(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=ba++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=I0++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},k0={readContext:wn,useCallback:bm,useContext:wn,useEffect:Kh,useImperativeHandle:Nm,useInsertionEffect:km,useLayoutEffect:Pm,useMemo:Dm,useReducer:Hh,useRef:Rm,useState:function(){return Hh(Da)},useDebugValue:Gh,useDeferredValue:function(n){var s=En();return Om(s,wt.memoizedState,n)},useTransition:function(){var n=Hh(Da)[0],s=En().memoizedState;return[n,s]},useMutableSource:_m,useSyncExternalStore:vm,useId:Vm,unstable_isNewReconciler:!1},P0={readContext:wn,useCallback:bm,useContext:wn,useEffect:Kh,useImperativeHandle:Nm,useInsertionEffect:km,useLayoutEffect:Pm,useMemo:Dm,useReducer:Wh,useRef:Rm,useState:function(){return Wh(Da)},useDebugValue:Gh,useDeferredValue:function(n){var s=En();return wt===null?s.memoizedState=n:Om(s,wt.memoizedState,n)},useTransition:function(){var n=Wh(Da)[0],s=En().memoizedState;return[n,s]},useMutableSource:_m,useSyncExternalStore:vm,useId:Vm,unstable_isNewReconciler:!1};function bn(n,s){if(n&&n.defaultProps){s=ae({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Qh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:ae({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Tu={isMounted:function(n){return(n=n._reactInternals)?kn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=Kt(),d=vi(n),p=Nr(c,d);p.payload=s,a!=null&&(p.callback=a),s=mi(n,p,d),s!==null&&(Vn(s,n,d,c),pu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=Kt(),d=vi(n),p=Nr(c,d);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=mi(n,p,d),s!==null&&(Vn(s,n,d,c),pu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Kt(),c=vi(n),d=Nr(a,c);d.tag=2,s!=null&&(d.callback=s),s=mi(n,d,c),s!==null&&(Vn(s,n,c,a),pu(s,n,c))}};function Um(n,s,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):s.prototype&&s.prototype.isPureReactComponent?!wa(a,c)||!wa(d,p):!0}function jm(n,s,a){var c=!1,d=di,p=s.contextType;return typeof p=="object"&&p!==null?p=wn(p):(d=Xt(s)?ts:Lt.current,c=s.contextTypes,p=(c=c!=null)?ao(n,d):di),s=new s(a,p),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Tu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),s}function zm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&Tu.enqueueReplaceState(s,s.state,null)}function Xh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Lh(n);var p=s.contextType;typeof p=="object"&&p!==null?d.context=wn(p):(p=Xt(s)?ts:Lt.current,d.context=ao(n,p)),d.state=n.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Qh(n,s,p,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&Tu.enqueueReplaceState(d,d.state,null),mu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function go(n,s){try{var a="",c=s;do a+=Pe(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:s,stack:d,digest:null}}function Jh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Yh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var x0=typeof WeakMap=="function"?WeakMap:Map;function Bm(n,s,a){a=Nr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Pu||(Pu=!0,fd=c),Yh(n,s)},a}function $m(n,s,a){a=Nr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){Yh(n,s)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Yh(n,s),typeof c!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function qm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new x0;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=q0.bind(null,n,s,a),s.then(n,n))}function Hm(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Wm(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Nr(-1,1),s.tag=2,mi(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var N0=te.ReactCurrentOwner,Jt=!1;function Wt(n,s,a,c){s.child=n===null?dm(s,null,a,c):ho(s,n.child,a,c)}function Km(n,s,a,c,d){a=a.render;var p=s.ref;return po(s,d),c=$h(n,s,a,c,p,d),a=qh(),n!==null&&!Jt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,br(n,s,d)):(tt&&a&&Rh(s),s.flags|=1,Wt(n,s,c,d),s.child)}function Gm(n,s,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!wd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,Qm(n,s,p,c,d)):(n=Vu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:wa,a(w,c)&&n.ref===s.ref)return br(n,s,d)}return s.flags|=1,n=Ei(p,c),n.ref=s.ref,n.return=s,s.child=n}function Qm(n,s,a,c,d){if(n!==null){var p=n.memoizedProps;if(wa(p,c)&&n.ref===s.ref)if(Jt=!1,s.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Jt=!0);else return s.lanes=n.lanes,br(n,s,d)}return Zh(n,s,a,c,d)}function Xm(n,s,a){var c=s.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(_o,pn),pn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Qe(_o,pn),pn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Qe(_o,pn),pn|=c}else p!==null?(c=p.baseLanes|a,s.memoizedState=null):c=a,Qe(_o,pn),pn|=c;return Wt(n,s,d,a),s.child}function Jm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Zh(n,s,a,c,d){var p=Xt(a)?ts:Lt.current;return p=ao(s,p),po(s,d),a=$h(n,s,a,c,p,d),c=qh(),n!==null&&!Jt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,br(n,s,d)):(tt&&c&&Rh(s),s.flags|=1,Wt(n,s,a,d),s.child)}function Ym(n,s,a,c,d){if(Xt(a)){var p=!0;ou(s)}else p=!1;if(po(s,d),s.stateNode===null)Su(n,s),jm(s,a,c),Xh(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,S=s.memoizedProps;w.props=S;var P=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=wn($):($=Xt(a)?ts:Lt.current,$=ao(s,$));var Y=a.getDerivedStateFromProps,ee=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==c||P!==$)&&zm(s,w,c,$),pi=!1;var J=s.memoizedState;w.state=J,mu(s,c,w,d),P=s.memoizedState,S!==c||J!==P||Qt.current||pi?(typeof Y=="function"&&(Qh(s,a,Y,c),P=s.memoizedState),(S=pi||Um(s,a,S,c,J,P,$))?(ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=P),w.props=c,w.state=P,w.context=$,c=S):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,pm(n,s),S=s.memoizedProps,$=s.type===s.elementType?S:bn(s.type,S),w.props=$,ee=s.pendingProps,J=w.context,P=a.contextType,typeof P=="object"&&P!==null?P=wn(P):(P=Xt(a)?ts:Lt.current,P=ao(s,P));var oe=a.getDerivedStateFromProps;(Y=typeof oe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==ee||J!==P)&&zm(s,w,c,P),pi=!1,J=s.memoizedState,w.state=J,mu(s,c,w,d);var he=s.memoizedState;S!==ee||J!==he||Qt.current||pi?(typeof oe=="function"&&(Qh(s,a,oe,c),he=s.memoizedState),($=pi||Um(s,a,$,c,J,he,P)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,he,P),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,he,P)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||S===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=he),w.props=c,w.state=he,w.context=P,c=$):(typeof w.componentDidUpdate!="function"||S===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),c=!1)}return ed(n,s,a,c,p,d)}function ed(n,s,a,c,d,p){Jm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&rm(s,a,!1),br(n,s,p);c=s.stateNode,N0.current=s;var S=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=ho(s,n.child,null,p),s.child=ho(s,null,S,p)):Wt(n,s,S,p),s.memoizedState=c.state,d&&rm(s,a,!0),s.child}function Zm(n){var s=n.stateNode;s.pendingContext?tm(n,s.pendingContext,s.pendingContext!==s.context):s.context&&tm(n,s.context,!1),Mh(n,s.containerInfo)}function eg(n,s,a,c,d){return co(),xh(d),s.flags|=256,Wt(n,s,a,c),s.child}var td={dehydrated:null,treeContext:null,retryLane:0};function nd(n){return{baseLanes:n,cachePool:null,transitions:null}}function tg(n,s,a){var c=s.pendingProps,d=nt.current,p=!1,w=(s.flags&128)!==0,S;if((S=w)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(p=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Qe(nt,d&1),n===null)return Ph(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=s.mode,p=s.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=Lu(w,c,0,null),n=hs(n,c,a,null),p.return=s,n.return=s,p.sibling=n,s.child=p,s.child.memoizedState=nd(a),s.memoizedState=td,n):rd(s,w));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return b0(n,s,w,c,S,d,a);if(p){p=c.fallback,w=s.mode,d=n.child,S=d.sibling;var P={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=P,s.deletions=null):(c=Ei(d,P),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?p=Ei(S,p):(p=hs(p,w,a,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,w=n.child.memoizedState,w=w===null?nd(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,s.memoizedState=td,c}return p=n.child,n=p.sibling,c=Ei(p,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function rd(n,s){return s=Lu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Iu(n,s,a,c){return c!==null&&xh(c),ho(s,n.child,null,a),n=rd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function b0(n,s,a,c,d,p,w){if(a)return s.flags&256?(s.flags&=-257,c=Jh(Error(t(422))),Iu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(p=c.fallback,d=s.mode,c=Lu({mode:"visible",children:c.children},d,0,null),p=hs(p,d,w,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,(s.mode&1)!==0&&ho(s,n.child,null,w),s.child.memoizedState=nd(w),s.memoizedState=td,p);if((s.mode&1)===0)return Iu(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,p=Error(t(419)),c=Jh(p,c,void 0),Iu(n,s,w,c)}if(S=(w&n.childLanes)!==0,Jt||S){if(c=At,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,xr(n,d),Vn(c,n,d,-1))}return vd(),c=Jh(Error(t(421))),Iu(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=H0.bind(null,n),d._reactRetry=s,null):(n=p.treeContext,fn=ci(d.nextSibling),dn=s,tt=!0,Nn=null,n!==null&&(_n[vn++]=kr,_n[vn++]=Pr,_n[vn++]=ns,kr=n.id,Pr=n.overflow,ns=s),s=rd(s,c.children),s.flags|=4096,s)}function ng(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Oh(n.return,s,a)}function id(n,s,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function rg(n,s,a){var c=s.pendingProps,d=c.revealOrder,p=c.tail;if(Wt(n,s,c.children,a),c=nt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ng(n,a,s);else if(n.tag===19)ng(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Qe(nt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&gu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),id(s,!1,d,a,p);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&gu(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}id(s,!0,a,null,p);break;case"together":id(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Su(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function br(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),as|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=Ei(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=Ei(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function D0(n,s,a){switch(s.tag){case 3:Zm(s),co();break;case 5:ym(s);break;case 1:Xt(s.type)&&ou(s);break;case 4:Mh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Qe(du,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Qe(nt,nt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?tg(n,s,a):(Qe(nt,nt.current&1),n=br(n,s,a),n!==null?n.sibling:null);Qe(nt,nt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return rg(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(nt,nt.current),c)break;return null;case 22:case 23:return s.lanes=0,Xm(n,s,a)}return br(n,s,a)}var ig,sd,sg,og;ig=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},sd=function(){},sg=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,ss(ir.current);var p=null;switch(a){case"input":d=Ds(n,d),c=Ds(n,c),p=[];break;case"select":d=ae({},d,{value:void 0}),c=ae({},c,{value:void 0}),p=[];break;case"textarea":d=Qo(n,d),c=Qo(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=ru)}Cn(a,c);var w;a=null;for($ in d)if(!c.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var S=d[$];for(w in S)S.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?p||(p=[]):(p=p||[]).push($,null));for($ in c){var P=c[$];if(S=d?.[$],c.hasOwnProperty($)&&P!==S&&(P!=null||S!=null))if($==="style")if(S){for(w in S)!S.hasOwnProperty(w)||P&&P.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in P)P.hasOwnProperty(w)&&S[w]!==P[w]&&(a||(a={}),a[w]=P[w])}else a||(p||(p=[]),p.push($,a)),a=P;else $==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,S=S?S.__html:void 0,P!=null&&S!==P&&(p=p||[]).push($,P)):$==="children"?typeof P!="string"&&typeof P!="number"||(p=p||[]).push($,""+P):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(P!=null&&$==="onScroll"&&Ze("scroll",n),p||S===P||(p=[])):(p=p||[]).push($,P))}a&&(p=p||[]).push("style",a);var $=p;(s.updateQueue=$)&&(s.flags|=4)}},og=function(n,s,a,c){a!==c&&(s.flags|=4)};function Va(n,s){if(!tt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ft(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function O0(n,s,a){var c=s.pendingProps;switch(Ch(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(s),null;case 1:return Xt(s.type)&&su(),Ft(s),null;case 3:return c=s.stateNode,mo(),et(Qt),et(Lt),jh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(cu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Nn!==null&&(gd(Nn),Nn=null))),sd(n,s),Ft(s),null;case 5:Fh(s);var d=ss(xa.current);if(a=s.type,n!==null&&s.stateNode!=null)sg(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Ft(s),null}if(n=ss(ir.current),cu(s)){c=s.stateNode,a=s.type;var p=s.memoizedProps;switch(c[rr]=s,c[Aa]=p,n=(s.mode&1)!==0,a){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(d=0;d<Ta.length;d++)Ze(Ta[d],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":kl(c,p),Ze("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ze("invalid",c);break;case"textarea":Xo(c,p),Ze("invalid",c)}Cn(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var S=p[w];w==="children"?typeof S=="string"?c.textContent!==S&&(p.suppressHydrationWarning!==!0&&nu(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&nu(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(w)&&S!=null&&w==="onScroll"&&Ze("scroll",c)}switch(a){case"input":bs(c),Go(c,p,!0);break;case"textarea":bs(c),Gr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=ru)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Jo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[rr]=s,n[Aa]=c,ig(n,s,!1,!1),s.stateNode=n;e:{switch(w=Ms(a,c),a){case"dialog":Ze("cancel",n),Ze("close",n),d=c;break;case"iframe":case"object":case"embed":Ze("load",n),d=c;break;case"video":case"audio":for(d=0;d<Ta.length;d++)Ze(Ta[d],n);d=c;break;case"source":Ze("error",n),d=c;break;case"img":case"image":case"link":Ze("error",n),Ze("load",n),d=c;break;case"details":Ze("toggle",n),d=c;break;case"input":kl(n,c),d=Ds(n,c),Ze("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ae({},c,{value:void 0}),Ze("invalid",n);break;case"textarea":Xo(n,c),d=Qo(n,c),Ze("invalid",n);break;default:d=c}Cn(a,d),S=d;for(p in S)if(S.hasOwnProperty(p)){var P=S[p];p==="style"?Ls(n,P):p==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&xl(n,P)):p==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&ji(n,P):typeof P=="number"&&ji(n,""+P):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?P!=null&&p==="onScroll"&&Ze("scroll",n):P!=null&&W(n,p,P,w))}switch(a){case"input":bs(n),Go(n,c,!1);break;case"textarea":bs(n),Gr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?Rn(n,!!c.multiple,p,!1):c.defaultValue!=null&&Rn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=ru)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ft(s),null;case 6:if(n&&s.stateNode!=null)og(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=ss(xa.current),ss(ir.current),cu(s)){if(c=s.stateNode,a=s.memoizedProps,c[rr]=s,(p=c.nodeValue!==a)&&(n=dn,n!==null))switch(n.tag){case 3:nu(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nu(c.nodeValue,a,(n.mode&1)!==0)}p&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[rr]=s,s.stateNode=c}return Ft(s),null;case 13:if(et(nt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&fn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)um(),co(),s.flags|=98560,p=!1;else if(p=cu(s),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[rr]=s}else co(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ft(s),p=!1}else Nn!==null&&(gd(Nn),Nn=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(nt.current&1)!==0?Et===0&&(Et=3):vd())),s.updateQueue!==null&&(s.flags|=4),Ft(s),null);case 4:return mo(),sd(n,s),n===null&&Ia(s.stateNode.containerInfo),Ft(s),null;case 10:return Dh(s.type._context),Ft(s),null;case 17:return Xt(s.type)&&su(),Ft(s),null;case 19:if(et(nt),p=s.memoizedState,p===null)return Ft(s),null;if(c=(s.flags&128)!==0,w=p.rendering,w===null)if(c)Va(p,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=gu(n),w!==null){for(s.flags|=128,Va(p,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(nt,nt.current&1|2),s.child}n=n.sibling}p.tail!==null&&Ye()>vo&&(s.flags|=128,c=!0,Va(p,!1),s.lanes=4194304)}else{if(!c)if(n=gu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Va(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!tt)return Ft(s),null}else 2*Ye()-p.renderingStartTime>vo&&a!==1073741824&&(s.flags|=128,c=!0,Va(p,!1),s.lanes=4194304);p.isBackwards?(w.sibling=s.child,s.child=w):(a=p.last,a!==null?a.sibling=w:s.child=w,p.last=w)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=Ye(),s.sibling=null,a=nt.current,Qe(nt,c?a&1|2:a&1),s):(Ft(s),null);case 22:case 23:return _d(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(pn&1073741824)!==0&&(Ft(s),s.subtreeFlags&6&&(s.flags|=8192)):Ft(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function V0(n,s){switch(Ch(s),s.tag){case 1:return Xt(s.type)&&su(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return mo(),et(Qt),et(Lt),jh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Fh(s),null;case 13:if(et(nt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));co()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return et(nt),null;case 4:return mo(),null;case 10:return Dh(s.type._context),null;case 22:case 23:return _d(),null;case 24:return null;default:return null}}var Au=!1,Ut=!1,L0=typeof WeakSet=="function"?WeakSet:Set,ce=null;function yo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){at(n,s,c)}else a.current=null}function od(n,s,a){try{a()}catch(c){at(n,s,c)}}var ag=!1;function M0(n,s){if(_h=Ir,n=Up(),ch(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,S=-1,P=-1,$=0,Y=0,ee=n,J=null;t:for(;;){for(var oe;ee!==a||d!==0&&ee.nodeType!==3||(S=w+d),ee!==p||c!==0&&ee.nodeType!==3||(P=w+c),ee.nodeType===3&&(w+=ee.nodeValue.length),(oe=ee.firstChild)!==null;)J=ee,ee=oe;for(;;){if(ee===n)break t;if(J===a&&++$===d&&(S=w),J===p&&++Y===c&&(P=w),(oe=ee.nextSibling)!==null)break;ee=J,J=ee.parentNode}ee=oe}a=S===-1||P===-1?null:{start:S,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(vh={focusedElem:n,selectionRange:a},Ir=!1,ce=s;ce!==null;)if(s=ce,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ce=n;else for(;ce!==null;){s=ce;try{var he=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var fe=he.memoizedProps,ht=he.memoizedState,F=s.stateNode,N=F.getSnapshotBeforeUpdate(s.elementType===s.type?fe:bn(s.type,fe),ht);F.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var B=s.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){at(s,s.return,ne)}if(n=s.sibling,n!==null){n.return=s.return,ce=n;break}ce=s.return}return he=ag,ag=!1,he}function La(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&od(s,a,p)}d=d.next}while(d!==c)}}function Ru(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function ad(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function lg(n){var s=n.alternate;s!==null&&(n.alternate=null,lg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[rr],delete s[Aa],delete s[Ih],delete s[v0],delete s[w0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ug(n){return n.tag===5||n.tag===3||n.tag===4}function cg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ug(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ld(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ru));else if(c!==4&&(n=n.child,n!==null))for(ld(n,s,a),n=n.sibling;n!==null;)ld(n,s,a),n=n.sibling}function ud(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(ud(n,s,a),n=n.sibling;n!==null;)ud(n,s,a),n=n.sibling}var bt=null,Dn=!1;function gi(n,s,a){for(a=a.child;a!==null;)hg(n,s,a),a=a.sibling}function hg(n,s,a){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Hi,a)}catch{}switch(a.tag){case 5:Ut||yo(a,s);case 6:var c=bt,d=Dn;bt=null,gi(n,s,a),bt=c,Dn=d,bt!==null&&(Dn?(n=bt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):bt.removeChild(a.stateNode));break;case 18:bt!==null&&(Dn?(n=bt,a=a.stateNode,n.nodeType===8?Th(n.parentNode,a):n.nodeType===1&&Th(n,a),oi(n)):Th(bt,a.stateNode));break;case 4:c=bt,d=Dn,bt=a.stateNode.containerInfo,Dn=!0,gi(n,s,a),bt=c,Dn=d;break;case 0:case 11:case 14:case 15:if(!Ut&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&od(a,s,w),d=d.next}while(d!==c)}gi(n,s,a);break;case 1:if(!Ut&&(yo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){at(a,s,S)}gi(n,s,a);break;case 21:gi(n,s,a);break;case 22:a.mode&1?(Ut=(c=Ut)||a.memoizedState!==null,gi(n,s,a),Ut=c):gi(n,s,a);break;default:gi(n,s,a)}}function dg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new L0),s.forEach(function(c){var d=W0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function On(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=s,S=w;e:for(;S!==null;){switch(S.tag){case 5:bt=S.stateNode,Dn=!1;break e;case 3:bt=S.stateNode.containerInfo,Dn=!0;break e;case 4:bt=S.stateNode.containerInfo,Dn=!0;break e}S=S.return}if(bt===null)throw Error(t(160));hg(p,w,d),bt=null,Dn=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch($){at(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)fg(s,n),s=s.sibling}function fg(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(On(s,n),or(n),c&4){try{La(3,n,n.return),Ru(3,n)}catch(fe){at(n,n.return,fe)}try{La(5,n,n.return)}catch(fe){at(n,n.return,fe)}}break;case 1:On(s,n),or(n),c&512&&a!==null&&yo(a,a.return);break;case 5:if(On(s,n),or(n),c&512&&a!==null&&yo(a,a.return),n.flags&32){var d=n.stateNode;try{ji(d,"")}catch(fe){at(n,n.return,fe)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,S=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&Os(d,p),Ms(S,w);var $=Ms(S,p);for(w=0;w<P.length;w+=2){var Y=P[w],ee=P[w+1];Y==="style"?Ls(d,ee):Y==="dangerouslySetInnerHTML"?xl(d,ee):Y==="children"?ji(d,ee):W(d,Y,ee,$)}switch(S){case"input":Ui(d,p);break;case"textarea":Pl(d,p);break;case"select":var J=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var oe=p.value;oe!=null?Rn(d,!!p.multiple,oe,!1):J!==!!p.multiple&&(p.defaultValue!=null?Rn(d,!!p.multiple,p.defaultValue,!0):Rn(d,!!p.multiple,p.multiple?[]:"",!1))}d[Aa]=p}catch(fe){at(n,n.return,fe)}}break;case 6:if(On(s,n),or(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(fe){at(n,n.return,fe)}}break;case 3:if(On(s,n),or(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{oi(s.containerInfo)}catch(fe){at(n,n.return,fe)}break;case 4:On(s,n),or(n);break;case 13:On(s,n),or(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(dd=Ye())),c&4&&dg(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(Ut=($=Ut)||Y,On(s,n),Ut=$):On(s,n),or(n),c&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!Y&&(n.mode&1)!==0)for(ce=n,Y=n.child;Y!==null;){for(ee=ce=Y;ce!==null;){switch(J=ce,oe=J.child,J.tag){case 0:case 11:case 14:case 15:La(4,J,J.return);break;case 1:yo(J,J.return);var he=J.stateNode;if(typeof he.componentWillUnmount=="function"){c=J,a=J.return;try{s=c,he.props=s.memoizedProps,he.state=s.memoizedState,he.componentWillUnmount()}catch(fe){at(c,a,fe)}}break;case 5:yo(J,J.return);break;case 22:if(J.memoizedState!==null){gg(ee);continue}}oe!==null?(oe.return=J,ce=oe):gg(ee)}Y=Y.sibling}e:for(Y=null,ee=n;;){if(ee.tag===5){if(Y===null){Y=ee;try{d=ee.stateNode,$?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=ee.stateNode,P=ee.memoizedProps.style,w=P!=null&&P.hasOwnProperty("display")?P.display:null,S.style.display=Jr("display",w))}catch(fe){at(n,n.return,fe)}}}else if(ee.tag===6){if(Y===null)try{ee.stateNode.nodeValue=$?"":ee.memoizedProps}catch(fe){at(n,n.return,fe)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===n)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===n)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===n)break e;Y===ee&&(Y=null),ee=ee.return}Y===ee&&(Y=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:On(s,n),or(n),c&4&&dg(n);break;case 21:break;default:On(s,n),or(n)}}function or(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(ug(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(ji(d,""),c.flags&=-33);var p=cg(n);ud(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,S=cg(n);ld(n,S,w);break;default:throw Error(t(161))}}catch(P){at(n,n.return,P)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function F0(n,s,a){ce=n,pg(n)}function pg(n,s,a){for(var c=(n.mode&1)!==0;ce!==null;){var d=ce,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Au;if(!w){var S=d.alternate,P=S!==null&&S.memoizedState!==null||Ut;S=Au;var $=Ut;if(Au=w,(Ut=P)&&!$)for(ce=d;ce!==null;)w=ce,P=w.child,w.tag===22&&w.memoizedState!==null?yg(d):P!==null?(P.return=w,ce=P):yg(d);for(;p!==null;)ce=p,pg(p),p=p.sibling;ce=d,Au=S,Ut=$}mg(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,ce=p):mg(n)}}function mg(n){for(;ce!==null;){var s=ce;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ut||Ru(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Ut)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:bn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&gm(s,p,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}gm(s,w,a)}break;case 5:var S=s.stateNode;if(a===null&&s.flags&4){a=S;var P=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var Y=$.memoizedState;if(Y!==null){var ee=Y.dehydrated;ee!==null&&oi(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ut||s.flags&512&&ad(s)}catch(J){at(s,s.return,J)}}if(s===n){ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,ce=a;break}ce=s.return}}function gg(n){for(;ce!==null;){var s=ce;if(s===n){ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ce=a;break}ce=s.return}}function yg(n){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Ru(4,s)}catch(P){at(s,a,P)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(P){at(s,d,P)}}var p=s.return;try{ad(s)}catch(P){at(s,p,P)}break;case 5:var w=s.return;try{ad(s)}catch(P){at(s,w,P)}}}catch(P){at(s,s.return,P)}if(s===n){ce=null;break}var S=s.sibling;if(S!==null){S.return=s.return,ce=S;break}ce=s.return}}var U0=Math.ceil,Cu=te.ReactCurrentDispatcher,cd=te.ReactCurrentOwner,Tn=te.ReactCurrentBatchConfig,Ue=0,At=null,mt=null,Dt=0,pn=0,_o=hi(0),Et=0,Ma=null,as=0,ku=0,hd=0,Fa=null,Yt=null,dd=0,vo=1/0,Dr=null,Pu=!1,fd=null,yi=null,xu=!1,_i=null,Nu=0,Ua=0,pd=null,bu=-1,Du=0;function Kt(){return(Ue&6)!==0?Ye():bu!==-1?bu:bu=Ye()}function vi(n){return(n.mode&1)===0?1:(Ue&2)!==0&&Dt!==0?Dt&-Dt:T0.transition!==null?(Du===0&&(Du=oa()),Du):(n=Ve,n!==0||(n=window.event,n=n===void 0?16:Ks(n.type)),n)}function Vn(n,s,a,c){if(50<Ua)throw Ua=0,pd=null,Error(t(185));Qi(n,a,c),((Ue&2)===0||n!==At)&&(n===At&&((Ue&2)===0&&(ku|=a),Et===4&&wi(n,Dt)),Zt(n,c),a===1&&Ue===0&&(s.mode&1)===0&&(vo=Ye()+500,au&&fi()))}function Zt(n,s){var a=n.callbackNode;Gi(n,s);var c=wr(n,n===At?Dt:0);if(c===0)a!==null&&js(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&js(a),s===1)n.tag===0?E0(vg.bind(null,n)):im(vg.bind(null,n)),y0(function(){(Ue&6)===0&&fi()}),a=null;else{switch(Kn(c)){case 1:a=zs;break;case 4:a=ra;break;case 16:a=qi;break;case 536870912:a=Bs;break;default:a=qi}a=Cg(a,_g.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function _g(n,s){if(bu=-1,Du=0,(Ue&6)!==0)throw Error(t(327));var a=n.callbackNode;if(wo()&&n.callbackNode!==a)return null;var c=wr(n,n===At?Dt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=Ou(n,c);else{s=c;var d=Ue;Ue|=2;var p=Eg();(At!==n||Dt!==s)&&(Dr=null,vo=Ye()+500,us(n,s));do try{B0();break}catch(S){wg(n,S)}while(!0);bh(),Cu.current=p,Ue=d,mt!==null?s=0:(At=null,Dt=0,s=Et)}if(s!==0){if(s===2&&(d=sa(n),d!==0&&(c=d,s=md(n,d))),s===1)throw a=Ma,us(n,0),wi(n,c),Zt(n,Ye()),a;if(s===6)wi(n,c);else{if(d=n.current.alternate,(c&30)===0&&!j0(d)&&(s=Ou(n,c),s===2&&(p=sa(n),p!==0&&(c=p,s=md(n,p))),s===1))throw a=Ma,us(n,0),wi(n,c),Zt(n,Ye()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:cs(n,Yt,Dr);break;case 3:if(wi(n,c),(c&130023424)===c&&(s=dd+500-Ye(),10<s)){if(wr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Kt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Eh(cs.bind(null,n,Yt,Dr),s);break}cs(n,Yt,Dr);break;case 4:if(wi(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-an(c);p=1<<w,w=s[w],w>d&&(d=w),c&=~p}if(c=d,c=Ye()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*U0(c/1960))-c,10<c){n.timeoutHandle=Eh(cs.bind(null,n,Yt,Dr),c);break}cs(n,Yt,Dr);break;case 5:cs(n,Yt,Dr);break;default:throw Error(t(329))}}}return Zt(n,Ye()),n.callbackNode===a?_g.bind(null,n):null}function md(n,s){var a=Fa;return n.current.memoizedState.isDehydrated&&(us(n,s).flags|=256),n=Ou(n,s),n!==2&&(s=Yt,Yt=a,s!==null&&gd(s)),n}function gd(n){Yt===null?Yt=n:Yt.push.apply(Yt,n)}function j0(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!xn(p(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function wi(n,s){for(s&=~hd,s&=~ku,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-an(s),c=1<<a;n[a]=-1,s&=~c}}function vg(n){if((Ue&6)!==0)throw Error(t(327));wo();var s=wr(n,0);if((s&1)===0)return Zt(n,Ye()),null;var a=Ou(n,s);if(n.tag!==0&&a===2){var c=sa(n);c!==0&&(s=c,a=md(n,c))}if(a===1)throw a=Ma,us(n,0),wi(n,s),Zt(n,Ye()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,cs(n,Yt,Dr),Zt(n,Ye()),null}function yd(n,s){var a=Ue;Ue|=1;try{return n(s)}finally{Ue=a,Ue===0&&(vo=Ye()+500,au&&fi())}}function ls(n){_i!==null&&_i.tag===0&&(Ue&6)===0&&wo();var s=Ue;Ue|=1;var a=Tn.transition,c=Ve;try{if(Tn.transition=null,Ve=1,n)return n()}finally{Ve=c,Tn.transition=a,Ue=s,(Ue&6)===0&&fi()}}function _d(){pn=_o.current,et(_o)}function us(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,g0(a)),mt!==null)for(a=mt.return;a!==null;){var c=a;switch(Ch(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&su();break;case 3:mo(),et(Qt),et(Lt),jh();break;case 5:Fh(c);break;case 4:mo();break;case 13:et(nt);break;case 19:et(nt);break;case 10:Dh(c.type._context);break;case 22:case 23:_d()}a=a.return}if(At=n,mt=n=Ei(n.current,null),Dt=pn=s,Et=0,Ma=null,hd=ku=as=0,Yt=Fa=null,is!==null){for(s=0;s<is.length;s++)if(a=is[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}is=null}return n}function wg(n,s){do{var a=mt;try{if(bh(),yu.current=Eu,_u){for(var c=rt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}_u=!1}if(os=0,St=wt=rt=null,Na=!1,ba=0,cd.current=null,a===null||a.return===null){Et=1,Ma=s,mt=null;break}e:{var p=n,w=a.return,S=a,P=s;if(s=Dt,S.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var $=P,Y=S,ee=Y.tag;if((Y.mode&1)===0&&(ee===0||ee===11||ee===15)){var J=Y.alternate;J?(Y.updateQueue=J.updateQueue,Y.memoizedState=J.memoizedState,Y.lanes=J.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var oe=Hm(w);if(oe!==null){oe.flags&=-257,Wm(oe,w,S,p,s),oe.mode&1&&qm(p,$,s),s=oe,P=$;var he=s.updateQueue;if(he===null){var fe=new Set;fe.add(P),s.updateQueue=fe}else he.add(P);break e}else{if((s&1)===0){qm(p,$,s),vd();break e}P=Error(t(426))}}else if(tt&&S.mode&1){var ht=Hm(w);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),Wm(ht,w,S,p,s),xh(go(P,S));break e}}p=P=go(P,S),Et!==4&&(Et=2),Fa===null?Fa=[p]:Fa.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var F=Bm(p,P,s);mm(p,F);break e;case 1:S=P;var N=p.type,B=p.stateNode;if((p.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(yi===null||!yi.has(B)))){p.flags|=65536,s&=-s,p.lanes|=s;var ne=$m(p,S,s);mm(p,ne);break e}}p=p.return}while(p!==null)}Ig(a)}catch(pe){s=pe,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function Eg(){var n=Cu.current;return Cu.current=Eu,n===null?Eu:n}function vd(){(Et===0||Et===3||Et===2)&&(Et=4),At===null||(as&268435455)===0&&(ku&268435455)===0||wi(At,Dt)}function Ou(n,s){var a=Ue;Ue|=2;var c=Eg();(At!==n||Dt!==s)&&(Dr=null,us(n,s));do try{z0();break}catch(d){wg(n,d)}while(!0);if(bh(),Ue=a,Cu.current=c,mt!==null)throw Error(t(261));return At=null,Dt=0,Et}function z0(){for(;mt!==null;)Tg(mt)}function B0(){for(;mt!==null&&!$i();)Tg(mt)}function Tg(n){var s=Rg(n.alternate,n,pn);n.memoizedProps=n.pendingProps,s===null?Ig(n):mt=s,cd.current=null}function Ig(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=O0(a,s,pn),a!==null){mt=a;return}}else{if(a=V0(a,s),a!==null){a.flags&=32767,mt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Et=6,mt=null;return}}if(s=s.sibling,s!==null){mt=s;return}mt=s=n}while(s!==null);Et===0&&(Et=5)}function cs(n,s,a){var c=Ve,d=Tn.transition;try{Tn.transition=null,Ve=1,$0(n,s,a,c)}finally{Tn.transition=d,Ve=c}return null}function $0(n,s,a,c){do wo();while(_i!==null);if((Ue&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(sh(n,p),n===At&&(mt=At=null,Dt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||xu||(xu=!0,Cg(qi,function(){return wo(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Tn.transition,Tn.transition=null;var w=Ve;Ve=1;var S=Ue;Ue|=4,cd.current=null,M0(n,a),fg(a,n),u0(vh),Ir=!!_h,vh=_h=null,n.current=a,F0(a),vr(),Ue=S,Ve=w,Tn.transition=p}else n.current=a;if(xu&&(xu=!1,_i=n,Nu=d),p=n.pendingLanes,p===0&&(yi=null),zl(a.stateNode),Zt(n,Ye()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(Pu)throw Pu=!1,n=fd,fd=null,n;return(Nu&1)!==0&&n.tag!==0&&wo(),p=n.pendingLanes,(p&1)!==0?n===pd?Ua++:(Ua=0,pd=n):Ua=0,fi(),null}function wo(){if(_i!==null){var n=Kn(Nu),s=Tn.transition,a=Ve;try{if(Tn.transition=null,Ve=16>n?16:n,_i===null)var c=!1;else{if(n=_i,_i=null,Nu=0,(Ue&6)!==0)throw Error(t(331));var d=Ue;for(Ue|=4,ce=n.current;ce!==null;){var p=ce,w=p.child;if((ce.flags&16)!==0){var S=p.deletions;if(S!==null){for(var P=0;P<S.length;P++){var $=S[P];for(ce=$;ce!==null;){var Y=ce;switch(Y.tag){case 0:case 11:case 15:La(8,Y,p)}var ee=Y.child;if(ee!==null)ee.return=Y,ce=ee;else for(;ce!==null;){Y=ce;var J=Y.sibling,oe=Y.return;if(lg(Y),Y===$){ce=null;break}if(J!==null){J.return=oe,ce=J;break}ce=oe}}}var he=p.alternate;if(he!==null){var fe=he.child;if(fe!==null){he.child=null;do{var ht=fe.sibling;fe.sibling=null,fe=ht}while(fe!==null)}}ce=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,ce=w;else e:for(;ce!==null;){if(p=ce,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:La(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,ce=F;break e}ce=p.return}}var N=n.current;for(ce=N;ce!==null;){w=ce;var B=w.child;if((w.subtreeFlags&2064)!==0&&B!==null)B.return=w,ce=B;else e:for(w=N;ce!==null;){if(S=ce,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Ru(9,S)}}catch(pe){at(S,S.return,pe)}if(S===w){ce=null;break e}var ne=S.sibling;if(ne!==null){ne.return=S.return,ce=ne;break e}ce=S.return}}if(Ue=d,fi(),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Hi,n)}catch{}c=!0}return c}finally{Ve=a,Tn.transition=s}}return!1}function Sg(n,s,a){s=go(a,s),s=Bm(n,s,1),n=mi(n,s,1),s=Kt(),n!==null&&(Qi(n,1,s),Zt(n,s))}function at(n,s,a){if(n.tag===3)Sg(n,n,a);else for(;s!==null;){if(s.tag===3){Sg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(yi===null||!yi.has(c))){n=go(a,n),n=$m(s,n,1),s=mi(s,n,1),n=Kt(),s!==null&&(Qi(s,1,n),Zt(s,n));break}}s=s.return}}function q0(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=Kt(),n.pingedLanes|=n.suspendedLanes&a,At===n&&(Dt&a)===a&&(Et===4||Et===3&&(Dt&130023424)===Dt&&500>Ye()-dd?us(n,0):hd|=a),Zt(n,s)}function Ag(n,s){s===0&&((n.mode&1)===0?s=1:(s=ri,ri<<=1,(ri&130023424)===0&&(ri=4194304)));var a=Kt();n=xr(n,s),n!==null&&(Qi(n,s,a),Zt(n,a))}function H0(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Ag(n,a)}function W0(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),Ag(n,a)}var Rg;Rg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Qt.current)Jt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Jt=!1,D0(n,s,a);Jt=(n.flags&131072)!==0}else Jt=!1,tt&&(s.flags&1048576)!==0&&sm(s,uu,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Su(n,s),n=s.pendingProps;var d=ao(s,Lt.current);po(s,a),d=$h(null,s,c,n,d,a);var p=qh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Xt(c)?(p=!0,ou(s)):p=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Lh(s),d.updater=Tu,s.stateNode=d,d._reactInternals=s,Xh(s,c,n,a),s=ed(null,s,c,!0,p,a)):(s.tag=0,tt&&p&&Rh(s),Wt(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Su(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=G0(c),n=bn(c,n),d){case 0:s=Zh(null,s,c,n,a);break e;case 1:s=Ym(null,s,c,n,a);break e;case 11:s=Km(null,s,c,n,a);break e;case 14:s=Gm(null,s,c,bn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:bn(c,d),Zh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:bn(c,d),Ym(n,s,c,d,a);case 3:e:{if(Zm(s),n===null)throw Error(t(387));c=s.pendingProps,p=s.memoizedState,d=p.element,pm(n,s),mu(s,c,null,a);var w=s.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){d=go(Error(t(423)),s),s=eg(n,s,c,a,d);break e}else if(c!==d){d=go(Error(t(424)),s),s=eg(n,s,c,a,d);break e}else for(fn=ci(s.stateNode.containerInfo.firstChild),dn=s,tt=!0,Nn=null,a=dm(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(co(),c===d){s=br(n,s,a);break e}Wt(n,s,c,a)}s=s.child}return s;case 5:return ym(s),n===null&&Ph(s),c=s.type,d=s.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,wh(c,d)?w=null:p!==null&&wh(c,p)&&(s.flags|=32),Jm(n,s),Wt(n,s,w,a),s.child;case 6:return n===null&&Ph(s),null;case 13:return tg(n,s,a);case 4:return Mh(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=ho(s,null,c,a):Wt(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:bn(c,d),Km(n,s,c,d,a);case 7:return Wt(n,s,s.pendingProps,a),s.child;case 8:return Wt(n,s,s.pendingProps.children,a),s.child;case 12:return Wt(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,p=s.memoizedProps,w=d.value,Qe(du,c._currentValue),c._currentValue=w,p!==null)if(xn(p.value,w)){if(p.children===d.children&&!Qt.current){s=br(n,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var S=p.dependencies;if(S!==null){w=p.child;for(var P=S.firstContext;P!==null;){if(P.context===c){if(p.tag===1){P=Nr(-1,a&-a),P.tag=2;var $=p.updateQueue;if($!==null){$=$.shared;var Y=$.pending;Y===null?P.next=P:(P.next=Y.next,Y.next=P),$.pending=P}}p.lanes|=a,P=p.alternate,P!==null&&(P.lanes|=a),Oh(p.return,a,s),S.lanes|=a;break}P=P.next}}else if(p.tag===10)w=p.type===s.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,S=w.alternate,S!==null&&(S.lanes|=a),Oh(w,a,s),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===s){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Wt(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,po(s,a),d=wn(d),c=c(d),s.flags|=1,Wt(n,s,c,a),s.child;case 14:return c=s.type,d=bn(c,s.pendingProps),d=bn(c.type,d),Gm(n,s,c,d,a);case 15:return Qm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:bn(c,d),Su(n,s),s.tag=1,Xt(c)?(n=!0,ou(s)):n=!1,po(s,a),jm(s,c,d),Xh(s,c,d,a),ed(null,s,c,!0,n,a);case 19:return rg(n,s,a);case 22:return Xm(n,s,a)}throw Error(t(156,s.tag))};function Cg(n,s){return na(n,s)}function K0(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(n,s,a,c){return new K0(n,s,a,c)}function wd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function G0(n){if(typeof n=="function")return wd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===lt)return 14}return 2}function Ei(n,s){var a=n.alternate;return a===null?(a=In(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Vu(n,s,a,c,d,p){var w=2;if(c=n,typeof n=="function")wd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case k:return hs(a.children,d,p,s);case I:w=8,d|=8;break;case R:return n=In(12,a,s,d|2),n.elementType=R,n.lanes=p,n;case A:return n=In(13,a,s,d),n.elementType=A,n.lanes=p,n;case Le:return n=In(19,a,s,d),n.elementType=Le,n.lanes=p,n;case We:return Lu(a,d,p,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case b:w=10;break e;case x:w=9;break e;case M:w=11;break e;case lt:w=14;break e;case He:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=In(w,a,s,d),s.elementType=n,s.type=c,s.lanes=p,s}function hs(n,s,a,c){return n=In(7,n,c,s),n.lanes=a,n}function Lu(n,s,a,c){return n=In(22,n,c,s),n.elementType=We,n.lanes=a,n.stateNode={isHidden:!1},n}function Ed(n,s,a){return n=In(6,n,null,s),n.lanes=a,n}function Td(n,s,a){return s=In(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Q0(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aa(0),this.expirationTimes=aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Id(n,s,a,c,d,p,w,S,P){return n=new Q0(n,s,a,S,P),s===1?(s=1,p===!0&&(s|=8)):s=0,p=In(3,null,null,s),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lh(p),n}function X0(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function kg(n){if(!n)return di;n=n._reactInternals;e:{if(kn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Xt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Xt(a))return nm(n,a,s)}return s}function Pg(n,s,a,c,d,p,w,S,P){return n=Id(a,c,!0,n,d,p,w,S,P),n.context=kg(null),a=n.current,c=Kt(),d=vi(a),p=Nr(c,d),p.callback=s??null,mi(a,p,d),n.current.lanes=d,Qi(n,d,c),Zt(n,c),n}function Mu(n,s,a,c){var d=s.current,p=Kt(),w=vi(d);return a=kg(a),s.context===null?s.context=a:s.pendingContext=a,s=Nr(p,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=mi(d,s,w),n!==null&&(Vn(n,d,w,p),pu(n,d,w)),w}function Fu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Sd(n,s){xg(n,s),(n=n.alternate)&&xg(n,s)}function J0(){return null}var Ng=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ad(n){this._internalRoot=n}Uu.prototype.render=Ad.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Mu(n,s,null,null)},Uu.prototype.unmount=Ad.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ls(function(){Mu(null,n,null,null)}),s[Rr]=null}};function Uu(n){this._internalRoot=n}Uu.prototype.unstable_scheduleHydration=function(n){if(n){var s=ha();n={blockedOn:null,target:n,priority:s};for(var a=0;a<ln.length&&s!==0&&s<ln[a].priority;a++);ln.splice(a,0,n),a===0&&Hs(n)}};function Rd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ju(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bg(){}function Y0(n,s,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var $=Fu(w);p.call($)}}var w=Pg(s,c,n,0,null,!1,!1,"",bg);return n._reactRootContainer=w,n[Rr]=w.current,Ia(n.nodeType===8?n.parentNode:n),ls(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var $=Fu(P);S.call($)}}var P=Id(n,0,!1,null,null,!1,!1,"",bg);return n._reactRootContainer=P,n[Rr]=P.current,Ia(n.nodeType===8?n.parentNode:n),ls(function(){Mu(s,P,a,c)}),P}function zu(n,s,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var S=d;d=function(){var P=Fu(w);S.call(P)}}Mu(s,w,n,d)}else w=Y0(a,s,n,d,c);return Fu(w)}ua=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=ze(s.pendingLanes);a!==0&&(la(s,a|1),Zt(s,Ye()),(Ue&6)===0&&(vo=Ye()+500,fi()))}break;case 13:ls(function(){var c=xr(n,1);if(c!==null){var d=Kt();Vn(c,n,1,d)}}),Sd(n,1)}},$s=function(n){if(n.tag===13){var s=xr(n,134217728);if(s!==null){var a=Kt();Vn(s,n,134217728,a)}Sd(n,134217728)}},ca=function(n){if(n.tag===13){var s=vi(n),a=xr(n,s);if(a!==null){var c=Kt();Vn(a,n,s,c)}Sd(n,s)}},ha=function(){return Ve},da=function(n,s){var a=Ve;try{return Ve=n,s()}finally{Ve=a}},gr=function(n,s,a){switch(s){case"input":if(Ui(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=iu(c);if(!d)throw Error(t(90));Ko(c),Ui(c,d)}}}break;case"textarea":Pl(n,a);break;case"select":s=a.value,s!=null&&Rn(n,!!a.multiple,s,!1)}},bl=yd,Dl=ls;var Z0={usingClientEntryPoint:!1,Events:[Ra,so,iu,Zr,ei,yd]},ja={findFiberByHostInstance:es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eT={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=jl(n),n===null?null:n.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance||J0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{Hi=Bu.inject(eT),on=Bu}catch{}}return en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z0,en.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rd(s))throw Error(t(200));return X0(n,s,null,a)},en.createRoot=function(n,s){if(!Rd(n))throw Error(t(299));var a=!1,c="",d=Ng;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Id(n,1,!1,null,null,a,!1,c,d),n[Rr]=s.current,Ia(n.nodeType===8?n.parentNode:n),new Ad(s)},en.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=jl(s),n=n===null?null:n.stateNode,n},en.flushSync=function(n){return ls(n)},en.hydrate=function(n,s,a){if(!ju(s))throw Error(t(200));return zu(null,n,s,!0,a)},en.hydrateRoot=function(n,s,a){if(!Rd(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=Ng;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Pg(s,null,n,1,a??null,d,!1,p,w),n[Rr]=s.current,Ia(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Uu(s)},en.render=function(n,s,a){if(!ju(s))throw Error(t(200));return zu(null,n,s,!1,a)},en.unmountComponentAtNode=function(n){if(!ju(n))throw Error(t(40));return n._reactRootContainer?(ls(function(){zu(null,null,n,!1,function(){n._reactRootContainer=null,n[Rr]=null})}),!0):!1},en.unstable_batchedUpdates=yd,en.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!ju(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return zu(n,s,a,!1,c)},en.version="18.3.1-next-f1338f8080-20240426",en}var jg;function uT(){if(jg)return Pd.exports;jg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pd.exports=lT(),Pd.exports}var zg;function cT(){if(zg)return $u;zg=1;var r=uT();return $u.createRoot=r.createRoot,$u.hydrateRoot=r.hydrateRoot,$u}var hT=cT();const dT=O_(hT),fT="modulepreload",pT=function(r){return"/"+r},Bg={},Kd=function(e,t,i){let o=Promise.resolve();if(t&&t.length>0){let y=function(v){return Promise.all(v.map(E=>Promise.resolve(E).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};var h=y;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=f?.nonce||f?.getAttribute("nonce");o=y(t.map(v=>{if(v=pT(v),v in Bg)return;Bg[v]=!0;const E=v.endsWith(".css"),C=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${C}`))return;const z=document.createElement("link");if(z.rel=E?"stylesheet":fT,E||(z.as="script"),z.crossOrigin="",z.href=v,g&&z.setAttribute("nonce",g),document.head.appendChild(z),E)return new Promise((O,j)=>{z.addEventListener("load",O),z.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return o.then(f=>{for(const g of f||[])g.status==="rejected"&&l(g.reason);return e().catch(l)})},mT=()=>{};var $g={};const V_=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},gT=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},L_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let C=(f&15)<<2|y>>6,z=y&63;g||(z=64,h||(C=64)),i.push(t[v],t[E],t[C],t[z])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(V_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):gT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new yT;const C=l<<2|f>>4;if(i.push(C),y!==64){const z=f<<4&240|y>>2;if(i.push(z),E!==64){const O=y<<6&192|E;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class yT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _T=function(r){const e=V_(r);return L_.encodeByteArray(e,!0)},hc=function(r){return _T(r).replace(/\./g,"")},M_=function(r){try{return L_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const wT=()=>vT().__FIREBASE_DEFAULTS__,ET=()=>{if(typeof process>"u"||typeof $g>"u")return;const r=$g.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},TT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&M_(r[1]);return e&&JSON.parse(e)},Nc=()=>{try{return mT()||wT()||ET()||TT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},F_=r=>Nc()?.emulatorHosts?.[r],IT=r=>{const e=F_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},U_=()=>Nc()?.config,j_=r=>Nc()?.[`_${r}`];class ST{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Fo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function z_(r){return(await fetch(r,{credentials:"include"})).ok}function AT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[hc(JSON.stringify(t)),hc(JSON.stringify(h)),""].join(".")}const Qa={};function RT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Qa))Qa[e]?r.emulator.push(e):r.prod.push(e);return r}function CT(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let qg=!1;function B_(r,e){if(typeof window>"u"||typeof document>"u"||!Fo(window.location.host)||Qa[r]===e||Qa[r]||qg)return;Qa[r]=e;function t(C){return`__firebase__banner__${C}`}const i="__firebase__banner",l=RT().prod.length>0;function h(){const C=document.getElementById(i);C&&C.remove()}function f(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function g(C,z){C.setAttribute("width","24"),C.setAttribute("id",z),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function y(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{qg=!0,h()},C}function v(C,z){C.setAttribute("id",z),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=CT(i),z=t("text"),O=document.getElementById(z)||document.createElement("span"),j=t("learnmore"),L=document.getElementById(j)||document.createElement("a"),Z=t("preprendIcon"),X=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const W=C.element;f(W),v(L,j);const te=y();g(X,Z),W.append(X,O,L,te),document.body.appendChild(W)}l?(O.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function PT(){const r=Nc()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function bT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DT(){const r=qt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function OT(){return!PT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VT(){try{return typeof indexedDB=="object"}catch{return!1}}function LT(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const MT="FirebaseError";class qr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=MT,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?FT(l,i):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new qr(o,f,i)}}function FT(r,e){return r.replace(UT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const UT=/\{\$([^}]+)}/g;function jT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function vs(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Hg(l)&&Hg(h)){if(!vs(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Hg(r){return r!==null&&typeof r=="object"}function hl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $a(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function qa(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function zT(r,e){const t=new BT(r,e);return t.subscribe.bind(t)}class BT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");$T(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=bd),o.error===void 0&&(o.error=bd),o.complete===void 0&&(o.complete=bd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $T(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function bd(){}function Gt(r){return r&&r._delegate?r._delegate:r}class ws{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ds="[DEFAULT]";class qT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ST;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WT(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:HT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HT(r){return r===ds?void 0:r}function WT(r){return r.instantiationMode==="EAGER"}class KT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(be||(be={}));const GT={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},QT=be.INFO,XT={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},JT=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=XT[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nf{constructor(e){this.name=e,this._logLevel=QT,this._logHandler=JT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const YT=(r,e)=>e.some(t=>r instanceof t);let Wg,Kg;function ZT(){return Wg||(Wg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eI(){return Kg||(Kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $_=new WeakMap,Gd=new WeakMap,q_=new WeakMap,Dd=new WeakMap,bf=new WeakMap;function tI(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(Ai(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&$_.set(t,r)}).catch(()=>{}),bf.set(e,r),e}function nI(r){if(Gd.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Gd.set(r,e)}let Qd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Gd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||q_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ai(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function rI(r){Qd=r(Qd)}function iI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(Od(this),e,...t);return q_.set(i,e.sort?e.sort():[e]),Ai(i)}:eI().includes(r)?function(...e){return r.apply(Od(this),e),Ai($_.get(this))}:function(...e){return Ai(r.apply(Od(this),e))}}function sI(r){return typeof r=="function"?iI(r):(r instanceof IDBTransaction&&nI(r),YT(r,ZT())?new Proxy(r,Qd):r)}function Ai(r){if(r instanceof IDBRequest)return tI(r);if(Dd.has(r))return Dd.get(r);const e=sI(r);return e!==r&&(Dd.set(r,e),bf.set(e,r)),e}const Od=r=>bf.get(r);function oI(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=Ai(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Ai(h.result),g.oldVersion,g.newVersion,Ai(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const aI=["get","getKey","getAll","getAllKeys","count"],lI=["put","add","delete","clear"],Vd=new Map;function Gg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Vd.get(e))return Vd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=lI.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||aI.includes(t)))return;const l=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return Vd.set(e,l),l}rI(r=>({...r,get:(e,t,i)=>Gg(e,t)||r.get(e,t,i),has:(e,t)=>!!Gg(e,t)||r.has(e,t)}));class uI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cI(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function cI(r){return r.getComponent()?.type==="VERSION"}const Xd="@firebase/app",Qg="0.14.6";const jr=new Nf("@firebase/app"),hI="@firebase/app-compat",dI="@firebase/analytics-compat",fI="@firebase/analytics",pI="@firebase/app-check-compat",mI="@firebase/app-check",gI="@firebase/auth",yI="@firebase/auth-compat",_I="@firebase/database",vI="@firebase/data-connect",wI="@firebase/database-compat",EI="@firebase/functions",TI="@firebase/functions-compat",II="@firebase/installations",SI="@firebase/installations-compat",AI="@firebase/messaging",RI="@firebase/messaging-compat",CI="@firebase/performance",kI="@firebase/performance-compat",PI="@firebase/remote-config",xI="@firebase/remote-config-compat",NI="@firebase/storage",bI="@firebase/storage-compat",DI="@firebase/firestore",OI="@firebase/ai",VI="@firebase/firestore-compat",LI="firebase",MI="12.6.0";const Jd="[DEFAULT]",FI={[Xd]:"fire-core",[hI]:"fire-core-compat",[fI]:"fire-analytics",[dI]:"fire-analytics-compat",[mI]:"fire-app-check",[pI]:"fire-app-check-compat",[gI]:"fire-auth",[yI]:"fire-auth-compat",[_I]:"fire-rtdb",[vI]:"fire-data-connect",[wI]:"fire-rtdb-compat",[EI]:"fire-fn",[TI]:"fire-fn-compat",[II]:"fire-iid",[SI]:"fire-iid-compat",[AI]:"fire-fcm",[RI]:"fire-fcm-compat",[CI]:"fire-perf",[kI]:"fire-perf-compat",[PI]:"fire-rc",[xI]:"fire-rc-compat",[NI]:"fire-gcs",[bI]:"fire-gcs-compat",[DI]:"fire-fst",[VI]:"fire-fst-compat",[OI]:"fire-vertex","fire-js":"fire-js",[LI]:"fire-js-all"};const nl=new Map,UI=new Map,Yd=new Map;function Xg(r,e){try{r.container.addComponent(e)}catch(t){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Po(r){const e=r.name;if(Yd.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;Yd.set(e,r);for(const t of nl.values())Xg(t,r);for(const t of UI.values())Xg(t,r);return!0}function Df(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function nn(r){return r==null?!1:r.settings!==void 0}const jI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ri=new cl("app","Firebase",jI);class zI{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}const Uo=MI;function H_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Jd,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ri.create("bad-app-name",{appName:String(o)});if(t||(t=U_()),!t)throw Ri.create("no-options");const l=nl.get(o);if(l){if(vs(t,l.options)&&vs(i,l.config))return l;throw Ri.create("duplicate-app",{appName:o})}const h=new KT(o);for(const g of Yd.values())h.addComponent(g);const f=new zI(t,i,h);return nl.set(o,f),f}function W_(r=Jd){const e=nl.get(r);if(!e&&r===Jd&&U_())return H_();if(!e)throw Ri.create("no-app",{appName:r});return e}function BI(){return Array.from(nl.values())}function Ci(r,e,t){let i=FI[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(h.join(" "));return}Po(new ws(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const $I="firebase-heartbeat-database",qI=1,rl="firebase-heartbeat-store";let Ld=null;function K_(){return Ld||(Ld=oI($I,qI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(rl)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ri.create("idb-open",{originalErrorMessage:r.message})})),Ld}async function HI(r){try{const t=(await K_()).transaction(rl),i=await t.objectStore(rl).get(G_(r));return await t.done,i}catch(e){if(e instanceof qr)jr.warn(e.message);else{const t=Ri.create("idb-get",{originalErrorMessage:e?.message});jr.warn(t.message)}}}async function Jg(r,e){try{const i=(await K_()).transaction(rl,"readwrite");await i.objectStore(rl).put(e,G_(r)),await i.done}catch(t){if(t instanceof qr)jr.warn(t.message);else{const i=Ri.create("idb-set",{originalErrorMessage:t?.message});jr.warn(i.message)}}}function G_(r){return`${r.name}!${r.options.appId}`}const WI=1024,KI=30;class GI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>KI){const o=JI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){jr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Yg(),{heartbeatsToSend:t,unsentEntries:i}=QI(this._heartbeatsCache.heartbeats),o=hc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return jr.warn(e),""}}}function Yg(){return new Date().toISOString().substring(0,10)}function QI(r,e=WI){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Zg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class XI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VT()?LT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Jg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Jg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Zg(r){return hc(JSON.stringify({version:2,heartbeats:r})).length}function JI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function YI(r){Po(new ws("platform-logger",e=>new uI(e),"PRIVATE")),Po(new ws("heartbeat",e=>new GI(e),"PRIVATE")),Ci(Xd,Qg,r),Ci(Xd,Qg,"esm2020"),Ci("fire-js","")}YI("");var ZI="firebase",e1="12.6.0";Ci(ZI,e1,"app");function Q_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const X_=Q_,J_=new cl("auth","Firebase",Q_());const dc=new Nf("@firebase/auth");function t1(r,...e){dc.logLevel<=be.WARN&&dc.warn(`Auth (${Uo}): ${r}`,...e)}function Ju(r,...e){dc.logLevel<=be.ERROR&&dc.error(`Auth (${Uo}): ${r}`,...e)}function An(r,...e){throw Vf(r,...e)}function Fn(r,...e){return Vf(r,...e)}function Of(r,e,t){const i={...X_(),[e]:t};return new cl("auth","Firebase",i).create(e,{appName:r.name})}function cr(r){return Of(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function n1(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&An(r,"argument-error"),Of(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return J_.create(r,...e)}function ve(r,e,...t){if(!r)throw Vf(e,...t)}function Mr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ju(e),new Error(e)}function zr(r,e){r||Mr(e)}function Zd(){return typeof self<"u"&&self.location?.href||""}function r1(){return ey()==="http:"||ey()==="https:"}function ey(){return typeof self<"u"&&self.location?.protocol||null}function i1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(r1()||NT()||"connection"in navigator)?navigator.onLine:!0}function s1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class dl{constructor(e,t){this.shortDelay=e,this.longDelay=t,zr(t>e,"Short delay should be less than long delay!"),this.isMobile=kT()||bT()}get(){return i1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Lf(r,e){zr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Y_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const o1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const a1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],l1=new dl(3e4,6e4);function Hr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Fi(r,e,t,i,o={}){return Z_(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const f=hl({key:r.config.apiKey,...h}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return xT()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Fo(r.emulatorConfig.host)&&(y.credentials="include"),Y_.fetch()(await ev(r,r.config.apiHost,t,f),y)})}async function Z_(r,e,t){r._canInitEmulator=!1;const i={...o1,...e};try{const o=new c1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw qu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(r,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw qu(r,"email-already-in-use",h);if(g==="USER_DISABLED")throw qu(r,"user-disabled",h);const v=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Of(r,v,y);An(r,v)}}catch(o){if(o instanceof qr)throw o;An(r,"network-request-failed",{message:String(o)})}}async function jo(r,e,t,i,o={}){const l=await Fi(r,e,t,i,o);return"mfaPendingCredential"in l&&An(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function ev(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?Lf(r.config,o):`${r.config.apiScheme}://${o}`;return a1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function u1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class c1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Fn(this.auth,"network-request-failed")),l1.get())})}}function qu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Fn(r,e,i);return o.customData._tokenResponse=t,o}function ty(r){return r!==void 0&&r.enterprise!==void 0}class h1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return u1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function d1(r,e){return Fi(r,"GET","/v2/recaptchaConfig",Hr(r,e))}async function f1(r,e){return Fi(r,"POST","/v1/accounts:delete",e)}async function fc(r,e){return Fi(r,"POST","/v1/accounts:lookup",e)}function Xa(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tv(r,e=!1){const t=Gt(r),i=await t.getIdToken(e),o=Mf(i);ve(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:i,authTime:Xa(Md(o.auth_time)),issuedAtTime:Xa(Md(o.iat)),expirationTime:Xa(Md(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Md(r){return Number(r)*1e3}function Mf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Ju("JWT malformed, contained fewer than 3 sections"),null;try{const o=M_(t);return o?JSON.parse(o):(Ju("Failed to decode base64 JWT payload"),null)}catch(o){return Ju("Caught error parsing JWT payload as JSON",o?.toString()),null}}function ny(r){const e=Mf(r);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function il(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof qr&&p1(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function p1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class m1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ef{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xa(this.lastLoginAt),this.creationTime=Xa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function pc(r){const e=r.auth,t=await r.getIdToken(),i=await il(r,fc(e,{idToken:t}));ve(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?rv(o.providerUserInfo):[],h=g1(r.providerData,l),f=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!h?.length,y=f?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new ef(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,v)}async function nv(r){const e=Gt(r);await pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function g1(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function rv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function y1(r,e){const t=await Z_(r,{},async()=>{const i=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await ev(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:i};return r.emulatorConfig&&Fo(r.emulatorConfig.host)&&(g.credentials="include"),Y_.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _1(r,e){return Fi(r,"POST","/v2/accounts:revokeToken",Hr(r,e))}class Ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ny(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const t=ny(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await y1(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new Ao;return i&&(ve(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(ve(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(ve(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ao,this.toJSON())}_performRefresh(){return Mr("not implemented")}}function Ii(r,e){ve(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ln{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new m1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ef(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await il(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tv(this,e)}reload(){return nv(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ln({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await pc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(cr(this.auth));const e=await this.getIdToken();return await il(this,f1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:C,isAnonymous:z,providerData:O,stsTokenManager:j}=t;ve(E&&j,e,"internal-error");const L=Ao.fromJSON(this.name,j);ve(typeof E=="string",e,"internal-error"),Ii(i,e.name),Ii(o,e.name),ve(typeof C=="boolean",e,"internal-error"),ve(typeof z=="boolean",e,"internal-error"),Ii(l,e.name),Ii(h,e.name),Ii(f,e.name),Ii(g,e.name),Ii(y,e.name),Ii(v,e.name);const Z=new Ln({uid:E,auth:e,email:o,emailVerified:C,displayName:i,isAnonymous:z,photoURL:h,phoneNumber:l,tenantId:f,stsTokenManager:L,createdAt:y,lastLoginAt:v});return O&&Array.isArray(O)&&(Z.providerData=O.map(X=>({...X}))),g&&(Z._redirectEventId=g),Z}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ao;o.updateFromServerResponse(t);const l=new Ln({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await pc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];ve(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?rv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,f=new Ao;f.updateFromIdToken(i);const g=new Ln({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new ef(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}const ry=new Map;function Fr(r){zr(r instanceof Function,"Expected a class definition");let e=ry.get(r);return e?(zr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ry.set(r,e),e)}class iv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}iv.type="NONE";const tf=iv;function Yu(r,e,t){return`firebase:${r}:${e}:${t}`}class Ro{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Yu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Yu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fc(this.auth,{idToken:e}).catch(()=>{});return t?Ln._fromGetAccountInfoResponse(this.auth,t,e):null}return Ln._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ro(Fr(tf),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Fr(tf);const h=Yu(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(h);if(v){let E;if(typeof v=="string"){const C=await fc(e,{idToken:v}).catch(()=>{});if(!C)break;E=await Ln._fromGetAccountInfoResponse(e,C,v)}else E=Ln._fromJSON(e,v);y!==l&&(f=E),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ro(l,e,i):(l=g[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Ro(l,e,i))}}function iy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cv(e))return"Blackberry";if(hv(e))return"Webos";if(ov(e))return"Safari";if((e.includes("chrome/")||av(e))&&!e.includes("edge/"))return"Chrome";if(uv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function sv(r=qt()){return/firefox\//i.test(r)}function ov(r=qt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function av(r=qt()){return/crios\//i.test(r)}function lv(r=qt()){return/iemobile/i.test(r)}function uv(r=qt()){return/android/i.test(r)}function cv(r=qt()){return/blackberry/i.test(r)}function hv(r=qt()){return/webos/i.test(r)}function Ff(r=qt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function v1(r=qt()){return Ff(r)&&!!window.navigator?.standalone}function w1(){return DT()&&document.documentMode===10}function dv(r=qt()){return Ff(r)||uv(r)||hv(r)||cv(r)||/windows phone/i.test(r)||lv(r)}function fv(r,e=[]){let t;switch(r){case"Browser":t=iy(qt());break;case"Worker":t=`${iy(qt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Uo}/${i}`}class E1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,f)=>{try{const g=e(l);h(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function T1(r,e={}){return Fi(r,"GET","/v2/passwordPolicy",Hr(r,e))}const I1=6;class S1{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??I1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class A1{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sy(this),this.idTokenSubscription=new sy(this),this.beforeStateQueue=new E1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fc(this,{idToken:e}),i=await Ln._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(i=f.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=s1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(cr(this));const t=e?Gt(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await T1(this),t=new S1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await _1(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fr(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[Fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&t1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Wr(r){return Gt(r)}class sy{constructor(e){this.auth=e,this.observer=null,this.addObserver=zT(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R1(r){bc=r}function pv(r){return bc.loadJS(r)}function C1(){return bc.recaptchaEnterpriseScript}function k1(){return bc.gapiScript}function P1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class x1{constructor(){this.enterprise=new N1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class N1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const b1="recaptcha-enterprise",mv="NO_RECAPTCHA";class D1{constructor(e){this.type=b1,this.auth=Wr(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{d1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new h1(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(g=>{f(g)})})}function o(l,h,f){const g=window.grecaptcha;ty(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(mv)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new x1().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(f=>{if(!t&&ty(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=C1();g.length!==0&&(g+=f),pv(g).then(()=>{o(f,l,h)}).catch(y=>{h(y)})}}).catch(f=>{h(f)})})}}async function oy(r,e,t,i=!1,o=!1){const l=new D1(r);let h;if(o)h=mv;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function nf(r,e,t,i,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await oy(r,e,t,t==="getOobCode");return i(r,l)}else return i(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await oy(r,e,t,t==="getOobCode");return i(r,h)}else return Promise.reject(l)})}function gv(r,e){const t=Df(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(vs(l,e??{}))return o;An(o,"already-initialized")}return t.initialize({options:e})}function O1(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Fr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function yv(r,e,t){const i=Wr(r);ve(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=_v(e),{host:h,port:f}=V1(e),g=f===null?"":`:${f}`,y={url:`${l}//${h}${g}/`},v=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){ve(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ve(vs(y,i.config.emulator)&&vs(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Fo(h)?(z_(`${l}//${h}${g}`),B_("Auth",!0)):L1()}function _v(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function V1(r){const e=_v(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:ay(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:ay(h)}}}function ay(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function L1(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Dc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,t){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}async function M1(r,e){return Fi(r,"POST","/v1/accounts:signUp",e)}async function F1(r,e){return jo(r,"POST","/v1/accounts:signInWithPassword",Hr(r,e))}async function U1(r,e){return jo(r,"POST","/v1/accounts:signInWithEmailLink",Hr(r,e))}async function j1(r,e){return jo(r,"POST","/v1/accounts:signInWithEmailLink",Hr(r,e))}class xo extends Dc{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new xo(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new xo(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nf(e,t,"signInWithPassword",F1);case"emailLink":return U1(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nf(e,i,"signUpPassword",M1);case"emailLink":return j1(e,{idToken:t,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Co(r,e){return jo(r,"POST","/v1/accounts:signInWithIdp",Hr(r,e))}const z1="http://localhost";class xi extends Dc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):An("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new xi(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Co(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Co(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Co(e,t)}buildRequest(){const e={requestUri:z1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hl(t)}return e}}function B1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $1(r){const e=$a(qa(r)).link,t=e?$a(qa(e)).deep_link_id:null,i=$a(qa(r)).deep_link_id;return(i?$a(qa(i)).link:null)||i||t||e||r}class Oc{constructor(e){const t=$a(qa(e)),i=t.apiKey??null,o=t.oobCode??null,l=B1(t.mode??null);ve(i&&o&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=$1(e);try{return new Oc(t)}catch{return null}}}class Rs{constructor(){this.providerId=Rs.PROVIDER_ID}static credential(e,t){return xo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Oc.parseLink(t);return ve(i,"argument-error"),xo._fromEmailAndCode(e,i.code,i.tenantId)}}Rs.PROVIDER_ID="password";Rs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Uf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fl extends Uf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Or extends fl{constructor(){super("facebook.com")}static credential(e){return xi._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.FACEBOOK_SIGN_IN_METHOD="facebook.com";Or.PROVIDER_ID="facebook.com";class ur extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xi._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ur.credential(t,i)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";class Vr extends fl{constructor(){super("github.com")}static credential(e){return xi._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.GITHUB_SIGN_IN_METHOD="github.com";Vr.PROVIDER_ID="github.com";class Lr extends fl{constructor(){super("twitter.com")}static credential(e,t){return xi._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Lr.credential(t,i)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";async function q1(r,e){return jo(r,"POST","/v1/accounts:signUp",Hr(r,e))}class Ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Ln._fromIdTokenResponse(e,i,o),h=ly(i);return new Ni({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ly(i);return new Ni({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ly(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class mc extends qr{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new mc(e,t,i,o)}}function vv(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?mc._fromErrorAndOperation(r,l,e,i):l})}async function H1(r,e,t=!1){const i=await il(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ni._forOperation(r,"link",i)}async function W1(r,e,t=!1){const{auth:i}=r;if(nn(i.app))return Promise.reject(cr(i));const o="reauthenticate";try{const l=await il(r,vv(i,o,e,r),t);ve(l.idToken,i,"internal-error");const h=Mf(l.idToken);ve(h,i,"internal-error");const{sub:f}=h;return ve(r.uid===f,i,"user-mismatch"),Ni._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&An(i,"user-mismatch"),l}}async function wv(r,e,t=!1){if(nn(r.app))return Promise.reject(cr(r));const i="signIn",o=await vv(r,i,e),l=await Ni._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function Ev(r,e){return wv(Wr(r),e)}async function K1(r,e){return jo(r,"POST","/v1/accounts:signInWithCustomToken",Hr(r,e))}async function G1(r,e){if(nn(r.app))return Promise.reject(cr(r));const t=Wr(r),i=await K1(t,{token:e,returnSecureToken:!0}),o=await Ni._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(o.user),o}async function Tv(r){const e=Wr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Iv(r,e,t){if(nn(r.app))return Promise.reject(cr(r));const i=Wr(r),h=await nf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",q1).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Tv(r),g}),f=await Ni._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(f.user),f}function Sv(r,e,t){return nn(r.app)?Promise.reject(cr(r)):Ev(Gt(r),Rs.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Tv(r),i})}function Av(r,e,t,i){return Gt(r).onIdTokenChanged(e,t,i)}function Rv(r,e,t){return Gt(r).beforeAuthStateChanged(e,t)}function Cv(r,e,t,i){return Gt(r).onAuthStateChanged(e,t,i)}function kv(r){return Gt(r).signOut()}const gc="__sak";class Pv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gc,"1"),this.storage.removeItem(gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Q1=1e3,X1=10;class xv extends Pv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);w1()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,X1):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Q1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xv.type="LOCAL";const Nv=xv;class bv extends Pv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bv.type="SESSION";const jf=bv;function J1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Vc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Vc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),g=await J1(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vc.receivers=[];function zf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class Y1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,g)=>{const y=zf("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(E){const C=E;if(C.data.eventId===y)switch(C.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(C.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function hr(){return window}function Z1(r){hr().location.href=r}function Dv(){return typeof hr().WorkerGlobalScope<"u"&&typeof hr().importScripts=="function"}async function eS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tS(){return navigator?.serviceWorker?.controller||null}function nS(){return Dv()?self:null}const Ov="firebaseLocalStorageDb",rS=1,yc="firebaseLocalStorage",Vv="fbase_key";class pl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lc(r,e){return r.transaction([yc],e?"readwrite":"readonly").objectStore(yc)}function iS(){const r=indexedDB.deleteDatabase(Ov);return new pl(r).toPromise()}function rf(){const r=indexedDB.open(Ov,rS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(yc,{keyPath:Vv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(yc)?e(i):(i.close(),await iS(),e(await rf()))})})}async function uy(r,e,t){const i=Lc(r,!0).put({[Vv]:e,value:t});return new pl(i).toPromise()}async function sS(r,e){const t=Lc(r,!1).get(e),i=await new pl(t).toPromise();return i===void 0?null:i.value}function cy(r,e){const t=Lc(r,!0).delete(e);return new pl(t).toPromise()}const oS=800,aS=3;class Lv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>aS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vc._getInstance(nS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await eS(),!this.activeServiceWorker)return;this.sender=new Y1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rf();return await uy(e,gc,"1"),await cy(e,gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>uy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>sS(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Lc(o,!1).getAll();return new pl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lv.type="LOCAL";const Mv=Lv;new dl(3e4,6e4);function Fv(r,e){return e?Fr(e):(ve(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Bf extends Dc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lS(r){return wv(r.auth,new Bf(r),r.bypassAuthState)}function uS(r){const{auth:e,user:t}=r;return ve(t,e,"internal-error"),W1(t,new Bf(r),r.bypassAuthState)}async function cS(r){const{auth:e,user:t}=r;return ve(t,e,"internal-error"),H1(t,new Bf(r),r.bypassAuthState)}class Uv{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lS;case"linkViaPopup":case"linkViaRedirect":return cS;case"reauthViaPopup":case"reauthViaRedirect":return uS;default:An(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hS=new dl(2e3,1e4);async function jv(r,e,t){if(nn(r.app))return Promise.reject(Fn(r,"operation-not-supported-in-this-environment"));const i=Wr(r);n1(r,e,Uf);const o=Fv(i,t);return new fs(i,"signInViaPopup",e,o).executeNotNull()}class fs extends Uv{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,fs.currentPopupAction&&fs.currentPopupAction.cancel(),fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=zf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hS.get())};e()}}fs.currentPopupAction=null;const dS="pendingRedirect",Zu=new Map;class fS extends Uv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Zu.get(this.auth._key());if(!e){try{const i=await pS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Zu.set(this.auth._key(),e)}return this.bypassAuthState||Zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pS(r,e){const t=yS(e),i=gS(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function mS(r,e){Zu.set(r._key(),e)}function gS(r){return Fr(r._redirectPersistence)}function yS(r){return Yu(dS,r.config.apiKey,r.name)}async function _S(r,e,t=!1){if(nn(r.app))return Promise.reject(cr(r));const i=Wr(r),o=Fv(i,e),h=await new fS(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const vS=600*1e3;class wS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ES(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!zv(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Fn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vS&&this.cachedEventUids.clear(),this.cachedEventUids.has(hy(e))}saveEventToCache(e){this.cachedEventUids.add(hy(e)),this.lastProcessedEventTime=Date.now()}}function hy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function zv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function ES(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zv(r);default:return!1}}async function TS(r,e={}){return Fi(r,"GET","/v1/projects",e)}const IS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SS=/^https?/;async function AS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await TS(r);for(const t of e)try{if(RS(t))return}catch{}An(r,"unauthorized-domain")}function RS(r){const e=Zd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!SS.test(t))return!1;if(IS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const CS=new dl(3e4,6e4);function dy(){const r=hr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function kS(r){return new Promise((e,t)=>{function i(){dy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dy(),t(Fn(r,"network-request-failed"))},timeout:CS.get()})}if(hr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(hr().gapi?.load)i();else{const o=P1("iframefcb");return hr()[o]=()=>{gapi.load?i():t(Fn(r,"network-request-failed"))},pv(`${k1()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw ec=null,e})}let ec=null;function PS(r){return ec=ec||kS(r),ec}const xS=new dl(5e3,15e3),NS="__/auth/iframe",bS="emulator/auth/iframe",DS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VS(r){const e=r.config;ve(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Lf(e,bS):`https://${r.config.authDomain}/${NS}`,i={apiKey:e.apiKey,appName:r.name,v:Uo},o=OS.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${hl(i).slice(1)}`}async function LS(r){const e=await PS(r),t=hr().gapi;return ve(t,r,"internal-error"),e.open({where:document.body,url:VS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DS,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=Fn(r,"network-request-failed"),f=hr().setTimeout(()=>{l(h)},xS.get());function g(){hr().clearTimeout(f),o(i)}i.ping(g).then(g,()=>{l(h)})}))}const MS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FS=500,US=600,jS="_blank",zS="http://localhost";class fy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BS(r,e,t,i=FS,o=US){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const g={...MS,width:i.toString(),height:o.toString(),top:l,left:h},y=qt().toLowerCase();t&&(f=av(y)?jS:t),sv(y)&&(e=e||zS,g.scrollbars="yes");const v=Object.entries(g).reduce((C,[z,O])=>`${C}${z}=${O},`,"");if(v1(y)&&f!=="_self")return $S(e||"",f),new fy(null);const E=window.open(e||"",f,v);ve(E,r,"popup-blocked");try{E.focus()}catch{}return new fy(E)}function $S(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const qS="__/auth/handler",HS="emulator/auth/handler",WS=encodeURIComponent("fac");async function py(r,e,t,i,o,l){ve(r.config.authDomain,r,"auth-domain-config-required"),ve(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Uo,eventId:o};if(e instanceof Uf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",jT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))h[v]=E}if(e instanceof fl){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(h.scopes=v.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await r._getAppCheckToken(),y=g?`#${WS}=${encodeURIComponent(g)}`:"";return`${KS(r)}?${hl(f).slice(1)}${y}`}function KS({config:r}){return r.emulator?Lf(r,HS):`https://${r.authDomain}/${qS}`}const Fd="webStorageSupport";class GS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jf,this._completeRedirectFn=_S,this._overrideRedirectResult=mS}async _openPopup(e,t,i,o){zr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await py(e,t,i,Zd(),o);return BS(e,l,zf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await py(e,t,i,Zd(),o);return Z1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(zr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await LS(e),i=new wS(e);return t.register("authEvent",o=>(ve(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fd,{type:Fd},o=>{const l=o?.[0]?.[Fd];l!==void 0&&t(!!l),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=AS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dv()||ov()||Ff()}}const Bv=GS;var my="@firebase/auth",gy="1.11.1";class QS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function XS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JS(r){Po(new ws("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=i.options;ve(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fv(r)},y=new A1(i,o,l,g);return O1(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Po(new ws("auth-internal",e=>{const t=Wr(e.getProvider("auth").getImmediate());return(i=>new QS(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ci(my,gy,XS(r)),Ci(my,gy,"esm2020")}const YS=300,ZS=j_("authIdTokenMaxAge")||YS;let yy=null;const eA=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ZS)return;const o=t?.token;yy!==o&&(yy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $v(r=W_()){const e=Df(r,"auth");if(e.isInitialized())return e.getImmediate();const t=gv(r,{popupRedirectResolver:Bv,persistence:[Mv,Nv,jf]}),i=j_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=eA(l.toString());Rv(t,h,()=>h(t.currentUser)),Av(t,f=>h(f))}}const o=F_("auth");return o&&yv(t,`http://${o}`),t}function tA(){return document.getElementsByTagName("head")?.[0]??document}R1({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=Fn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",tA().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JS("Browser");const nA=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Oc,AuthCredential:Dc,EmailAuthCredential:xo,EmailAuthProvider:Rs,FacebookAuthProvider:Or,GithubAuthProvider:Vr,GoogleAuthProvider:ur,OAuthCredential:xi,TwitterAuthProvider:Lr,beforeAuthStateChanged:Rv,browserLocalPersistence:Nv,browserPopupRedirectResolver:Bv,browserSessionPersistence:jf,connectAuthEmulator:yv,createUserWithEmailAndPassword:Iv,getAuth:$v,getIdTokenResult:tv,inMemoryPersistence:tf,indexedDBLocalPersistence:Mv,initializeAuth:gv,onAuthStateChanged:Cv,onIdTokenChanged:Av,prodErrorMap:X_,reload:nv,signInWithCredential:Ev,signInWithCustomToken:G1,signInWithEmailAndPassword:Sv,signInWithPopup:jv,signOut:kv},Symbol.toStringTag,{value:"Module"}));var _y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ki,qv;(function(){var r;function e(k,I){function R(){}R.prototype=I.prototype,k.F=I.prototype,k.prototype=new R,k.prototype.constructor=k,k.D=function(b,x,M){for(var A=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)A[Le-2]=arguments[Le];return I.prototype[x].apply(b,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,R){R||(R=0);const b=Array(16);if(typeof I=="string")for(var x=0;x<16;++x)b[x]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(x=0;x<16;++x)b[x]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=k.g[0],R=k.g[1],x=k.g[2];let M=k.g[3],A;A=I+(M^R&(x^M))+b[0]+3614090360&4294967295,I=R+(A<<7&4294967295|A>>>25),A=M+(x^I&(R^x))+b[1]+3905402710&4294967295,M=I+(A<<12&4294967295|A>>>20),A=x+(R^M&(I^R))+b[2]+606105819&4294967295,x=M+(A<<17&4294967295|A>>>15),A=R+(I^x&(M^I))+b[3]+3250441966&4294967295,R=x+(A<<22&4294967295|A>>>10),A=I+(M^R&(x^M))+b[4]+4118548399&4294967295,I=R+(A<<7&4294967295|A>>>25),A=M+(x^I&(R^x))+b[5]+1200080426&4294967295,M=I+(A<<12&4294967295|A>>>20),A=x+(R^M&(I^R))+b[6]+2821735955&4294967295,x=M+(A<<17&4294967295|A>>>15),A=R+(I^x&(M^I))+b[7]+4249261313&4294967295,R=x+(A<<22&4294967295|A>>>10),A=I+(M^R&(x^M))+b[8]+1770035416&4294967295,I=R+(A<<7&4294967295|A>>>25),A=M+(x^I&(R^x))+b[9]+2336552879&4294967295,M=I+(A<<12&4294967295|A>>>20),A=x+(R^M&(I^R))+b[10]+4294925233&4294967295,x=M+(A<<17&4294967295|A>>>15),A=R+(I^x&(M^I))+b[11]+2304563134&4294967295,R=x+(A<<22&4294967295|A>>>10),A=I+(M^R&(x^M))+b[12]+1804603682&4294967295,I=R+(A<<7&4294967295|A>>>25),A=M+(x^I&(R^x))+b[13]+4254626195&4294967295,M=I+(A<<12&4294967295|A>>>20),A=x+(R^M&(I^R))+b[14]+2792965006&4294967295,x=M+(A<<17&4294967295|A>>>15),A=R+(I^x&(M^I))+b[15]+1236535329&4294967295,R=x+(A<<22&4294967295|A>>>10),A=I+(x^M&(R^x))+b[1]+4129170786&4294967295,I=R+(A<<5&4294967295|A>>>27),A=M+(R^x&(I^R))+b[6]+3225465664&4294967295,M=I+(A<<9&4294967295|A>>>23),A=x+(I^R&(M^I))+b[11]+643717713&4294967295,x=M+(A<<14&4294967295|A>>>18),A=R+(M^I&(x^M))+b[0]+3921069994&4294967295,R=x+(A<<20&4294967295|A>>>12),A=I+(x^M&(R^x))+b[5]+3593408605&4294967295,I=R+(A<<5&4294967295|A>>>27),A=M+(R^x&(I^R))+b[10]+38016083&4294967295,M=I+(A<<9&4294967295|A>>>23),A=x+(I^R&(M^I))+b[15]+3634488961&4294967295,x=M+(A<<14&4294967295|A>>>18),A=R+(M^I&(x^M))+b[4]+3889429448&4294967295,R=x+(A<<20&4294967295|A>>>12),A=I+(x^M&(R^x))+b[9]+568446438&4294967295,I=R+(A<<5&4294967295|A>>>27),A=M+(R^x&(I^R))+b[14]+3275163606&4294967295,M=I+(A<<9&4294967295|A>>>23),A=x+(I^R&(M^I))+b[3]+4107603335&4294967295,x=M+(A<<14&4294967295|A>>>18),A=R+(M^I&(x^M))+b[8]+1163531501&4294967295,R=x+(A<<20&4294967295|A>>>12),A=I+(x^M&(R^x))+b[13]+2850285829&4294967295,I=R+(A<<5&4294967295|A>>>27),A=M+(R^x&(I^R))+b[2]+4243563512&4294967295,M=I+(A<<9&4294967295|A>>>23),A=x+(I^R&(M^I))+b[7]+1735328473&4294967295,x=M+(A<<14&4294967295|A>>>18),A=R+(M^I&(x^M))+b[12]+2368359562&4294967295,R=x+(A<<20&4294967295|A>>>12),A=I+(R^x^M)+b[5]+4294588738&4294967295,I=R+(A<<4&4294967295|A>>>28),A=M+(I^R^x)+b[8]+2272392833&4294967295,M=I+(A<<11&4294967295|A>>>21),A=x+(M^I^R)+b[11]+1839030562&4294967295,x=M+(A<<16&4294967295|A>>>16),A=R+(x^M^I)+b[14]+4259657740&4294967295,R=x+(A<<23&4294967295|A>>>9),A=I+(R^x^M)+b[1]+2763975236&4294967295,I=R+(A<<4&4294967295|A>>>28),A=M+(I^R^x)+b[4]+1272893353&4294967295,M=I+(A<<11&4294967295|A>>>21),A=x+(M^I^R)+b[7]+4139469664&4294967295,x=M+(A<<16&4294967295|A>>>16),A=R+(x^M^I)+b[10]+3200236656&4294967295,R=x+(A<<23&4294967295|A>>>9),A=I+(R^x^M)+b[13]+681279174&4294967295,I=R+(A<<4&4294967295|A>>>28),A=M+(I^R^x)+b[0]+3936430074&4294967295,M=I+(A<<11&4294967295|A>>>21),A=x+(M^I^R)+b[3]+3572445317&4294967295,x=M+(A<<16&4294967295|A>>>16),A=R+(x^M^I)+b[6]+76029189&4294967295,R=x+(A<<23&4294967295|A>>>9),A=I+(R^x^M)+b[9]+3654602809&4294967295,I=R+(A<<4&4294967295|A>>>28),A=M+(I^R^x)+b[12]+3873151461&4294967295,M=I+(A<<11&4294967295|A>>>21),A=x+(M^I^R)+b[15]+530742520&4294967295,x=M+(A<<16&4294967295|A>>>16),A=R+(x^M^I)+b[2]+3299628645&4294967295,R=x+(A<<23&4294967295|A>>>9),A=I+(x^(R|~M))+b[0]+4096336452&4294967295,I=R+(A<<6&4294967295|A>>>26),A=M+(R^(I|~x))+b[7]+1126891415&4294967295,M=I+(A<<10&4294967295|A>>>22),A=x+(I^(M|~R))+b[14]+2878612391&4294967295,x=M+(A<<15&4294967295|A>>>17),A=R+(M^(x|~I))+b[5]+4237533241&4294967295,R=x+(A<<21&4294967295|A>>>11),A=I+(x^(R|~M))+b[12]+1700485571&4294967295,I=R+(A<<6&4294967295|A>>>26),A=M+(R^(I|~x))+b[3]+2399980690&4294967295,M=I+(A<<10&4294967295|A>>>22),A=x+(I^(M|~R))+b[10]+4293915773&4294967295,x=M+(A<<15&4294967295|A>>>17),A=R+(M^(x|~I))+b[1]+2240044497&4294967295,R=x+(A<<21&4294967295|A>>>11),A=I+(x^(R|~M))+b[8]+1873313359&4294967295,I=R+(A<<6&4294967295|A>>>26),A=M+(R^(I|~x))+b[15]+4264355552&4294967295,M=I+(A<<10&4294967295|A>>>22),A=x+(I^(M|~R))+b[6]+2734768916&4294967295,x=M+(A<<15&4294967295|A>>>17),A=R+(M^(x|~I))+b[13]+1309151649&4294967295,R=x+(A<<21&4294967295|A>>>11),A=I+(x^(R|~M))+b[4]+4149444226&4294967295,I=R+(A<<6&4294967295|A>>>26),A=M+(R^(I|~x))+b[11]+3174756917&4294967295,M=I+(A<<10&4294967295|A>>>22),A=x+(I^(M|~R))+b[2]+718787259&4294967295,x=M+(A<<15&4294967295|A>>>17),A=R+(M^(x|~I))+b[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(x+(A<<21&4294967295|A>>>11))&4294967295,k.g[2]=k.g[2]+x&4294967295,k.g[3]=k.g[3]+M&4294967295}i.prototype.v=function(k,I){I===void 0&&(I=k.length);const R=I-this.blockSize,b=this.C;let x=this.h,M=0;for(;M<I;){if(x==0)for(;M<=R;)o(this,k,M),M+=this.blockSize;if(typeof k=="string"){for(;M<I;)if(b[x++]=k.charCodeAt(M++),x==this.blockSize){o(this,b),x=0;break}}else for(;M<I;)if(b[x++]=k[M++],x==this.blockSize){o(this,b),x=0;break}}this.h=x,this.o+=I},i.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;I=this.o*8;for(var R=k.length-8;R<k.length;++R)k[R]=I&255,I/=256;for(this.v(k),k=Array(16),I=0,R=0;R<4;++R)for(let b=0;b<32;b+=8)k[I++]=this.g[R]>>>b&255;return k};function l(k,I){var R=f;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=I(k)}function h(k,I){this.h=I;const R=[];let b=!0;for(let x=k.length-1;x>=0;x--){const M=k[x]|0;b&&M==I||(R[x]=M,b=!1)}this.g=R}var f={};function g(k){return-128<=k&&k<128?l(k,function(I){return new h([I|0],I<0?-1:0)}):new h([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return E;if(k<0)return L(y(-k));const I=[];let R=1;for(let b=0;k>=R;b++)I[b]=k/R|0,R*=4294967296;return new h(I,0)}function v(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return L(v(k.substring(1),I));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(I,8));let b=E;for(let M=0;M<k.length;M+=8){var x=Math.min(8,k.length-M);const A=parseInt(k.substring(M,M+x),I);x<8?(x=y(Math.pow(I,x)),b=b.j(x).add(y(A))):(b=b.j(R),b=b.add(y(A)))}return b}var E=g(0),C=g(1),z=g(16777216);r=h.prototype,r.m=function(){if(j(this))return-L(this).m();let k=0,I=1;for(let R=0;R<this.g.length;R++){const b=this.i(R);k+=(b>=0?b:4294967296+b)*I,I*=4294967296}return k},r.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(O(this))return"0";if(j(this))return"-"+L(this).toString(k);const I=y(Math.pow(k,6));var R=this;let b="";for(;;){const x=te(R,I).g;R=Z(R,x.j(I));let M=((R.g.length>0?R.g[0]:R.h)>>>0).toString(k);if(R=x,O(R))return M+b;for(;M.length<6;)M="0"+M;b=M+b}},r.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function O(k){if(k.h!=0)return!1;for(let I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function j(k){return k.h==-1}r.l=function(k){return k=Z(this,k),j(k)?-1:O(k)?0:1};function L(k){const I=k.g.length,R=[];for(let b=0;b<I;b++)R[b]=~k.g[b];return new h(R,~k.h).add(C)}r.abs=function(){return j(this)?L(this):this},r.add=function(k){const I=Math.max(this.g.length,k.g.length),R=[];let b=0;for(let x=0;x<=I;x++){let M=b+(this.i(x)&65535)+(k.i(x)&65535),A=(M>>>16)+(this.i(x)>>>16)+(k.i(x)>>>16);b=A>>>16,M&=65535,A&=65535,R[x]=A<<16|M}return new h(R,R[R.length-1]&-2147483648?-1:0)};function Z(k,I){return k.add(L(I))}r.j=function(k){if(O(this)||O(k))return E;if(j(this))return j(k)?L(this).j(L(k)):L(L(this).j(k));if(j(k))return L(this.j(L(k)));if(this.l(z)<0&&k.l(z)<0)return y(this.m()*k.m());const I=this.g.length+k.g.length,R=[];for(var b=0;b<2*I;b++)R[b]=0;for(b=0;b<this.g.length;b++)for(let x=0;x<k.g.length;x++){const M=this.i(b)>>>16,A=this.i(b)&65535,Le=k.i(x)>>>16,lt=k.i(x)&65535;R[2*b+2*x]+=A*lt,X(R,2*b+2*x),R[2*b+2*x+1]+=M*lt,X(R,2*b+2*x+1),R[2*b+2*x+1]+=A*Le,X(R,2*b+2*x+1),R[2*b+2*x+2]+=M*Le,X(R,2*b+2*x+2)}for(k=0;k<I;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=I;k<2*I;k++)R[k]=0;return new h(R,0)};function X(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function W(k,I){this.g=k,this.h=I}function te(k,I){if(O(I))throw Error("division by zero");if(O(k))return new W(E,E);if(j(k))return I=te(L(k),I),new W(L(I.g),L(I.h));if(j(I))return I=te(k,L(I)),new W(L(I.g),I.h);if(k.g.length>30){if(j(k)||j(I))throw Error("slowDivide_ only works with positive integers.");for(var R=C,b=I;b.l(k)<=0;)R=se(R),b=se(b);var x=de(R,1),M=de(b,1);for(b=de(b,2),R=de(R,2);!O(b);){var A=M.add(b);A.l(k)<=0&&(x=x.add(R),M=A),b=de(b,1),R=de(R,1)}return I=Z(k,x.j(I)),new W(x,I)}for(x=E;k.l(I)>=0;){for(R=Math.max(1,Math.floor(k.m()/I.m())),b=Math.ceil(Math.log(R)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),M=y(R),A=M.j(I);j(A)||A.l(k)>0;)R-=b,M=y(R),A=M.j(I);O(M)&&(M=C),x=x.add(M),k=Z(k,A)}return new W(x,k)}r.B=function(k){return te(this,k).h},r.and=function(k){const I=Math.max(this.g.length,k.g.length),R=[];for(let b=0;b<I;b++)R[b]=this.i(b)&k.i(b);return new h(R,this.h&k.h)},r.or=function(k){const I=Math.max(this.g.length,k.g.length),R=[];for(let b=0;b<I;b++)R[b]=this.i(b)|k.i(b);return new h(R,this.h|k.h)},r.xor=function(k){const I=Math.max(this.g.length,k.g.length),R=[];for(let b=0;b<I;b++)R[b]=this.i(b)^k.i(b);return new h(R,this.h^k.h)};function se(k){const I=k.g.length+1,R=[];for(let b=0;b<I;b++)R[b]=k.i(b)<<1|k.i(b-1)>>>31;return new h(R,k.h)}function de(k,I){const R=I>>5;I%=32;const b=k.g.length-R,x=[];for(let M=0;M<b;M++)x[M]=I>0?k.i(M+R)>>>I|k.i(M+R+1)<<32-I:k.i(M+R);return new h(x,k.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,qv=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,ki=h}).apply(typeof _y<"u"?_y:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Hv,Ha,Wv,tc,sf,Kv,Gv,Qv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in _))break e;_=_[U]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});var l=l||{},h=this||self;function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function v(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,U,q){for(var ie=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)ie[Re-2]=arguments[Re];return m.prototype[U].apply(T,ie)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function z(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function O(u,m){for(let T=1;T<arguments.length;T++){const U=arguments[T];var _=typeof U;if(_=_!="object"?_:U?Array.isArray(U)?"array":_:"null",_=="array"||_=="object"&&typeof U.length=="number"){_=u.length||0;const q=U.length||0;u.length=_+q;for(let ie=0;ie<q;ie++)u[_+ie]=U[ie]}else u.push(U)}}class j{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function L(u){h.setTimeout(()=>{throw u},0)}function Z(){var u=k;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class X{constructor(){this.h=this.g=null}add(m,_){const T=W.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var W=new j(()=>new te,u=>u.reset());class te{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let se,de=!1,k=new X,I=()=>{const u=Promise.resolve(void 0);se=()=>{u.then(R)}};function R(){for(var u;u=Z();){try{u.h.call(u.g)}catch(_){L(_)}var m=W;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}de=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function A(u){return/^[\s\xa0]*$/.test(u)}function Le(u,m){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(Le,x),Le.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var lt="closure_listenable_"+(Math.random()*1e6|0),He=0;function We(u,m,_,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=U,this.key=++He,this.da=this.fa=!1}function re(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function me(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function ae(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function V(u){const m={};for(const _ in u)m[_]=u[_];return m}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Se(u,m){let _,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(_ in T)u[_]=T[_];for(let q=0;q<G.length;q++)_=G[q],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function Te(u){this.src=u,this.g={},this.h=0}Te.prototype.add=function(u,m,_,T,U){const q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);const ie=Ne(u,m,T,U);return ie>-1?(m=u[ie],_||(m.fa=!1)):(m=new We(m,this.src,q,!!T,U),m.fa=_,u.push(m)),m};function Pe(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],U=Array.prototype.indexOf.call(T,m,void 0),q;(q=U>=0)&&Array.prototype.splice.call(T,U,1),q&&(re(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ne(u,m,_,T){for(let U=0;U<u.length;++U){const q=u[U];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==T)return U}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Fe={};function Ke(u,m,_,T,U){if(Array.isArray(m)){for(let q=0;q<m.length;q++)Ke(u,m[q],_,T,U);return null}return _=Go(_),u&&u[lt]?u.J(m,_,f(T)?!!T.capture:!1,U):Ht(u,m,_,!1,T,U)}function Ht(u,m,_,T,U,q){if(!m)throw Error("Invalid event type");const ie=f(U)?!!U.capture:!!U;let Re=Os(u);if(Re||(u[Be]=Re=new Te(u)),_=Re.add(m,_,T,ie,q),_.proxy)return _;if(T=bs(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)M||(U=ie),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(Ds(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function bs(){function u(_){return m.call(u.src,u.listener,_)}const m=kl;return u}function Ko(u,m,_,T,U){if(Array.isArray(m))for(var q=0;q<m.length;q++)Ko(u,m[q],_,T,U);else T=f(T)?!!T.capture:!!T,_=Go(_),u&&u[lt]?(u=u.i,q=String(m).toString(),q in u.g&&(m=u.g[q],_=Ne(m,_,T,U),_>-1&&(re(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[q],u.h--)))):u&&(u=Os(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Ne(m,_,T,U)),(_=u>-1?m[u]:null)&&Kr(_))}function Kr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[lt])Pe(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(Ds(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=Os(m))?(Pe(_,u),_.h==0&&(_.src=null,m[Be]=null)):re(u)}}}function Ds(u){return u in Fe?Fe[u]:Fe[u]="on"+u}function kl(u,m){if(u.da)u=!0;else{m=new Le(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&Kr(u),u=_.call(T,m)}return u}function Os(u){return u=u[Be],u instanceof Te?u:null}var Ui="__closure_events_fn_"+(Math.random()*1e9>>>0);function Go(u){return typeof u=="function"?u:(u[Ui]||(u[Ui]=function(m){return u.handleEvent(m)}),u[Ui])}function ft(){b.call(this),this.i=new Te(this),this.M=this,this.G=null}E(ft,b),ft.prototype[lt]=!0,ft.prototype.removeEventListener=function(u,m,_,T){Ko(this,u,m,_,T)};function ut(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new x(m,u);else if(m instanceof x)m.target=m.target||u;else{var U=m;m=new x(T,u),Se(m,U)}U=!0;let q,ie;if(_)for(ie=_.length-1;ie>=0;ie--)q=m.g=_[ie],U=Rn(q,T,!0,m)&&U;if(q=m.g=u,U=Rn(q,T,!0,m)&&U,U=Rn(q,T,!1,m)&&U,_)for(ie=0;ie<_.length;ie++)q=m.g=_[ie],U=Rn(q,T,!1,m)&&U}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)re(_[T]);delete u.g[m],u.h--}}this.G=null},ft.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},ft.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function Rn(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let q=0;q<m.length;++q){const ie=m[q];if(ie&&!ie.da&&ie.capture==_){const Re=ie.listener,ct=ie.ha||ie.src;ie.fa&&Pe(u.i,ie),U=Re.call(ct,T)!==!1&&U}}return U&&!T.defaultPrevented}function Qo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function Xo(u){u.g=Qo(()=>{u.g=null,u.i&&(u.i=!1,Xo(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Pl extends b{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Xo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(u){b.call(this),this.h=u,this.g={}}E(Gr,b);var Jo=[];function Vs(u){me(u.g,function(m,_){this.g.hasOwnProperty(_)&&Kr(m)},u),u.g={}}Gr.prototype.N=function(){Gr.Z.N.call(this),Vs(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qr=h.JSON.stringify,xl=h.JSON.parse,ji=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Xr(){}function Nl(){}var Jr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ls(){x.call(this,"d")}E(Ls,x);function Yo(){x.call(this,"c")}E(Yo,x);var Cn={},Ms=null;function Yr(){return Ms=Ms||new ft}Cn.Ia="serverreachability";function Fs(u){x.call(this,Cn.Ia,u)}E(Fs,x);function gr(u){const m=Yr();ut(m,new Fs(m))}Cn.STAT_EVENT="statevent";function yr(u,m){x.call(this,Cn.STAT_EVENT,u),this.stat=m}E(yr,x);function ot(u){const m=Yr();ut(m,new yr(m,u))}Cn.Ja="timingevent";function Zo(u,m){x.call(this,Cn.Ja,u),this.size=m}E(Zo,x);function Zr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function bl(u,m,_,T,U,q){u.info(function(){if(u.g)if(q){var ie="",Re=q.split("&");for(let qe=0;qe<Re.length;qe++){var ct=Re[qe].split("=");if(ct.length>1){const pt=ct[0];ct=ct[1];const hn=pt.split("_");ie=hn.length>=2&&hn[1]=="type"?ie+(pt+"="+ct+"&"):ie+(pt+"=redacted&")}}}else ie=null;else ie=q;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+_+`
`+ie})}function Dl(u,m,_,T,U,q,ie){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+_+`
`+q+" "+ie})}function $n(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+zi(u,_)+(T?" "+T:"")})}function Ol(u,m){u.info(function(){return"TIMEOUT: "+m})}ei.prototype.info=function(){};function zi(u,m){if(!u.g)return m;if(!m)return null;try{const q=JSON.parse(m);if(q){for(u=0;u<q.length;u++)if(Array.isArray(q[u])){var _=q[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var U=T[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ie=1;ie<T.length;ie++)T[ie]=""}}}}return Qr(q)}catch{return m}}var ti={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ni={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vl;function _r(){}E(_r,Xr),_r.prototype.g=function(){return new XMLHttpRequest},Vl=new _r;function qn(u){return encodeURIComponent(String(u))}function Us(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function gn(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new Gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ll}function Ll(){this.i=null,this.g="",this.h=!1}var Ml={},ea={};function kn(u,m,_){u.M=1,u.A=wr(yn(m)),u.u=_,u.R=!0,ta(u,null)}function ta(u,m){u.F=Date.now(),Bi(u),u.B=yn(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),ha(_.i,"t",T),u.C=0,_=u.j.L,u.h=new Ll,u.g=Kl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Pl(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Jo[0]=U.toString()),U=Jo);for(let q=0;q<U.length;q++){const ie=Ke(_,U[q],T||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),gr(),bl(u.i,u.v,u.B,u.l,u.S,u.u)}gn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Jn(u)==3?m.j():this.Y(u)},gn.prototype.Y=function(u){try{if(u==this.g)e:{const Re=Jn(this.g),ct=this.g.ya(),qe=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||Hl(this.g)))){this.K||Re!=4||ct==7||(ct==8||qe<=0?gr(3):gr(2)),js(this);var m=this.g.ca();this.X=m;var _=Fl(this);if(this.o=m==200,Dl(this.i,this.v,this.B,this.l,this.S,Re,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,U=this.g;if((T=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(T)){var q=T;break t}}q=null}if(u=q)$n(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ye(this,u);else{this.o=!1,this.m=3,ot(12),vr(this),$i(this);break e}}if(this.R){u=!0;let pt;for(;!this.K&&this.C<_.length;)if(pt=jl(this,_),pt==ea){Re==4&&(this.m=4,ot(14),u=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Ml){this.m=4,ot(15),$n(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else $n(this.i,this.l,pt,null),Ye(this,pt);if(Ul(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||_.length!=0||this.h.h||(this.m=1,ot(16),u=!1),this.o=this.o&&u,!u)$n(this.i,this.l,_,"[Invalid Chunked Response]"),vr(this),$i(this);else if(_.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Yi(ie),ie.P=!0,ot(11))}}else $n(this.i,this.l,_,null),Ye(this,_);Re==4&&vr(this),this.o&&!this.K&&(Re==4?Xs(this.j,this):(this.o=!1,Bi(this)))}else fa(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),vr(this),$i(this)}}}catch{}finally{}};function Fl(u){if(!Ul(u))return u.g.la();const m=Hl(u.g);if(m==="")return"";let _="";const T=m.length,U=Jn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return vr(u),$i(u),"";u.h.i=new h.TextDecoder}for(let q=0;q<T;q++)u.h.h=!0,_+=u.h.i.decode(m[q],{stream:!(U&&q==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function Ul(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function jl(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?ea:(_=Number(m.substring(_,T)),isNaN(_)?Ml:(T+=1,T+_>m.length?ea:(m=m.slice(T,T+_),u.C=T+_,m)))}gn.prototype.cancel=function(){this.K=!0,vr(this)};function Bi(u){u.T=Date.now()+u.H,na(u,u.H)}function na(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Zr(y(u.aa,u),m)}function js(u){u.D&&(h.clearTimeout(u.D),u.D=null)}gn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ol(this.i,this.B),this.M!=2&&(gr(),ot(17)),vr(this),this.m=2,$i(this)):na(this,this.T-u)};function $i(u){u.j.I==0||u.K||Xs(u.j,u)}function vr(u){js(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Vs(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ye(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||ia(_.h,u))){if(!u.L&&ia(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Qs(_),un(_);else break e;er(_),ot(18)}}else _.xa=U[1],0<_.xa-_.K&&U[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Zr(y(_.Va,_),6e3));qi(_.h)<=1&&_.ta&&(_.ta=void 0)}else cn(_,11)}else if((u.L||_.g==u)&&Qs(_),!A(m))for(U=_.Ba.g.parse(m),m=0;m<U.length;m++){let qe=U[m];const pt=qe[0];if(!(pt<=_.K))if(_.K=pt,qe=qe[1],_.I==2)if(qe[0]=="c"){_.M=qe[1],_.ba=qe[2];const hn=qe[3];hn!=null&&(_.ka=hn,_.j.info("VER="+_.ka));const Ar=qe[4];Ar!=null&&(_.za=Ar,_.j.info("SVER="+_.za));const tr=qe[5];tr!=null&&typeof tr=="number"&&tr>0&&(T=1.5*tr,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const nr=u.g;if(nr){const Zs=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zs){var q=T.h;q.g||Zs.indexOf("spdy")==-1&&Zs.indexOf("quic")==-1&&Zs.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Bs(q,q.h),q.h=null))}if(T.G){const ga=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;ga&&(T.wa=ga,ze(T.J,T.G,ga))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var ie=u;if(T.na=ma(T,T.L?T.ba:null,T.W),ie.L){Hi(T.h,ie);var Re=ie,ct=T.O;ct&&(Re.H=ct),Re.D&&(js(Re),Bi(Re)),T.g=ie}else Vt(T);_.i.length>0&&Sr(_)}else qe[0]!="stop"&&qe[0]!="close"||cn(_,7);else _.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?cn(_,7):Ks(_):qe[0]!="noop"&&_.l&&_.l.qa(qe),_.A=0)}}gr(4)}catch{}}var ih=class{constructor(u,m){this.g=u,this.map=m}};function zs(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ra(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qi(u){return u.h?1:u.g?u.g.size:0}function ia(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Bs(u,m){u.g?u.g.add(m):u.h=m}function Hi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}zs.prototype.cancel=function(){if(this.i=on(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function on(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return z(u.i)}var zl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function an(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let U,q=null;T>=0?(U=u[_].substring(0,T),q=u[_].substring(T+1)):U=u[_],m(U,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Hn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Hn?(this.l=u.l,Wi(this,u.j),this.o=u.o,this.g=u.g,Wn(this,u.u),this.h=u.h,ri(this,da(u.i)),this.m=u.m):u&&(m=String(u).match(zl))?(this.l=!1,Wi(this,m[1]||"",!0),this.o=Ki(m[2]||""),this.g=Ki(m[3]||"",!0),Wn(this,m[4]),this.h=Ki(m[5]||"",!0),ri(this,m[6]||"",!0),this.m=Ki(m[7]||"")):(this.l=!1,this.i=new Ve(null,this.l))}Hn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Gi(m,oa,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Gi(m,oa,!0),"@"),u.push(qn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Gi(_,_.charAt(0)=="/"?Qi:aa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Gi(_,la)),u.join("")},Hn.prototype.resolve=function(u){const m=yn(this);let _=!!u.j;_?Wi(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)Wn(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var U=m.h.lastIndexOf("/");U!=-1&&(T=m.h.slice(0,U+1)+T)}if(U=T,U==".."||U==".")T="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){T=U.lastIndexOf("/",0)==0,U=U.split("/");const q=[];for(let ie=0;ie<U.length;){const Re=U[ie++];Re=="."?T&&ie==U.length&&q.push(""):Re==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),T&&ie==U.length&&q.push("")):(q.push(Re),T=!0)}T=q.join("/")}else T=U}return _?m.h=T:_=u.i.toString()!=="",_?ri(m,da(u.i)):_=!!u.m,_&&(m.m=u.m),m};function yn(u){return new Hn(u)}function Wi(u,m,_){u.j=_?Ki(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Wn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ri(u,m,_){m instanceof Ve?(u.i=m,qs(u.i,u.l)):(_||(m=Gi(m,sh)),u.i=new Ve(m,u.l))}function ze(u,m,_){u.i.set(m,_)}function wr(u){return ze(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ki(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,sa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function sa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var oa=/[#\/\?@]/g,aa=/[#\?:]/g,Qi=/[#\?]/g,sh=/[#\?@]/g,la=/#/g;function Ve(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Kn(u){u.g||(u.g=new Map,u.h=0,u.i&&an(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Ve.prototype,r.add=function(u,m){Kn(this),this.i=null,u=Gn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function ua(u,m){Kn(u),m=Gn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function $s(u,m){return Kn(u),m=Gn(u,m),u.g.has(m)}r.forEach=function(u,m){Kn(this),this.g.forEach(function(_,T){_.forEach(function(U){u.call(m,U,T,this)},this)},this)};function ca(u,m){Kn(u);let _=[];if(typeof m=="string")$s(u,m)&&(_=_.concat(u.g.get(Gn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Kn(this),this.i=null,u=Gn(this,u),$s(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=ca(this,u),u.length>0?String(u[0]):m):m};function ha(u,m,_){ua(u,m),_.length>0&&(u.i=null,u.g.set(Gn(u,m),z(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const U=qn(_);_=ca(this,_);for(let q=0;q<_.length;q++){let ie=U;_[q]!==""&&(ie+="="+qn(_[q])),u.push(ie)}}return this.i=u.join("&")};function da(u){const m=new Ve;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Gn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function qs(u,m){m&&!u.j&&(Kn(u),u.i=null,u.g.forEach(function(_,T){const U=T.toLowerCase();T!=U&&(ua(this,T),ha(this,U,_))},u)),u.j=m}function Qn(u,m){const _=new ei;if(h.Image){const T=new Image;T.onload=v(xt,_,"TestLoadImage: loaded",!0,m,T),T.onerror=v(xt,_,"TestLoadImage: error",!1,m,T),T.onabort=v(xt,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=v(xt,_,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Xn(u,m){const _=new ei,T=new AbortController,U=setTimeout(()=>{T.abort(),xt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(U),q.ok?xt(_,"TestPingServer: ok",!0,m):xt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),xt(_,"TestPingServer: error",!1,m)})}function xt(u,m,_,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(_)}catch{}}function Xi(){this.g=new ji}function Er(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Er,Xr),Er.prototype.g=function(){return new ln(this.i,this.h)};function ln(u,m){ft.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ln,ft),r=ln.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Pn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Bl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Bl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ii(this):Pn(this),this.readyState==3&&Bl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,ii(this))},r.Na=function(u){this.g&&(this.response=u,ii(this))},r.ga=function(){this.g&&ii(this)};function ii(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Pn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Pn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ln.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function $l(u){let m="";return me(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Hs(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=$l(_),typeof u=="string"?_!=null&&qn(_):ze(u,m,_))}function Ge(u){ft.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ge,ft);var ql=/^https?$/i,oh=["POST","PUT"];r=Ge.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vl.g(),this.g.onreadystatechange=C(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){si(this,q);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)_.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())_.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(oh,m,void 0)>=0)||T||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ie]of _)this.g.setRequestHeader(q,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(q){si(this,q)}};function si(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,oi(u),Ir(u)}function oi(u){u.A||(u.A=!0,ut(u,"complete"),ut(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ut(this,"complete"),ut(this,"abort"),Ir(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ir(this,!0)),Ge.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Tr(this):this.Xa())},r.Xa=function(){Tr(this)};function Tr(u){if(u.h&&typeof l<"u"){if(u.v&&Jn(u)==4)setTimeout(u.Ca.bind(u),0);else if(ut(u,"readystatechange"),Jn(u)==4){u.h=!1;try{const q=u.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=q===0){let ie=String(u.D).match(zl)[1]||null;!ie&&h.self&&h.self.location&&(ie=h.self.location.protocol.slice(0,-1)),T=!ql.test(ie?ie.toLowerCase():"")}_=T}if(_)ut(u,"complete"),ut(u,"success");else{u.o=6;try{var U=Jn(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",oi(u)}}finally{Ir(u)}}}}function Ir(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||ut(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Jn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),xl(m)}};function Hl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function fa(u){const m={};u=(u.g&&Jn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(A(u[T]))continue;var _=Us(u[T]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[U]||[];m[U]=q,q.push(_)}ae(m,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Ws(u){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yn("baseRetryDelayMs",5e3,u),this.Za=Yn("retryDelaySeedMs",1e4,u),this.Ta=Yn("forwardChannelMaxRetries",2,u),this.va=Yn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new zs(u&&u.concurrentRequestLimit),this.Ba=new Xi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ws.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,T){ot(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=ma(this,null,this.W),Sr(this)};function Ks(u){if(Gs(u),u.I==3){var m=u.V++,_=yn(u.J);if(ze(_,"SID",u.M),ze(_,"RID",m),ze(_,"TYPE","terminate"),Zn(u,_),m=new gn(u,u.j,m),m.M=2,m.A=wr(yn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=Kl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Bi(m)}Zi(u)}function un(u){u.g&&(Yi(u),u.g.cancel(),u.g=null)}function Gs(u){un(u),u.v&&(h.clearTimeout(u.v),u.v=null),Qs(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Sr(u){if(!ra(u.h)&&!u.m){u.m=!0;var m=u.Ea;se||I(),de||(se(),de=!0),k.add(m,u),u.D=0}}function Wl(u,m){return qi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Zr(y(u.Ea,u,m),Js(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new gn(this,this.j,u);let q=this.o;if(this.U&&(q?(q=V(q),Se(q,this.U)):q=this.U),this.u!==null||this.R||(U.J=q,q=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=pa(this,U,m),_=yn(this.J),ze(_,"RID",u),ze(_,"CVER",22),this.G&&ze(_,"X-HTTP-Session-Id",this.G),Zn(this,_),q&&(this.R?m="headers="+qn($l(q))+"&"+m:this.u&&Hs(_,this.u,q)),Bs(this.h,U),this.Ra&&ze(_,"TYPE","init"),this.S?(ze(_,"$req",m),ze(_,"SID","null"),U.U=!0,kn(U,_,null)):kn(U,_,m),this.I=2}}else this.I==3&&(u?Ji(this,u):this.i.length==0||ra(this.h)||Ji(this))};function Ji(u,m){var _;m?_=m.l:_=u.V++;const T=yn(u.J);ze(T,"SID",u.M),ze(T,"RID",_),ze(T,"AID",u.K),Zn(u,T),u.u&&u.o&&Hs(T,u.u,u.o),_=new gn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=pa(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Bs(u.h,_),kn(_,T,m)}function Zn(u,m){u.H&&me(u.H,function(_,T){ze(m,T,_)}),u.l&&me({},function(_,T){ze(m,T,_)})}function pa(u,m,_){_=Math.min(u.i.length,_);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var U=u.i;let Re=-1;for(;;){const ct=["count="+_];Re==-1?_>0?(Re=U[0].g,ct.push("ofs="+Re)):Re=0:ct.push("ofs="+Re);let qe=!0;for(let pt=0;pt<_;pt++){var q=U[pt].g;const hn=U[pt].map;if(q-=Re,q<0)Re=Math.max(0,U[pt].g-100),qe=!1;else try{q="req"+q+"_"||"";try{var ie=hn instanceof Map?hn:Object.entries(hn);for(const[Ar,tr]of ie){let nr=tr;f(tr)&&(nr=Qr(tr)),ct.push(q+Ar+"="+encodeURIComponent(nr))}}catch(Ar){throw ct.push(q+"type="+encodeURIComponent("_badmap")),Ar}}catch{T&&T(hn)}}if(qe){ie=ct.join("&");break e}}ie=void 0}return u=u.i.splice(0,_),m.G=u,ie}function Vt(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;se||I(),de||(se(),de=!0),k.add(m,u),u.A=0}}function er(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Zr(y(u.Da,u),Js(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,ai(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Zr(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),un(this),ai(this))};function Yi(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function ai(u){u.g=new gn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=yn(u.na);ze(m,"RID","rpc"),ze(m,"SID",u.M),ze(m,"AID",u.K),ze(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&ze(m,"TO",u.ia),ze(m,"TYPE","xmlhttp"),Zn(u,m),u.u&&u.o&&Hs(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=wr(yn(m)),_.u=null,_.R=!0,ta(_,u)}r.Va=function(){this.C!=null&&(this.C=null,un(this),er(this),ot(19))};function Qs(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Xs(u,m){var _=null;if(u.g==m){Qs(u),Yi(u),u.g=null;var T=2}else if(ia(u.h,m))_=m.G,Hi(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var U=u.D;T=Yr(),ut(T,new Zo(T,_)),Sr(u)}else Vt(u);else if(U=m.m,U==3||U==0&&m.X>0||!(T==1&&Wl(u,m)||T==2&&er(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),U){case 1:cn(u,5);break;case 4:cn(u,10);break;case 3:cn(u,6);break;default:cn(u,2)}}}function Js(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function cn(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),T=u.Ua;const U=!T;T=new Hn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Wi(T,"https"),wr(T),U?Qn(T.toString(),_):Xn(T.toString(),_)}else ot(2);u.I=0,u.l&&u.l.pa(m),Zi(u),Gs(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Zi(u){if(u.I=0,u.ja=[],u.l){const m=on(u.h);(m.length!=0||u.i.length!=0)&&(O(u.ja,m),O(u.ja,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.oa()}}function ma(u,m,_){var T=_ instanceof Hn?yn(_):new Hn(_);if(T.g!="")m&&(T.g=m+"."+T.g),Wn(T,T.u);else{var U=h.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const q=new Hn(null);T&&Wi(q,T),m&&(q.g=m),U&&Wn(q,U),_&&(q.h=_),T=q}return _=u.G,m=u.wa,_&&m&&ze(T,_,m),ze(T,"VER",u.ka),Zn(u,T),T}function Kl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Ge(new Er({ab:_})):new Ge(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gl(){}r=Gl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ys(){}Ys.prototype.g=function(u,m){return new Nt(u,m)};function Nt(u,m){ft.call(this),this.g=new Ws(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!A(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!A(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new li(this)}E(Nt,ft),Nt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){Ks(this.g)},Nt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Qr(u),u=_);m.i.push(new ih(m.Ya++,u)),m.I==3&&Sr(m)},Nt.prototype.N=function(){this.g.l=null,delete this.j,Ks(this.g),delete this.g,Nt.Z.N.call(this)};function Ql(u){Ls.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(Ql,Ls);function Xl(){Yo.call(this),this.status=1}E(Xl,Yo);function li(u){this.g=u}E(li,Gl),li.prototype.ra=function(){ut(this.g,"a")},li.prototype.qa=function(u){ut(this.g,new Ql(u))},li.prototype.pa=function(u){ut(this.g,new Xl)},li.prototype.oa=function(){ut(this.g,"b")},Ys.prototype.createWebChannel=Ys.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,Qv=function(){return new Ys},Gv=function(){return Yr()},Kv=Cn,sf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ti.NO_ERROR=0,ti.TIMEOUT=8,ti.HTTP_ERROR=6,tc=ti,ni.COMPLETE="complete",Wv=ni,Nl.EventType=Jr,Jr.OPEN="a",Jr.CLOSE="b",Jr.ERROR="c",Jr.MESSAGE="d",ft.prototype.listen=ft.prototype.J,Ha=Nl,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,Hv=Ge}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const vy="@firebase/firestore",wy="4.9.2";class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");let zo="12.3.0";const Es=new Nf("@firebase/firestore");function Eo(){return Es.logLevel}function ue(r,...e){if(Es.logLevel<=be.DEBUG){const t=e.map($f);Es.debug(`Firestore (${zo}): ${r}`,...t)}}function Br(r,...e){if(Es.logLevel<=be.ERROR){const t=e.map($f);Es.error(`Firestore (${zo}): ${r}`,...t)}}function Ts(r,...e){if(Es.logLevel<=be.WARN){const t=e.map($f);Es.warn(`Firestore (${zo}): ${r}`,...t)}}function $f(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function we(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Xv(r,i,t)}function Xv(r,e,t){let i=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Br(i),new Error(i)}function $e(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||Xv(e,o,i)}function Ce(r,e){return r}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Jv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zt.UNAUTHENTICATED)))}shutdown(){}}class rA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class iA{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Pi,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},f=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Pi)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($e(typeof i.accessToken=="string",31837,{l:i}),new Jv(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class sA{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oA{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new sA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const i=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ey(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ey(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function lA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}class Mc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=lA(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function De(r,e){return r<e?-1:r>e?1:0}function of(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return Ud(o)===Ud(l)?De(o,l):Ud(o)?1:-1}return De(r.length,e.length)}const uA=55296,cA=57343;function Ud(r){const e=r.charCodeAt(0);return e>=uA&&e<=cA}function No(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}const Ty="__name__";class lr{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=lr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const i=lr.isNumericId(e),o=lr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?lr.extractNumericId(e).compare(lr.extractNumericId(t)):of(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}}class Xe extends lr{construct(e,t,i){return new Xe(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Xe(t)}static emptyPath(){return new Xe([])}}const hA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends lr{construct(e,t,i){return new kt(e,t,i)}static isValidIdentifier(e){return hA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ty}static keyField(){return new kt([Ty])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new le(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(i+=f,o++):(l(),o++)}if(l(),h)throw new le(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(t)}static emptyPath(){return new kt([])}}class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Xe.fromString(e))}static fromName(e){return new ge(Xe.fromString(e).popFirst(5))}static empty(){return new ge(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Xe(e.slice()))}}function Zv(r,e,t){if(!t)throw new le(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ew(r,e,t,i){if(e===!0&&i===!0)throw new le(K.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Iy(r){if(!ge.isDocumentKey(r))throw new le(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Sy(r){if(ge.isDocumentKey(r))throw new le(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function tw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Fc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":we(12329,{type:typeof r})}function Is(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new le(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fc(r);throw new le(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function _t(r,e){const t={typeString:r};return e&&(t.value=e),t}function ml(r,e){if(!tw(r))throw new le(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new le(K.INVALID_ARGUMENT,t);return!0}const Ay=-62135596800,Ry=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ry);return new Je(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ay)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ry}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ml(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ay;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:_t("string",Je._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Je(0,0))}static max(){return new Ae(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const sl=-1;function dA(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new Je(t+1,0):new Je(t,i));return new bi(o,ge.empty(),e)}function fA(r){return new bi(r.readTime,r.key,sl)}class bi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new bi(Ae.min(),ge.empty(),sl)}static max(){return new bi(Ae.max(),ge.empty(),sl)}}function pA(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(r.documentKey,e.documentKey),t!==0?t:De(r.largestBatchId,e.largestBatchId))}const mA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Bo(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==mA)throw r;ue("LocalStore","Unexpectedly lost primary lease")}class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.reject(t)}static resolve(e){return new Q(((t,i)=>{t(e)}))}static reject(e){return new Q(((t,i)=>{i(e)}))}static waitFor(e){return new Q(((t,i)=>{let o=0,l=0,h=!1;e.forEach((f=>{++o,f.next((()=>{++l,h&&l===o&&t()}),(g=>i(g)))})),h=!0,l===o&&t()}))}static or(e){let t=Q.resolve(!1);for(const i of e)t=t.next((o=>o?Q.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new Q(((i,o)=>{const l=e.length,h=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{h[y]=v,++f,f===l&&i(h)}),(v=>o(v)))}}))}static doWhile(e,t){return new Q(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function yA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $o(r){return r.name==="IndexedDbTransactionError"}class Uc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Uc.ce=-1;const qf=-1;function jc(r){return r==null}function _c(r){return r===0&&1/r==-1/0}function _A(r){return typeof r=="number"&&Number.isInteger(r)&&!_c(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const nw="";function vA(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Cy(e)),e=wA(r.get(t),e);return Cy(e)}function wA(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case nw:t+="";break;default:t+=l}}return t}function Cy(r){return r+nw+""}function ky(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Cs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function rw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class it{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wu(this.root,e,this.comparator,!0)}}class Wu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=o??Ot.EMPTY,this.right=l??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ot(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(e){return new Py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class Py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Mn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new Mn([])}unionWith(e){let t=new Tt(kt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class iw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new iw("Invalid base64 string: "+l):l}})(e);return new Pt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const EA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(r){if($e(!!r,39018),typeof r=="string"){let e=0;const t=EA.exec(r);if($e(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dt(r.seconds),nanos:dt(r.nanos)}}function dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Oi(r){return typeof r=="string"?Pt.fromBase64String(r):Pt.fromUint8Array(r)}const sw="server_timestamp",ow="__type__",aw="__previous_value__",lw="__local_write_time__";function Hf(r){return(r?.mapValue?.fields||{})[ow]?.stringValue===sw}function zc(r){const e=r.mapValue.fields[aw];return Hf(e)?zc(e):e}function ol(r){const e=Di(r.mapValue.fields[lw].timestampValue);return new Je(e.seconds,e.nanos)}class TA{constructor(e,t,i,o,l,h,f,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const vc="(default)";class bo{constructor(e,t){this.projectId=e,this.database=t||vc}static empty(){return new bo("","")}get isDefaultDatabase(){return this.database===vc}isEqual(e){return e instanceof bo&&e.projectId===this.projectId&&e.database===this.database}}const uw="__type__",IA="__max__",Ku={mapValue:{}},cw="__vector__",wc="value";function Vi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Hf(r)?4:AA(r)?9007199254740991:SA(r)?10:11:we(28295,{value:r})}function mr(r,e){if(r===e)return!0;const t=Vi(r);if(t!==Vi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ol(r).isEqual(ol(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Di(o.timestampValue),f=Di(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Oi(o.bytesValue).isEqual(Oi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return dt(o.geoPointValue.latitude)===dt(l.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return dt(o.integerValue)===dt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=dt(o.doubleValue),f=dt(l.doubleValue);return h===f?_c(h)===_c(f):isNaN(h)&&isNaN(f)}return!1})(r,e);case 9:return No(r.arrayValue.values||[],e.arrayValue.values||[],mr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(ky(h)!==ky(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!mr(h[g],f[g])))return!1;return!0})(r,e);default:return we(52216,{left:r})}}function al(r,e){return(r.values||[]).find((t=>mr(t,e)))!==void 0}function Do(r,e){if(r===e)return 0;const t=Vi(r),i=Vi(e);if(t!==i)return De(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const f=dt(l.integerValue||l.doubleValue),g=dt(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return xy(r.timestampValue,e.timestampValue);case 4:return xy(ol(r),ol(e));case 5:return of(r.stringValue,e.stringValue);case 6:return(function(l,h){const f=Oi(l),g=Oi(h);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const f=l.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const v=De(f[y],g[y]);if(v!==0)return v}return De(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const f=De(dt(l.latitude),dt(h.latitude));return f!==0?f:De(dt(l.longitude),dt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Ny(r.arrayValue,e.arrayValue);case 10:return(function(l,h){const f=l.fields||{},g=h.fields||{},y=f[wc]?.arrayValue,v=g[wc]?.arrayValue,E=De(y?.values?.length||0,v?.values?.length||0);return E!==0?E:Ny(y,v)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Ku.mapValue&&h===Ku.mapValue)return 0;if(l===Ku.mapValue)return 1;if(h===Ku.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=h.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const C=of(g[E],v[E]);if(C!==0)return C;const z=Do(f[g[E]],y[v[E]]);if(z!==0)return z}return De(g.length,v.length)})(r.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function xy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const t=Di(r),i=Di(e),o=De(t.seconds,i.seconds);return o!==0?o:De(t.nanos,i.nanos)}function Ny(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Do(t[o],i[o]);if(l)return l}return De(t.length,i.length)}function Oo(r){return af(r)}function af(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Di(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Oi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ge.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=af(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${af(t.fields[h])}`;return o+"}"})(r.mapValue):we(61005,{value:r})}function nc(r){switch(Vi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zc(r);return e?16+nc(e):16;case 5:return 2*r.stringValue.length;case 6:return Oi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+nc(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Cs(i.fields,((l,h)=>{o+=l.length+nc(h)})),o})(r.mapValue);default:throw we(13486,{value:r})}}function by(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function lf(r){return!!r&&"integerValue"in r}function Wf(r){return!!r&&"arrayValue"in r}function Dy(r){return!!r&&"nullValue"in r}function Oy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function rc(r){return!!r&&"mapValue"in r}function SA(r){return(r?.mapValue?.fields||{})[uw]?.stringValue===cw}function Ja(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Cs(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ja(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ja(r.arrayValue.values[t]);return e}return{...r}}function AA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===IA}class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ja(t)}setAll(e){let t=kt.emptyPath(),i={},o=[];e.forEach(((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=f.popLast()}h?i[f.lastSegment()]=Ja(h):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];rc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Cs(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Sn(Ja(this.value))}}function hw(r){const e=[];return Cs(r.fields,((t,i)=>{const o=new kt([t]);if(rc(i)){const l=hw(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new Mn(e)}class Bt{constructor(e,t,i,o,l,h,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Bt(e,0,Ae.min(),Ae.min(),Ae.min(),Sn.empty(),0)}static newFoundDocument(e,t,i,o){return new Bt(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new Bt(e,2,t,Ae.min(),Ae.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,Ae.min(),Ae.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ec{constructor(e,t){this.position=e,this.inclusive=t}}function Vy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=ge.comparator(ge.fromName(h.referenceValue),t.key):i=Do(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ly(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!mr(r.position[t],e.position[t]))return!1;return!0}class Tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function RA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class dw{}class yt extends dw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new kA(e,t,i):t==="array-contains"?new NA(e,i):t==="in"?new bA(e,i):t==="not-in"?new DA(e,i):t==="array-contains-any"?new OA(e,i):new yt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new PA(e,i):new xA(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Do(t,this.value)):t!==null&&Vi(this.value)===Vi(t)&&this.matchesComparison(Do(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zn extends dw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zn(e,t)}matches(e){return fw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fw(r){return r.op==="and"}function pw(r){return CA(r)&&fw(r)}function CA(r){for(const e of r.filters)if(e instanceof zn)return!1;return!0}function uf(r){if(r instanceof yt)return r.field.canonicalString()+r.op.toString()+Oo(r.value);if(pw(r))return r.filters.map((e=>uf(e))).join(",");{const e=r.filters.map((t=>uf(t))).join(",");return`${r.op}(${e})`}}function mw(r,e){return r instanceof yt?(function(i,o){return o instanceof yt&&i.op===o.op&&i.field.isEqual(o.field)&&mr(i.value,o.value)})(r,e):r instanceof zn?(function(i,o){return o instanceof zn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,f)=>l&&mw(h,o.filters[f])),!0):!1})(r,e):void we(19439)}function gw(r){return r instanceof yt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Oo(t.value)}`})(r):r instanceof zn?(function(t){return t.op.toString()+" {"+t.getFilters().map(gw).join(" ,")+"}"})(r):"Filter"}class kA extends yt{constructor(e,t,i){super(e,t,i),this.key=ge.fromName(i.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class PA extends yt{constructor(e,t){super(e,"in",t),this.keys=yw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class xA extends yt{constructor(e,t){super(e,"not-in",t),this.keys=yw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yw(r,e){return(e.arrayValue?.values||[]).map((t=>ge.fromName(t.referenceValue)))}class NA extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wf(t)&&al(t.arrayValue,this.value)}}class bA extends yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&al(this.value.arrayValue,t)}}class DA extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!al(this.value.arrayValue,t)}}class OA extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>al(this.value.arrayValue,i)))}}class VA{constructor(e,t=null,i=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.Te=null}}function My(r,e=null,t=[],i=[],o=null,l=null,h=null){return new VA(r,e,t,i,o,l,h)}function Kf(r){const e=Ce(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>uf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),jc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Oo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Oo(i))).join(",")),e.Te=t}return e.Te}function Gf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!RA(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!mw(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ly(r.startAt,e.startAt)&&Ly(r.endAt,e.endAt)}function cf(r){return ge.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class gl{constructor(e,t=null,i=[],o=[],l=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function LA(r,e,t,i,o,l,h,f){return new gl(r,e,t,i,o,l,h,f)}function _w(r){return new gl(r)}function Fy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function vw(r){return r.collectionGroup!==null}function Ya(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new Tt(kt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Tc(l,i))})),t.has(kt.keyField().canonicalString())||e.Ie.push(new Tc(kt.keyField(),i))}return e.Ie}function dr(r){const e=Ce(r);return e.Ee||(e.Ee=MA(e,Ya(r))),e.Ee}function MA(r,e){if(r.limitType==="F")return My(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Tc(o.field,l)}));const t=r.endAt?new Ec(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Ec(r.startAt.position,r.startAt.inclusive):null;return My(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function hf(r,e){const t=r.filters.concat([e]);return new gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function df(r,e,t){return new gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Bc(r,e){return Gf(dr(r),dr(e))&&r.limitType===e.limitType}function ww(r){return`${Kf(dr(r))}|lt:${r.limitType}`}function To(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>gw(o))).join(", ")}]`),jc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Oo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Oo(o))).join(",")),`Target(${i})`})(dr(r))}; limitType=${r.limitType})`}function $c(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ge.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Ya(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,f,g){const y=Vy(h,f,g);return h.inclusive?y<=0:y<0})(i.startAt,Ya(i),o)||i.endAt&&!(function(h,f,g){const y=Vy(h,f,g);return h.inclusive?y>=0:y>0})(i.endAt,Ya(i),o))})(r,e)}function FA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Ew(r){return(e,t)=>{let i=!1;for(const o of Ya(r)){const l=UA(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function UA(r,e,t){const i=r.field.isKeyField()?ge.comparator(e.key,t.key):(function(l,h,f){const g=h.data.field(l),y=f.data.field(l);return g!==null&&y!==null?Do(g,y):we(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:r.dir})}}class ks{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return rw(this.inner)}size(){return this.innerSize}}const jA=new it(ge.comparator);function $r(){return jA}const Tw=new it(ge.comparator);function Wa(...r){let e=Tw;for(const t of r)e=e.insert(t.key,t);return e}function Iw(r){let e=Tw;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ps(){return Za()}function Sw(){return Za()}function Za(){return new ks((r=>r.toString()),((r,e)=>r.isEqual(e)))}const zA=new it(ge.comparator),BA=new Tt(ge.comparator);function Oe(...r){let e=BA;for(const t of r)e=e.add(t);return e}const $A=new Tt(De);function qA(){return $A}function Qf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_c(e)?"-0":e}}function Aw(r){return{integerValue:""+r}}function HA(r,e){return _A(e)?Aw(e):Qf(r,e)}class qc{constructor(){this._=void 0}}function WA(r,e,t){return r instanceof Ic?(function(o,l){const h={fields:{[ow]:{stringValue:sw},[lw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Hf(l)&&(l=zc(l)),l&&(h.fields[aw]=l),{mapValue:h}})(t,e):r instanceof ll?Cw(r,e):r instanceof ul?kw(r,e):(function(o,l){const h=Rw(o,l),f=Uy(h)+Uy(o.Ae);return lf(h)&&lf(o.Ae)?Aw(f):Qf(o.serializer,f)})(r,e)}function KA(r,e,t){return r instanceof ll?Cw(r,e):r instanceof ul?kw(r,e):t}function Rw(r,e){return r instanceof Sc?(function(i){return lf(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Ic extends qc{}class ll extends qc{constructor(e){super(),this.elements=e}}function Cw(r,e){const t=Pw(e);for(const i of r.elements)t.some((o=>mr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class ul extends qc{constructor(e){super(),this.elements=e}}function kw(r,e){let t=Pw(e);for(const i of r.elements)t=t.filter((o=>!mr(o,i)));return{arrayValue:{values:t}}}class Sc extends qc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Uy(r){return dt(r.integerValue||r.doubleValue)}function Pw(r){return Wf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function GA(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof ll&&o instanceof ll||i instanceof ul&&o instanceof ul?No(i.elements,o.elements,mr):i instanceof Sc&&o instanceof Sc?mr(i.Ae,o.Ae):i instanceof Ic&&o instanceof Ic})(r.transform,e.transform)}class QA{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ic(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Hc{}function xw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Xf(r.key,fr.none()):new yl(r.key,r.data,fr.none());{const t=r.data,i=Sn.empty();let o=new Tt(kt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ps(r.key,i,new Mn(o.toArray()),fr.none())}}function XA(r,e,t){r instanceof yl?(function(o,l,h){const f=o.value.clone(),g=zy(o.fieldTransforms,l,h.transformResults);f.setAll(g),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Ps?(function(o,l,h){if(!ic(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=zy(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(Nw(o)),g.setAll(f),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function el(r,e,t,i){return r instanceof yl?(function(l,h,f,g){if(!ic(l.precondition,h))return f;const y=l.value.clone(),v=By(l.fieldTransforms,g,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,i):r instanceof Ps?(function(l,h,f,g){if(!ic(l.precondition,h))return f;const y=By(l.fieldTransforms,g,h),v=h.data;return v.setAll(Nw(l)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,i):(function(l,h,f){return ic(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f})(r,e,t)}function JA(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=Rw(i.transform,o||null);l!=null&&(t===null&&(t=Sn.empty()),t.set(i.field,l))}return t||null}function jy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&No(i,o,((l,h)=>GA(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yl extends Hc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ps extends Hc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Nw(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function zy(r,e,t){const i=new Map;$e(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);i.set(l.field,KA(h,f,t[o]))}return i}function By(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,WA(l,h,e))}return i}class Xf extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YA extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ZA{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&XA(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=el(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=el(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Sw();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const g=xw(h,f);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,((t,i)=>jy(t,i)))&&No(this.baseMutations,e.baseMutations,((t,i)=>jy(t,i)))}}class Jf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){$e(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return zA})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Jf(e,t,i,o)}}class eR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class tR{constructor(e,t){this.count=e,this.unchangedNames=t}}var gt,Me;function nR(r){switch(r){case K.OK:return we(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return we(15467,{code:r})}}function bw(r){if(r===void 0)return Br("GRPC error has no .code"),K.UNKNOWN;switch(r){case gt.OK:return K.OK;case gt.CANCELLED:return K.CANCELLED;case gt.UNKNOWN:return K.UNKNOWN;case gt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case gt.INTERNAL:return K.INTERNAL;case gt.UNAVAILABLE:return K.UNAVAILABLE;case gt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case gt.NOT_FOUND:return K.NOT_FOUND;case gt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case gt.ABORTED:return K.ABORTED;case gt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case gt.DATA_LOSS:return K.DATA_LOSS;default:return we(39323,{code:r})}}(Me=gt||(gt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";function rR(){return new TextEncoder}const iR=new ki([4294967295,4294967295],0);function $y(r){const e=rR().encode(r),t=new qv;return t.update(e),new Uint8Array(t.digest())}function qy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ki([t,i],0),new ki([o,l],0)]}class Yf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ka(`Invalid padding: ${t}`);if(i<0)throw new Ka(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ki.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(ki.fromNumber(i)));return o.compare(iR)===1&&(o=new ki([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=$y(e),[i,o]=qy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Yf(l,o,t);return i.forEach((f=>h.insert(f))),h}insert(e){if(this.ge===0)return;const t=$y(e),[i,o]=qy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,_l.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Wc(Ae.min(),o,new it(De),$r(),Oe())}}class _l{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new _l(i,t,Oe(),Oe(),Oe())}}class sc{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Dw{constructor(e,t){this.targetId=e,this.Ce=t}}class Ow{constructor(e,t,i=Pt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Hy{constructor(){this.ve=0,this.Fe=Wy(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),i=Oe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:l})}})),new _l(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Wy()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sR{constructor(e){this.Ge=e,this.ze=new Map,this.je=$r(),this.Je=Gu(),this.He=Gu(),this.Ye=new it(De)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(cf(l))if(i===0){const h=new ge(l.path);this.et(t,h,Bt.newNoDocument(h,Ae.min()))}else $e(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const f=this.ut(e),g=f?this.ct(f,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=Oi(i).toUint8Array()}catch(g){if(g instanceof iw)return Ts("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Yf(h,o,l)}catch(g){return Ts(g instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const f=this.ot(h);if(f){if(l.current&&cf(f.target)){const g=new ge(f.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Bt.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let i=Oe();this.He.forEach(((l,h)=>{let f=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Wc(e,t,this.Ye,this.je,i);return this.je=$r(),this.Je=Gu(),this.He=Gu(),this.Ye=new it(De),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Hy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Tt(De),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Tt(De),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Hy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gu(){return new it(ge.comparator)}function Wy(){return new it(ge.comparator)}const oR={asc:"ASCENDING",desc:"DESCENDING"},aR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lR={and:"AND",or:"OR"};class uR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ff(r,e){return r.useProto3Json||jc(e)?e:{value:e}}function Ac(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vw(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function cR(r,e){return Ac(r,e.toTimestamp())}function pr(r){return $e(!!r,49232),Ae.fromTimestamp((function(t){const i=Di(t);return new Je(i.seconds,i.nanos)})(r))}function Zf(r,e){return pf(r,e).canonicalString()}function pf(r,e){const t=(function(o){return new Xe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Lw(r){const e=Xe.fromString(r);return $e(zw(e),10190,{key:e.toString()}),e}function mf(r,e){return Zf(r.databaseId,e.path)}function jd(r,e){const t=Lw(e);if(t.get(1)!==r.databaseId.projectId)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ge(Fw(t))}function Mw(r,e){return Zf(r.databaseId,e)}function hR(r){const e=Lw(r);return e.length===4?Xe.emptyPath():Fw(e)}function gf(r){return new Xe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Fw(r){return $e(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Ky(r,e,t){return{name:mf(r,e),fields:t.value.mapValue.fields}}function dR(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:we(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?($e(v===void 0||typeof v=="string",58123),Pt.fromBase64String(v||"")):($e(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Pt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&(function(y){const v=y.code===void 0?K.UNKNOWN:bw(y.code);return new le(v,y.message||"")})(h);t=new Ow(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=jd(r,i.document.name),l=pr(i.document.updateTime),h=i.document.createTime?pr(i.document.createTime):Ae.min(),f=new Sn({mapValue:{fields:i.document.fields}}),g=Bt.newFoundDocument(o,l,h,f),y=i.targetIds||[],v=i.removedTargetIds||[];t=new sc(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=jd(r,i.document),l=i.readTime?pr(i.readTime):Ae.min(),h=Bt.newNoDocument(o,l),f=i.removedTargetIds||[];t=new sc([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=jd(r,i.document),l=i.removedTargetIds||[];t=new sc([],l,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new tR(o,l),f=i.targetId;t=new Dw(f,h)}}return t}function fR(r,e){let t;if(e instanceof yl)t={update:Ky(r,e.key,e.value)};else if(e instanceof Xf)t={delete:mf(r,e.key)};else if(e instanceof Ps)t={update:Ky(r,e.key,e.data),updateMask:TR(e.fieldMask)};else{if(!(e instanceof YA))return we(16599,{Vt:e.type});t={verify:mf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const f=h.transform;if(f instanceof Ic)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ll)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ul)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Sc)return{fieldPath:h.field.canonicalString(),increment:f.Ae};throw we(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:cR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(r,e.precondition)),t}function pR(r,e){return r&&r.length>0?($e(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?pr(o.updateTime):pr(l);return h.isEqual(Ae.min())&&(h=pr(l)),new QA(h,o.transformResults||[])})(t,e)))):[]}function mR(r,e){return{documents:[Mw(r,e.path)]}}function gR(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Mw(r,o);const l=(function(y){if(y.length!==0)return jw(zn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((v=>(function(C){return{field:Io(C.field),direction:vR(C.dir)}})(v)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=ff(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function yR(r){let e=hR(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){$e(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const C=Uw(E);return C instanceof zn&&pw(C)?C.getFilters():[C]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((C=>(function(O){return new Tc(So(O.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(C)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let C;return C=typeof E=="object"?E.value:E,jc(C)?null:C})(t.limit));let g=null;t.startAt&&(g=(function(E){const C=!!E.before,z=E.values||[];return new Ec(z,C)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const C=!E.before,z=E.values||[];return new Ec(z,C)})(t.endAt)),LA(e,o,h,l,f,"F",g,y)}function _R(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Uw(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=So(t.unaryFilter.field);return yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=So(t.unaryFilter.field);return yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=So(t.unaryFilter.field);return yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=So(t.unaryFilter.field);return yt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(r):r.fieldFilter!==void 0?(function(t){return yt.create(So(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return zn.create(t.compositeFilter.filters.map((i=>Uw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(r):we(30097,{filter:r})}function vR(r){return oR[r]}function wR(r){return aR[r]}function ER(r){return lR[r]}function Io(r){return{fieldPath:r.canonicalString()}}function So(r){return kt.fromServerFormat(r.fieldPath)}function jw(r){return r instanceof yt?(function(t){if(t.op==="=="){if(Oy(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NAN"}};if(Dy(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Oy(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NOT_NAN"}};if(Dy(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(t.field),op:wR(t.op),value:t.value}}})(r):r instanceof zn?(function(t){const i=t.getFilters().map((o=>jw(o)));return i.length===1?i[0]:{compositeFilter:{op:ER(t.op),filters:i}}})(r):we(54877,{filter:r})}function TR(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function zw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Si{constructor(e,t,i,o,l=Ae.min(),h=Ae.min(),f=Pt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class IR{constructor(e){this.yt=e}}function SR(r){const e=yR({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?df(e,e.limit,"L"):e}class AR{constructor(){this.Cn=new RR}addToCollectionParentIndex(e,t){return this.Cn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(bi.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(bi.min())}updateCollectionGroup(e,t,i){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class RR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Tt(Xe.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Tt(Xe.comparator)).toArray()}}const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bw=41943040;class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(Bw,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);class Vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vo(0)}static cr(){return new Vo(-1)}}const Qy="LruGarbageCollector",CR=1048576;function Xy([r,e],[t,i]){const o=De(r,t);return o===0?De(e,i):o}class kR{constructor(e){this.Ir=e,this.buffer=new Tt(Xy),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Xy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Qy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$o(t)?ue(Qy,"Ignoring IndexedDB error during garbage collection: ",t):await Bo(t)}await this.Vr(3e5)}))}}class xR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(Uc.ce);const i=new kR(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Gy)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,h,f,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),Eo()<=be.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function NR(r,e){return new xR(r,e)}class bR{constructor(){this.changes=new ks((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class OR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&el(i.mutation,o,Mn.empty(),Je.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Oe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Oe()){const o=ps();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Wa();return l.forEach(((f,g)=>{h=h.insert(f,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=ps();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Oe())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,f)=>{t.set(h,f)}))}))}computeViews(e,t,i,o){let l=$r();const h=Za(),f=(function(){return Za()})();return t.forEach(((g,y)=>{const v=i.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Ps)?l=l.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),el(v.mutation,y,v.mutation.getFieldMask(),Je.now())):h.set(y.key,Mn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>h.set(y,v))),t.forEach(((y,v)=>f.set(y,new DR(v,h.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Za();let o=new it(((h,f)=>h-f)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const f of h)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=i.get(g)||Mn.empty();v=f.applyToLocalView(y,v),i.set(g,v);const E=(o.get(f.batchId)||Oe()).add(g);o=o.insert(f.batchId,E)}))})).next((()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,v=g.value,E=Sw();v.forEach((C=>{if(!l.has(C)){const z=xw(t.get(C),i.get(C));z!==null&&E.set(C,z),l=l.add(C)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return Q.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return ge.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Q.resolve(ps());let f=sl,g=l;return h.next((y=>Q.forEach(y,((v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?Q.resolve():this.remoteDocumentCache.getEntry(e,v).next((C=>{g=g.insert(v,C)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Oe()))).next((v=>({batchId:f,changes:Iw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next((i=>{let o=Wa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Wa();return this.indexManager.getCollectionParents(e,l).next((f=>Q.forEach(f,(g=>{const y=(function(E,C){return new gl(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((v=>{v.forEach(((E,C)=>{h=h.insert(E,C)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((g,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,Bt.newInvalidDocument(v)))}));let f=Wa();return h.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&el(v.mutation,y,Mn.empty(),Je.now()),$c(t,y)&&(f=f.insert(g,y))})),f}))}}class VR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:pr(o.createTime)}})(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:SR(o.bundledQuery),readTime:pr(o.readTime)}})(t)),Q.resolve()}}class LR{constructor(){this.overlays=new it(ge.comparator),this.qr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ps();return Q.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),Q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),Q.resolve()}getOverlaysForCollection(e,t,i){const o=ps(),l=t.length+1,h=new ge(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>i&&o.set(g.getKey(),g)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new it(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=l.get(y.largestBatchId);v===null&&(v=ps(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=ps(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=o)););return Q.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new eR(t,i));let l=this.qr.get(t);l===void 0&&(l=Oe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}class MR{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}class ep{constructor(){this.Qr=new Tt(Ct.$r),this.Ur=new Tt(Ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ct(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ct(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ge(new Xe([])),i=new Ct(t,e),o=new Ct(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ge(new Xe([])),i=new Ct(t,e),o=new Ct(t,e+1);let l=Oe();return this.Ur.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new Ct(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ct{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ge.comparator(e.key,t.key)||De(e.Yr,t.Yr)}static Kr(e,t){return De(e.Yr,t.Yr)||ge.comparator(e.key,t.key)}}class FR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Tt(Ct.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new ZA(l,t,i,o);this.mutationQueue.push(h);for(const f of o)this.Zr=this.Zr.add(new Ct(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Q.resolve(h)}lookupMutationBatch(e,t){return Q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return Q.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?qf:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ct(t,0),o=new Ct(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(h=>{const f=this.Xr(h.Yr);l.push(f)})),Q.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Tt(De);return t.forEach((o=>{const l=new Ct(o,0),h=new Ct(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(f=>{i=i.add(f.Yr)}))})),Q.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ge.isDocumentKey(l)||(l=l.child(""));const h=new Ct(new ge(l),0);let f=new Tt(De);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.Yr)),!0)}),h),Q.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){$e(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Q.forEach(t.mutations,(o=>{const l=new Ct(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ct(t,0),o=this.Zr.firstAfterOrEqual(i);return Q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class UR{constructor(e){this.ri=e,this.docs=(function(){return new it(ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Q.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let i=$r();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Bt.newInvalidDocument(o))})),Q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=$r();const h=t.path,f=new ge(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||pA(fA(v),i)<=0||(o.has(v.key)||$c(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return Q.resolve(l)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return Q.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new jR(this)}getSize(e){return Q.resolve(this.size)}}class jR extends bR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),Q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class zR{constructor(e){this.persistence=e,this.si=new ks((t=>Kf(t)),Gf),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new ep,this.targetCount=0,this.ai=Vo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),Q.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Vo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Pr(t),Q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((h,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),Q.waitFor(l).next((()=>o))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return Q.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),Q.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),Q.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return Q.resolve(i)}containsKey(e,t){return Q.resolve(this._i.containsKey(t))}}class $w{constructor(e,t){this.ui={},this.overlays={},this.ci=new Uc(0),this.li=!1,this.li=!0,this.hi=new MR,this.referenceDelegate=e(this),this.Pi=new zR(this),this.indexManager=new AR,this.remoteDocumentCache=(function(o){return new UR(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new IR(t),this.Ii=new VR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new FR(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const o=new BR(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return Q.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class BR extends gA{constructor(e){super(),this.currentSequenceNumber=e}}class tp{constructor(e){this.persistence=e,this.Ri=new ep,this.Vi=null}static mi(e){return new tp(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),Q.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,(i=>{const o=ge.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Rc{constructor(e,t){this.persistence=e,this.pi=new ks((i=>vA(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=NR(this,t)}static mi(e,t){return new Rc(e,t)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return Q.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?Q.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((f=>{f||(i++,l.removeEntry(h,Ae.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nc(e.data.value)),t}br(e,t,i){return Q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class np{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Oe(),o=Oe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new np(e,t.fromCache,i,o)}}class $R{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class qR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return OT()?8:yA(qt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new $R;return this.Ss(e,t,h).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,h,f.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Eo()<=be.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",To(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(Eo()<=be.DEBUG&&ue("QueryEngine","Query:",To(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Eo()<=be.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",To(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(t))):Q.resolve())}ys(e,t){if(Fy(t))return Q.resolve(null);let i=dr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=df(t,null,"F"),i=dr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Oe(...l);return this.ps.getDocuments(e,h).next((f=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,h,g.readTime)?this.ys(e,df(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,i,o){return Fy(t)||o.isEqual(Ae.min())?Q.resolve(null):this.ps.getDocuments(e,i).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,i,o)?Q.resolve(null):(Eo()<=be.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),To(t)),this.vs(e,h,t,dA(o,sl)).next((f=>f)))}))}Ds(e,t){let i=new Tt(Ew(e));return t.forEach(((o,l)=>{$c(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Eo()<=be.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",To(t)),this.ps.getDocumentsMatchingQuery(e,t,bi.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}const rp="LocalStore",HR=3e8;class WR{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new it(De),this.xs=new ks((l=>Kf(l)),Gf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function KR(r,e,t,i){return new WR(r,e,t,i)}async function qw(r,e){const t=Ce(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],f=[];let g=Oe();for(const y of o){h.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:f})))}))}))}function GR(r,e){const t=Ce(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,v){const E=y.batch,C=E.keys();let z=Q.resolve();return C.forEach((O=>{z=z.next((()=>v.getEntry(g,O))).next((j=>{const L=y.docVersions.get(O);$e(L!==null,48541),j.version.compareTo(L)<0&&(E.applyToRemoteDocument(j,y),j.isValidDocument()&&(j.setReadTime(y.commitVersion),v.addEntry(j)))}))})),z.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let g=Oe();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Hw(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function QR(r,e){const t=Ce(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((v,E)=>{const C=o.get(E);if(!C)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let z=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?z=z.withResumeToken(Pt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):v.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(v.resumeToken,i)),o=o.insert(E,z),(function(j,L,Z){return j.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=HR?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(C,z,v)&&f.push(t.Pi.updateTargetData(l,z))}));let g=$r(),y=Oe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(XR(l,h,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!i.isEqual(Ae.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(v)}return Q.waitFor(f).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function XR(r,e,t){let i=Oe(),o=Oe();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=$r();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):ue(rp,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function JR(r,e){const t=Ce(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=qf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function YR(r,e){const t=Ce(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,Q.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new Si(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function yf(r,e,t){const i=Ce(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!$o(h))throw h;ue(rp,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Jy(r,e,t){const i=Ce(r);let o=Ae.min(),l=Oe();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,v){const E=Ce(g),C=E.xs.get(v);return C!==void 0?Q.resolve(E.Ms.get(C)):E.Pi.getTargetData(y,v)})(i,h,dr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,f.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:Oe()))).next((f=>(ZR(i,FA(e),f),{documents:f,Qs:l})))))}function ZR(r,e,t){let i=r.Os.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class Yy{constructor(){this.activeTargetIds=qA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eC{constructor(){this.Mo=new Yy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tC{Oo(e){}shutdown(){}}const Zy="ConnectivityMonitor";class e_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(Zy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(Zy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Qu=null;function _f(){return Qu===null?Qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qu++,"0x"+Qu.toString(16)}const zd="RestConnection",nC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===vc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const h=_f(),f=this.zo(e,t.toUriEncodedString());ue(zd,`Sending RPC '${e}' ${h}:`,f,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(f),v=Fo(y);return this.Jo(e,f,g,i,v).then((E=>(ue(zd,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Ts(zd,`RPC '${e}' ${h} failed with error: `,E,"url: ",f,"request:",i),E}))}Ho(e,t,i,o,l,h){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=nC[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class iC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const jt="WebChannelConnection";class sC extends rC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const h=_f();return new Promise(((f,g)=>{const y=new Hv;y.setWithCredentials(!0),y.listenOnce(Wv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case tc.NO_ERROR:const E=y.getResponseJson();ue(jt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),f(E);break;case tc.TIMEOUT:ue(jt,`RPC '${e}' ${h} timed out`),g(new le(K.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:const C=y.getStatus();if(ue(jt,`RPC '${e}' ${h} failed with status:`,C,"response text:",y.getResponseText()),C>0){let z=y.getResponseJson();Array.isArray(z)&&(z=z[0]);const O=z?.error;if(O&&O.status&&O.message){const j=(function(Z){const X=Z.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(X)>=0?X:K.UNKNOWN})(O.status);g(new le(j,O.message))}else g(new le(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new le(K.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ue(jt,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);ue(jt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=_f(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Qv(),f=Gv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const v=l.join("");ue(jt,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=h.createWebChannel(v,g);this.I_(E);let C=!1,z=!1;const O=new iC({Yo:L=>{z?ue(jt,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(C||(ue(jt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),C=!0),ue(jt,`RPC '${e}' stream ${o} sending:`,L),E.send(L))},Zo:()=>E.close()}),j=(L,Z,X)=>{L.listen(Z,(W=>{try{X(W)}catch(te){setTimeout((()=>{throw te}),0)}}))};return j(E,Ha.EventType.OPEN,(()=>{z||(ue(jt,`RPC '${e}' stream ${o} transport opened.`),O.o_())})),j(E,Ha.EventType.CLOSE,(()=>{z||(z=!0,ue(jt,`RPC '${e}' stream ${o} transport closed`),O.a_(),this.E_(E))})),j(E,Ha.EventType.ERROR,(L=>{z||(z=!0,Ts(jt,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),O.a_(new le(K.UNAVAILABLE,"The operation could not be completed")))})),j(E,Ha.EventType.MESSAGE,(L=>{if(!z){const Z=L.data[0];$e(!!Z,16349);const X=Z,W=X?.error||X[0]?.error;if(W){ue(jt,`RPC '${e}' stream ${o} received error:`,W);const te=W.status;let se=(function(I){const R=gt[I];if(R!==void 0)return bw(R)})(te),de=W.message;se===void 0&&(se=K.INTERNAL,de="Unknown error status: "+te+" with message "+W.message),z=!0,O.a_(new le(se,de)),E.close()}else ue(jt,`RPC '${e}' stream ${o} received:`,Z),O.u_(Z)}})),j(f,Kv.STAT_EVENT,(L=>{L.stat===sf.PROXY?ue(jt,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===sf.NOPROXY&&ue(jt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Bd(){return typeof document<"u"?document:null}function Kc(r){return new uR(r,!0)}class Ww{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const t_="PersistentStream";class Kw{constructor(e,t,i,o,l,h,f,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ww(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new le(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(t_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(t_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oC extends Kw{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dR(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?pr(h.readTime):Ae.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=gf(this.serializer),t.addTarget=(function(l,h){let f;const g=h.target;if(f=cf(g)?{documents:mR(l,g)}:{query:gR(l,g).ft},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=Vw(l,h.resumeToken);const y=ff(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ae.min())>0){f.readTime=Ac(l,h.snapshotVersion.toTimestamp());const y=ff(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const i=_R(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=gf(this.serializer),t.removeTarget=e,this.q_(t)}}class aC extends Kw{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=pR(e.writeResults,e.commitTime),i=pr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=gf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>fR(this.serializer,i)))};this.q_(t)}}class lC{}class uC extends lC{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,pf(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(K.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,f])=>this.connection.Ho(e,pf(t,i),o,h,f,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new le(K.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class cC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Br(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ss="RemoteStore";class hC{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{xs(this)&&(ue(Ss,"Restarting streams for network reachability change."),await(async function(g){const y=Ce(g);y.Ea.add(4),await vl(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Gc(y)})(this))}))})),this.Ra=new cC(i,o)}}async function Gc(r){if(xs(r))for(const e of r.da)await e(!0)}async function vl(r){for(const e of r.da)await e(!1)}function Gw(r,e){const t=Ce(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),ap(t)?op(t):qo(t).O_()&&sp(t,e))}function ip(r,e){const t=Ce(r),i=qo(t);t.Ia.delete(e),i.O_()&&Qw(t,e),t.Ia.size===0&&(i.O_()?i.L_():xs(t)&&t.Ra.set("Unknown"))}function sp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qo(r).Y_(e)}function Qw(r,e){r.Va.Ue(e),qo(r).Z_(e)}function op(r){r.Va=new sR({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),qo(r).start(),r.Ra.ua()}function ap(r){return xs(r)&&!qo(r).x_()&&r.Ia.size>0}function xs(r){return Ce(r).Ea.size===0}function Xw(r){r.Va=void 0}async function dC(r){r.Ra.set("Online")}async function fC(r){r.Ia.forEach(((e,t)=>{sp(r,e)}))}async function pC(r,e){Xw(r),ap(r)?(r.Ra.ha(e),op(r)):r.Ra.set("Unknown")}async function mC(r,e,t){if(r.Ra.set("Online"),e instanceof Ow&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.Ia.delete(f),o.Va.removeTarget(f))})(r,e)}catch(i){ue(Ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Cc(r,i)}else if(e instanceof sc?r.Va.Ze(e):e instanceof Dw?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ae.min()))try{const i=await Hw(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const f=l.Va.Tt(h);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,h))}})),f.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(Pt.EMPTY_BYTE_STRING,v.snapshotVersion)),Qw(l,g);const E=new Si(v.target,g,y,v.sequenceNumber);sp(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(i){ue(Ss,"Failed to raise snapshot:",i),await Cc(r,i)}}async function Cc(r,e,t){if(!$o(e))throw e;r.Ea.add(1),await vl(r),r.Ra.set("Offline"),t||(t=()=>Hw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ue(Ss,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Gc(r)}))}function Jw(r,e){return e().catch((t=>Cc(r,t,e)))}async function Qc(r){const e=Ce(r),t=Li(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qf;for(;gC(e);)try{const o=await JR(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,yC(e,o)}catch(o){await Cc(e,o)}Yw(e)&&Zw(e)}function gC(r){return xs(r)&&r.Ta.length<10}function yC(r,e){r.Ta.push(e);const t=Li(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Yw(r){return xs(r)&&!Li(r).x_()&&r.Ta.length>0}function Zw(r){Li(r).start()}async function _C(r){Li(r).ra()}async function vC(r){const e=Li(r);for(const t of r.Ta)e.ea(t.mutations)}async function wC(r,e,t){const i=r.Ta.shift(),o=Jf.from(i,e,t);await Jw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Qc(r)}async function EC(r,e){e&&Li(r).X_&&await(async function(i,o){if((function(h){return nR(h)&&h!==K.ABORTED})(o.code)){const l=i.Ta.shift();Li(i).B_(),await Jw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Qc(i)}})(r,e),Yw(r)&&Zw(r)}async function n_(r,e){const t=Ce(r);t.asyncQueue.verifyOperationInProgress(),ue(Ss,"RemoteStore received new credentials");const i=xs(t);t.Ea.add(3),await vl(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gc(t)}async function TC(r,e){const t=Ce(r);e?(t.Ea.delete(2),await Gc(t)):e||(t.Ea.add(2),await vl(t),t.Ra.set("Unknown"))}function qo(r){return r.ma||(r.ma=(function(t,i,o){const l=Ce(t);return l.sa(),new oC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:dC.bind(null,r),t_:fC.bind(null,r),r_:pC.bind(null,r),H_:mC.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),ap(r)?op(r):r.Ra.set("Unknown")):(await r.ma.stop(),Xw(r))}))),r.ma}function Li(r){return r.fa||(r.fa=(function(t,i,o){const l=Ce(t);return l.sa(),new aC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:_C.bind(null,r),r_:EC.bind(null,r),ta:vC.bind(null,r),na:wC.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Qc(r)):(await r.fa.stop(),r.Ta.length>0&&(ue(Ss,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class lp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,f=new lp(e,t,h,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function up(r,e){if(Br("AsyncQueue",`${e}: ${r}`),$o(r))return new le(K.UNAVAILABLE,`${e}: ${r}`);throw r}class ko{static emptySet(e){return new ko(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ge.comparator(t.key,i.key):(t,i)=>ge.comparator(t.key,i.key),this.keyedMap=Wa(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ko)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ko;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class r_{constructor(){this.ga=new it(ge.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Lo{constructor(e,t,i,o,l,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((f=>{h.push({type:0,doc:f})})),new Lo(e,t,ko.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class IC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class SC{constructor(){this.queries=i_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ce(t),l=o.queries;o.queries=i_(),l.forEach(((h,f)=>{for(const g of f.Sa)g.onError(i)}))})(this,new le(K.ABORTED,"Firestore shutting down"))}}function i_(){return new ks((r=>ww(r)),Bc)}async function AC(r,e){const t=Ce(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new IC,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=up(h,`Initialization of query '${To(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&cp(t)}async function RC(r,e){const t=Ce(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function CC(r,e){const t=Ce(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.Sa)f.Fa(o)&&(i=!0);h.wa=o}}i&&cp(t)}function kC(r,e,t){const i=Ce(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function cp(r){r.Ca.forEach((e=>{e.next()}))}var vf,s_;(s_=vf||(vf={})).Ma="default",s_.Cache="cache";class PC{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Lo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vf.Cache}}class eE{constructor(e){this.key=e}}class tE{constructor(e){this.key=e}}class xC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=Ew(e),this.tu=new ko(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new r_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const C=o.get(v),z=$c(this.query,E)?E:null,O=!!C&&this.mutatedKeys.has(C.key),j=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let L=!1;C&&z?C.data.isEqual(z.data)?O!==j&&(i.track({type:3,doc:z}),L=!0):this.su(C,z)||(i.track({type:2,doc:z}),L=!0,(g&&this.eu(z,g)>0||y&&this.eu(z,y)<0)&&(f=!0)):!C&&z?(i.track({type:0,doc:z}),L=!0):C&&!z&&(i.track({type:1,doc:C}),L=!0,(g||y)&&(f=!0)),L&&(z?(h=h.add(z),l=j?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:h,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,E)=>(function(z,O){const j=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:L})}};return j(z)-j(O)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Lo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new tE(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new eE(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hp="SyncEngine";class NC{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class bC{constructor(e){this.key=e,this.hu=!1}}class DC{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new ks((f=>ww(f)),Bc),this.Iu=new Map,this.Eu=new Set,this.du=new it(ge.comparator),this.Au=new Map,this.Ru=new ep,this.Vu={},this.mu=new Map,this.fu=Vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function OC(r,e,t=!0){const i=aE(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await nE(i,e,t,!0),o}async function VC(r,e){const t=aE(r);await nE(t,e,!0,!1)}async function nE(r,e,t,i){const o=await YR(r.localStore,dr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await LC(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&Gw(r.remoteStore,o),f}async function LC(r,e,t,i,o){r.pu=(E,C,z)=>(async function(j,L,Z,X){let W=L.view.ru(Z);W.Cs&&(W=await Jy(j.localStore,L.query,!1).then((({documents:k})=>L.view.ru(k,W))));const te=X&&X.targetChanges.get(L.targetId),se=X&&X.targetMismatches.get(L.targetId)!=null,de=L.view.applyChanges(W,j.isPrimaryClient,te,se);return a_(j,L.targetId,de.au),de.snapshot})(r,E,C,z);const l=await Jy(r.localStore,e,!0),h=new xC(e,l.Qs),f=h.ru(l.documents),g=_l.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,g);a_(r,t,y.au);const v=new NC(e,t,h);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function MC(r,e,t){const i=Ce(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Bc(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await yf(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&ip(i.remoteStore,o.targetId),wf(i,o.targetId)})).catch(Bo)):(wf(i,o.targetId),await yf(i.localStore,o.targetId,!0))}async function FC(r,e){const t=Ce(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ip(t.remoteStore,i.targetId))}async function UC(r,e,t){const i=WC(r);try{const o=await(function(h,f){const g=Ce(h),y=Je.now(),v=f.reduce(((z,O)=>z.add(O.key)),Oe());let E,C;return g.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let O=$r(),j=Oe();return g.Ns.getEntries(z,v).next((L=>{O=L,O.forEach(((Z,X)=>{X.isValidDocument()||(j=j.add(Z))}))})).next((()=>g.localDocuments.getOverlayedDocuments(z,O))).next((L=>{E=L;const Z=[];for(const X of f){const W=JA(X,E.get(X.key).overlayedDocument);W!=null&&Z.push(new Ps(X.key,W,hw(W.value.mapValue),fr.exists(!0)))}return g.mutationQueue.addMutationBatch(z,y,Z,f)})).next((L=>{C=L;const Z=L.applyToLocalDocumentSet(E,j);return g.documentOverlayCache.saveOverlays(z,L.batchId,Z)}))})).then((()=>({batchId:C.batchId,changes:Iw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,f,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new it(De)),y=y.insert(f,g),h.Vu[h.currentUser.toKey()]=y})(i,o.batchId,t),await wl(i,o.changes),await Qc(i.remoteStore)}catch(o){const l=up(o,"Failed to persist write");t.reject(l)}}async function rE(r,e){const t=Ce(r);try{const i=await QR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?$e(h.hu,14607):o.removedDocuments.size>0&&($e(h.hu,42227),h.hu=!1))})),await wl(t,i,e)}catch(i){await Bo(i)}}function o_(r,e,t){const i=Ce(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const f=h.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(h,f){const g=Ce(h);g.onlineState=f;let y=!1;g.queries.forEach(((v,E)=>{for(const C of E.Sa)C.va(f)&&(y=!0)})),y&&cp(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function jC(r,e,t){const i=Ce(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new it(ge.comparator);h=h.insert(l,Bt.newNoDocument(l,Ae.min()));const f=Oe().add(l),g=new Wc(Ae.min(),new Map,new it(De),h,f);await rE(i,g),i.du=i.du.remove(l),i.Au.delete(e),dp(i)}else await yf(i.localStore,e,!1).then((()=>wf(i,e,t))).catch(Bo)}async function zC(r,e){const t=Ce(r),i=e.batch.batchId;try{const o=await GR(t.localStore,e);sE(t,i,null),iE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await wl(t,o)}catch(o){await Bo(o)}}async function BC(r,e,t){const i=Ce(r);try{const o=await(function(h,f){const g=Ce(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,f).next((E=>($e(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(i.localStore,e);sE(i,e,t),iE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await wl(i,o)}catch(o){await Bo(o)}}function iE(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function sE(r,e,t){const i=Ce(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function wf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||oE(r,i)}))}function oE(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(ip(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),dp(r))}function a_(r,e,t){for(const i of t)i instanceof eE?(r.Ru.addReference(i.key,e),$C(r,i)):i instanceof tE?(ue(hp,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||oE(r,i.key)):we(19791,{wu:i})}function $C(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ue(hp,"New document in limbo: "+t),r.Eu.add(i),dp(r))}function dp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ge(Xe.fromString(e)),i=r.fu.next();r.Au.set(i,new bC(t)),r.du=r.du.insert(t,i),Gw(r.remoteStore,new Si(dr(_w(t.path)),i,"TargetPurposeLimboResolution",Uc.ce))}}async function wl(r,e,t){const i=Ce(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,g)=>{h.push(i.pu(g,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){o.push(y);const v=np.As(g.targetId,y);l.push(v)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(g,y){const v=Ce(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>Q.forEach(y,(C=>Q.forEach(C.Es,(z=>v.persistence.referenceDelegate.addReference(E,C.targetId,z))).next((()=>Q.forEach(C.ds,(z=>v.persistence.referenceDelegate.removeReference(E,C.targetId,z)))))))))}catch(E){if(!$o(E))throw E;ue(rp,"Failed to update sequence numbers: "+E)}for(const E of y){const C=E.targetId;if(!E.fromCache){const z=v.Ms.get(C),O=z.snapshotVersion,j=z.withLastLimboFreeSnapshotVersion(O);v.Ms=v.Ms.insert(C,j)}}})(i.localStore,l))}async function qC(r,e){const t=Ce(r);if(!t.currentUser.isEqual(e)){ue(hp,"User change. New user:",e.toKey());const i=await qw(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new le(K.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await wl(t,i.Ls)}}function HC(r,e){const t=Ce(r),i=t.Au.get(e);if(i&&i.hu)return Oe().add(i.key);{let o=Oe();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const f=t.Tu.get(h);o=o.unionWith(f.view.nu)}return o}}function aE(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=rE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jC.bind(null,e),e.Pu.H_=CC.bind(null,e.eventManager),e.Pu.yu=kC.bind(null,e.eventManager),e}function WC(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BC.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return KR(this.persistence,new qR,e.initialUser,this.serializer)}Cu(e){return new $w(tp.mi,this.serializer)}Du(e){return new eC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class KC extends kc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$e(this.persistence.referenceDelegate instanceof Rc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new PR(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new $w((i=>Rc.mi(i,t)),this.serializer)}}class Ef{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>o_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=qC.bind(null,this.syncEngine),await TC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new SC})()}createDatastore(e){const t=Kc(e.databaseInfo.databaseId),i=(function(l){return new sC(l)})(e.databaseInfo);return(function(l,h,f,g){return new uC(l,h,f,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,f){return new hC(i,o,l,h,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>o_(this.syncEngine,t,0)),(function(){return e_.v()?new e_:new tC})())}createSyncEngine(e,t){return(function(o,l,h,f,g,y,v){const E=new DC(o,l,h,f,g,y);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Ce(t);ue(Ss,"RemoteStore shutting down."),i.Ea.add(5),await vl(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ef.provider={build:()=>new Ef};class GC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Mi="FirestoreClient";class QC{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=Mc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ue(Mi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ue(Mi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=up(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function $d(r,e){r.asyncQueue.verifyOperationInProgress(),ue(Mi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await qw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function l_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await XC(r);ue(Mi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>n_(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>n_(e.remoteStore,o))),r._onlineComponents=e}async function XC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ue(Mi,"Using user provided OfflineComponentProvider");try{await $d(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ts("Error using user provided cache. Falling back to memory cache: "+t),await $d(r,new kc)}}else ue(Mi,"Using default OfflineComponentProvider"),await $d(r,new KC(void 0));return r._offlineComponents}async function lE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ue(Mi,"Using user provided OnlineComponentProvider"),await l_(r,r._uninitializedComponentsProvider._online)):(ue(Mi,"Using default OnlineComponentProvider"),await l_(r,new Ef))),r._onlineComponents}function JC(r){return lE(r).then((e=>e.syncEngine))}async function YC(r){const e=await lE(r),t=e.eventManager;return t.onListen=OC.bind(null,e.syncEngine),t.onUnlisten=MC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=VC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FC.bind(null,e.syncEngine),t}function ZC(r,e,t={}){const i=new Pi;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,f,g,y){const v=new GC({next:C=>{v.Nu(),h.enqueueAndForget((()=>RC(l,E))),C.fromCache&&g.source==="server"?y.reject(new le(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(C)},error:C=>y.reject(C)}),E=new PC(f,v,{includeMetadataChanges:!0,qa:!0});return AC(l,E)})(await YC(r),r.asyncQueue,e,t,i))),i.promise}function uE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const u_=new Map;const cE="firestore.googleapis.com",c_=!0;class h_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cE,this.ssl=c_}else this.host=e.host,this.ssl=e.ssl??c_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CR)throw new le(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ew("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uE(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Yv;switch(i.type){case"firstParty":return new oA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=u_.get(t);i&&(ue("ComponentProvider","Removing Datastore"),u_.delete(t),i.terminate())})(this),Promise.resolve()}}function hE(r,e,t,i={}){r=Is(r,Xc);const o=Fo(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;o&&(z_(`https://${f}`),B_("Firestore",!0)),l.host!==cE&&l.host!==f&&Ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:o,emulatorOptions:i};if(!vs(g,h)&&(r._setSettings(g),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=zt.MOCK_USER;else{y=AT(i.mockUserToken,r._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new le(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new zt(E)}r._authCredentials=new rA(new Jv(y,v))}}class Ns{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ns(this.firestore,e,this._query)}}class vt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ml(t,vt._jsonSchema))return new vt(e,i||null,new ge(Xe.fromString(t.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:_t("string",vt._jsonSchemaVersion),referencePath:_t("string")};class Ur extends Ns{constructor(e,t,i){super(e,t,_w(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new ge(e))}withConverter(e){return new Ur(this.firestore,e,this._path)}}function Tf(r,e,...t){if(r=Gt(r),Zv("collection","path",e),r instanceof Xc){const i=Xe.fromString(e,...t);return Sy(i),new Ur(r,null,i)}{if(!(r instanceof vt||r instanceof Ur))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Xe.fromString(e,...t));return Sy(i),new Ur(r.firestore,null,i)}}function oc(r,e,...t){if(r=Gt(r),arguments.length===1&&(e=Mc.newId()),Zv("doc","path",e),r instanceof Xc){const i=Xe.fromString(e,...t);return Iy(i),new vt(r,null,new ge(i))}{if(!(r instanceof vt||r instanceof Ur))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Xe.fromString(e,...t));return Iy(i),new vt(r.firestore,r instanceof Ur?r.converter:null,new ge(i))}}const d_="AsyncQueue";class f_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ww(this,"async_queue_retry"),this._c=()=>{const i=Bd();i&&ue(d_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Bd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Pi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$o(e))throw e;ue(d_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Br("INTERNAL UNHANDLED ERROR: ",p_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=lp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:p_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function p_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class El extends Xc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new f_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f_(e),this._firestoreClient=void 0,await e}}}function dE(r,e){const t=W_(),i=vc,o=Df(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=IT("firestore");l&&hE(o,...l)}return o}function fp(r){if(r._terminated)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||ek(r),r._firestoreClient}function ek(r){const e=r._freezeSettings(),t=(function(o,l,h,f){return new TA(o,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,uE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new QC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}class mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mn(Pt.fromBase64String(e))}catch(t){throw new le(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mn(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ml(e,mn._jsonSchema))return mn.fromBase64String(e.bytes)}}mn._jsonSchemaVersion="firestore/bytes/1.0",mn._jsonSchema={type:_t("string",mn._jsonSchemaVersion),bytes:_t("string")};class Jc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pp{constructor(e){this._methodName=e}}class Un{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Un._jsonSchemaVersion}}static fromJSON(e){if(ml(e,Un._jsonSchema))return new Un(e.latitude,e.longitude)}}Un._jsonSchemaVersion="firestore/geoPoint/1.0",Un._jsonSchema={type:_t("string",Un._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};class jn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:jn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ml(e,jn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new jn(e.vectorValues);throw new le(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jn._jsonSchemaVersion="firestore/vectorValue/1.0",jn._jsonSchema={type:_t("string",jn._jsonSchemaVersion),vectorValues:_t("object")};const tk=/^__.*__$/;class nk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new yl(e,this.data,t,this.fieldTransforms)}}function fE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:r})}}class mp{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Pc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fE(this.Ac)&&tk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Kc(e)}Cc(e,t,i,o=!1){return new mp({Ac:e,methodName:t,Dc:i,path:kt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pE(r){const e=r._freezeSettings(),t=Kc(r._databaseId);return new rk(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ik(r,e,t,i,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);yE("Data must be an object, but it was:",h,i);const f=mE(i,h);let g,y;if(l.merge)g=new Mn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const C=ok(e,E,t);if(!h.contains(C))throw new le(K.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);lk(v,C)||v.push(C)}g=new Mn(v),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new nk(new Sn(f),g,y)}function sk(r,e,t,i=!1){return gp(t,r.Cc(i?4:3,e))}function gp(r,e){if(gE(r=Gt(r)))return yE("Unsupported field value:",e,r),mE(r,e);if(r instanceof pp)return(function(i,o){if(!fE(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const f of i){let g=gp(f,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Gt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return HA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Je.fromDate(i);return{timestampValue:Ac(o.serializer,l)}}if(i instanceof Je){const l=new Je(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ac(o.serializer,l)}}if(i instanceof Un)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof mn)return{bytesValue:Vw(o.serializer,i._byteString)};if(i instanceof vt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Zf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof jn)return(function(h,f){return{mapValue:{fields:{[uw]:{stringValue:cw},[wc]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return Qf(f.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Fc(i)}`)})(r,e)}function mE(r,e){const t={};return rw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(r,((i,o)=>{const l=gp(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function gE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Je||r instanceof Un||r instanceof mn||r instanceof vt||r instanceof pp||r instanceof jn)}function yE(r,e,t){if(!gE(t)||!tw(t)){const i=Fc(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function ok(r,e,t){if((e=Gt(e))instanceof Jc)return e._internalPath;if(typeof e=="string")return _E(r,e);throw Pc("Field path arguments must be of type string or ",r,!1,void 0,t)}const ak=new RegExp("[~\\*/\\[\\]]");function _E(r,e,t){if(e.search(ak)>=0)throw Pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Jc(...e.split("."))._internalPath}catch{throw Pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Pc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new le(K.INVALID_ARGUMENT,f+r+g)}function lk(r,e){return r.some((t=>t.isEqual(e)))}class vE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uk extends vE{data(){return super.data()}}function yp(r,e){return typeof e=="string"?_E(r,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}function ck(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new le(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _p{}class wE extends _p{}function If(r,e,...t){let i=[];e instanceof _p&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((g=>g instanceof Yc)).length,f=l.filter((g=>g instanceof Tl)).length;if(h>1||h>0&&f>0)throw new le(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Tl extends wE{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Tl(e,t,i)}_apply(e){const t=this._parse(e);return EE(e._query,t),new Ns(e.firestore,e.converter,hf(e._query,t))}_parse(e){const t=pE(e.firestore);return(function(l,h,f,g,y,v,E){let C;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new le(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){g_(E,v);const O=[];for(const j of E)O.push(m_(g,l,j));C={arrayValue:{values:O}}}else C=m_(g,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||g_(E,v),C=sk(f,h,E,v==="in"||v==="not-in");return yt.create(y,v,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Sf(r,e,t){const i=e,o=yp("where",r);return Tl._create(o,i,t)}class Yc extends _p{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Yc(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:zn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const f=l.getFlattenedFilters();for(const g of f)EE(h,g),h=hf(h,g)})(e._query,t),new Ns(e.firestore,e.converter,hf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function m_(r,e,t){if(typeof(t=Gt(t))=="string"){if(t==="")throw new le(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vw(e)&&t.indexOf("/")!==-1)throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Xe.fromString(t));if(!ge.isDocumentKey(i))throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return by(r,new ge(i))}if(t instanceof vt)return by(r,t._key);throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fc(t)}.`)}function g_(r,e){if(!Array.isArray(r)||r.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EE(r,e){const t=(function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class TE{convertValue(e,t="none"){switch(Vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Cs(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[wc].arrayValue?.values?.map((i=>dt(i.doubleValue)));return new jn(t)}convertGeoPoint(e){return new Un(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=zc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){const t=Di(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Xe.fromString(e);$e(zw(i),9688,{name:e});const o=new bo(i.get(1),i.get(3)),l=new ge(i.popFirst(5));return o.isEqual(t)||Br(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function hk(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Ga{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gs extends vE{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(yp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=gs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",gs._jsonSchema={type:_t("string",gs._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class tl extends gs{data(e={}){return super.data(e)}}class ys{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ga(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new tl(this._firestore,this._userDataWriter,i.key,i,new Ga(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((f=>{const g=new tl(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ga(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new tl(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ga(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),v=h.indexOf(f.doc.key)),{type:dk(f.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ys._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:r})}}ys._jsonSchemaVersion="firestore/querySnapshot/1.0",ys._jsonSchema={type:_t("string",ys._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class fk extends TE{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}function Af(r){r=Is(r,Ns);const e=Is(r.firestore,El),t=fp(e),i=new fk(e);return ck(r._query),ZC(t,r._query).then((o=>new ys(e,i,r,o)))}function ac(r,e,t){r=Is(r,vt);const i=Is(r.firestore,El),o=hk(r.converter,e);return vp(i,[ik(pE(i),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,fr.none())])}function pk(r){return vp(Is(r.firestore,El),[new Xf(r._key,fr.none())])}function vp(r,e){return(function(i,o){const l=new Pi;return i.asyncQueue.enqueueAndForget((async()=>UC(await JC(i),o,l))),l.promise})(fp(r),e)}(function(e,t=!0){(function(o){zo=o})(Uo),Po(new ws("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),f=new El(new iA(i.getProvider("auth-internal")),new aA(h,i.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new le(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bo(y.options.projectId,v)})(h,o),h);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ci(vy,wy,e),Ci(vy,wy,"esm2020")})();const y_=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:TE,Bytes:mn,CollectionReference:Ur,DocumentReference:vt,DocumentSnapshot:gs,FieldPath:Jc,FieldValue:pp,Firestore:El,FirestoreError:le,GeoPoint:Un,Query:Ns,QueryCompositeFilterConstraint:Yc,QueryConstraint:wE,QueryDocumentSnapshot:tl,QueryFieldFilterConstraint:Tl,QuerySnapshot:ys,SnapshotMetadata:Ga,Timestamp:Je,VectorValue:jn,_AutoId:Mc,_ByteString:Pt,_DatabaseId:bo,_DocumentKey:ge,_EmptyAuthCredentialsProvider:Yv,_FieldPath:kt,_cast:Is,_logWarn:Ts,_validateIsNotUsedTogether:ew,collection:Tf,connectFirestoreEmulator:hE,deleteDoc:pk,doc:oc,ensureFirestoreConfigured:fp,executeWrite:vp,getDocs:Af,getFirestore:dE,query:If,setDoc:ac,where:Sf},Symbol.toStringTag,{value:"Module"})),IE=Ee.createContext(void 0);async function mk(){return new Promise(r=>{typeof chrome<"u"&&chrome.storage&&chrome.storage.local?chrome.storage.local.get(["firebaseConfig"],e=>{r(e.firebaseConfig||null)}):r(null)})}const gk=({children:r})=>{const[e,t]=Ee.useState(null),[i,o]=Ee.useState(!0),[l,h]=Ee.useState(null),[f,g]=Ee.useState(null);Ee.useEffect(()=>{let z=null,O;const j=async()=>{const Z=await mk();if(!Z){console.warn("No Firebase config found in extension storage; auth will be disabled until configured"),o(!1);return}try{BI().length||(z=H_(Z));const X=$v(),W=dE();h(X),g(W),O=Cv(X,te=>{t(te),o(!1)})}catch(X){console.error("Firebase initialization error:",X),o(!1)}};j();const L=(Z,X)=>{X==="local"&&Z.firebaseConfig&&j()};return typeof chrome<"u"&&chrome.storage&&chrome.storage.onChanged&&chrome.storage.onChanged.addListener(L),()=>{if(O&&O(),typeof chrome<"u"&&chrome.storage&&chrome.storage.onChanged)try{chrome.storage.onChanged.removeListener(L)}catch{}}},[]);const y=async(z,O,j)=>{if(!l||!f)throw new Error("Firebase not initialized");const Z=(await Iv(l,z,O)).user;await ac(oc(f,"users",Z.uid),{email:z,displayName:j,reputationScore:100,createdAt:new Date,history:[]})},v=async(z,O)=>{if(!l)throw new Error("Firebase not initialized");await Sv(l,z,O)},E=async()=>{if(!l)throw new Error("Firebase not initialized");const z="http://localhost:5000",O="795420729848-ve665gpghdvta98gdrudq26579mo2ke4.apps.googleusercontent.com";try{if(typeof chrome<"u"&&chrome.identity&&chrome.identity.getAuthToken){const j=await new Promise((L,Z)=>{try{chrome.identity.getAuthToken({interactive:!0},X=>{if(chrome.runtime.lastError)return Z(chrome.runtime.lastError);if(!X)return Z(new Error("No token returned from chrome.identity"));L(X)})}catch(X){Z(X)}});if(j){const L=await fetch(`${z}/api/auth/google-to-firebase`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_token:j})});if(!L.ok){const te=await L.text();throw new Error(`Backend error: ${L.status} ${te}`)}const X=(await L.json()).customToken;if(!X)throw new Error("No customToken returned from backend");if(l.signInWithCustomToken)await l.signInWithCustomToken(X);else{const{signInWithCustomToken:te}=await Kd(async()=>{const{signInWithCustomToken:se}=await Promise.resolve().then(()=>nA);return{signInWithCustomToken:se}},void 0);await te(l,X)}const W=l.currentUser;if(!f)throw new Error("Firestore not initialized");if(W){const te=oc(f,"users",W.uid),se=Tf(f,"users"),de=If(se,Sf("email","==",W.email));(await Af(de)).empty&&await ac(te,{email:W.email,displayName:W.displayName||"Google User",reputationScore:100,createdAt:new Date,history:[]})}return}}}catch(j){console.warn("chrome.identity sign-in failed, falling back to popup",j)}try{const j=new ur;if(O)try{j.setCustomParameters({client_id:O})}catch(de){console.warn("Could not set client_id param on provider",de)}const Z=(await jv(l,j)).user;if(!f)throw new Error("Firestore not initialized");const X=oc(f,"users",Z.uid),W=Tf(f,"users"),te=If(W,Sf("email","==",Z.email));(await Af(te)).empty&&await ac(X,{email:Z.email,displayName:Z.displayName||"Google User",reputationScore:100,createdAt:new Date,history:[]})}catch(j){throw console.error("Google sign-in failed:",j),j}};async function C(){if(!l)throw new Error("Firebase not initialized");await kv(l)}return D.jsx(IE.Provider,{value:{user:e,auth:l,db:f,loading:i,signUp:y,signIn:v,signInWithGoogle:E,logout:C},children:r})},Il=()=>{const r=Ee.useContext(IE);if(!r)throw new Error("useAuth must be used within AuthProvider");return r};const yk=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SE=(...r)=>r.filter((e,t,i)=>!!e&&i.indexOf(e)===t).join(" ");var _k={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vk=Ee.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...f},g)=>Ee.createElement("svg",{ref:g,..._k,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:SE("lucide",o),...f},[...h.map(([y,v])=>Ee.createElement(y,v)),...Array.isArray(l)?l:[l]]));const It=(r,e)=>{const t=Ee.forwardRef(({className:i,...o},l)=>Ee.createElement(vk,{ref:l,iconNode:e,className:SE(`lucide-${yk(r)}`,i),...o}));return t.displayName=`${r}`,t};const wk=It("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Ek=It("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Tk=It("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Ik=It("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const Sk=It("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const Ak=It("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Rk=It("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Ck=It("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);const kk=It("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const wp=It("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);const Pk=It("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const xk=It("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Nk=It("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const bk=It("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);const Dk=It("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const Ok=It("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const Vk=It("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Lk=It("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const AE=It("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Mk(){const{signIn:r,signUp:e,signInWithGoogle:t,loading:i}=Il(),[o,l]=Ee.useState("signin"),[h,f]=Ee.useState(""),[g,y]=Ee.useState(""),[v,E]=Ee.useState(""),[C,z]=Ee.useState(!1),[O,j]=Ee.useState(!1),[L,Z]=Ee.useState(""),X=async se=>{se.preventDefault(),Z(""),j(!0);try{await r(h,g)}catch(de){Z(de.message||"Failed to sign in")}finally{j(!1)}},W=async se=>{se.preventDefault(),Z(""),j(!0);try{await e(h,g,v)}catch(de){Z(de.message||"Failed to sign up")}finally{j(!1)}},te=async()=>{Z(""),j(!0);try{await t()}catch(se){Z(se.message||"Failed to sign in with Google")}finally{j(!1)}};return D.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-dark-bg via-gray-900 to-dark-bg flex flex-col items-center justify-center px-4",children:[D.jsx("div",{className:"mb-8",children:D.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-electric-blue to-teal rounded-full flex items-center justify-center shadow-lg shadow-electric-blue/50",children:D.jsx("div",{className:"w-12 h-12 bg-dark-bg rounded-full flex items-center justify-center text-2xl",children:""})})}),D.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"TrueLensAI"}),D.jsx("p",{className:"text-gray-400 text-center mb-8 max-w-xs",children:"Verify news reliability with AI-powered fact-checking"}),L&&D.jsx("div",{className:"w-full max-w-sm mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 text-sm",children:L}),D.jsxs("div",{className:"w-full max-w-sm bg-card-bg backdrop-blur-md border border-white/10 rounded-2xl p-6 shadow-xl",children:[D.jsxs("form",{onSubmit:o==="signin"?X:W,children:[o==="signup"&&D.jsxs("div",{className:"mb-4",children:[D.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Display Name"}),D.jsx("input",{type:"text",value:v,onChange:se=>E(se.target.value),placeholder:"Your name",className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-electric-blue",required:!0})]}),D.jsxs("div",{className:"mb-4",children:[D.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Email"}),D.jsxs("div",{className:"flex items-center px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus-within:ring-2 focus-within:ring-electric-blue",children:[D.jsx(xk,{size:18,className:"text-gray-500 mr-2"}),D.jsx("input",{type:"email",value:h,onChange:se=>f(se.target.value),placeholder:"you@example.com",className:"flex-1 bg-transparent text-white placeholder-gray-500 focus:outline-none",required:!0})]})]}),D.jsxs("div",{className:"mb-6",children:[D.jsx("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Password"}),D.jsxs("div",{className:"flex items-center px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus-within:ring-2 focus-within:ring-electric-blue",children:[D.jsx(Pk,{size:18,className:"text-gray-500 mr-2"}),D.jsx("input",{type:C?"text":"password",value:g,onChange:se=>y(se.target.value),placeholder:"",className:"flex-1 bg-transparent text-white placeholder-gray-500 focus:outline-none",required:!0}),D.jsx("button",{type:"button",onClick:()=>z(!C),className:"text-gray-500 hover:text-gray-400",children:C?D.jsx(Sk,{size:18}):D.jsx(Ak,{size:18})})]})]}),D.jsxs("button",{type:"submit",disabled:O,className:"w-full py-2 px-4 bg-gradient-to-r from-electric-blue to-teal text-white font-semibold rounded-lg hover:shadow-lg hover:shadow-electric-blue/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[O&&D.jsx(wp,{size:18,className:"animate-spin"}),o==="signin"?"Sign In":"Sign Up"]})]}),D.jsxs("div",{className:"my-4 flex items-center gap-2",children:[D.jsx("div",{className:"flex-1 h-px bg-white/10"}),D.jsx("span",{className:"text-gray-400 text-xs",children:"or"}),D.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),D.jsx("button",{onClick:te,disabled:O,className:"w-full py-2 px-4 bg-white/5 border border-white/10 text-white font-semibold rounded-lg hover:bg-white/10 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Sign in with Google"}),D.jsxs("p",{className:"text-center text-gray-400 text-sm mt-4",children:[o==="signin"?"Don't have an account?":"Already have an account?",D.jsx("button",{type:"button",onClick:()=>{l(o==="signin"?"signup":"signin"),Z("")},className:"ml-1 text-electric-blue hover:text-teal transition-colors",children:o==="signin"?"Sign Up":"Sign In"})]})]})]})}function RE(r,e){return function(){return r.apply(e,arguments)}}const{toString:Fk}=Object.prototype,{getPrototypeOf:Ep}=Object,{iterator:Zc,toStringTag:CE}=Symbol,eh=(r=>e=>{const t=Fk.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Bn=r=>(r=r.toLowerCase(),e=>eh(e)===r),th=r=>e=>typeof e===r,{isArray:Ho}=Array,Mo=th("undefined");function Sl(r){return r!==null&&!Mo(r)&&r.constructor!==null&&!Mo(r.constructor)&&rn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const kE=Bn("ArrayBuffer");function Uk(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&kE(r.buffer),e}const jk=th("string"),rn=th("function"),PE=th("number"),Al=r=>r!==null&&typeof r=="object",zk=r=>r===!0||r===!1,lc=r=>{if(eh(r)!=="object")return!1;const e=Ep(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(CE in r)&&!(Zc in r)},Bk=r=>{if(!Al(r)||Sl(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},$k=Bn("Date"),qk=Bn("File"),Hk=Bn("Blob"),Wk=Bn("FileList"),Kk=r=>Al(r)&&rn(r.pipe),Gk=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||rn(r.append)&&((e=eh(r))==="formdata"||e==="object"&&rn(r.toString)&&r.toString()==="[object FormData]"))},Qk=Bn("URLSearchParams"),[Xk,Jk,Yk,Zk]=["ReadableStream","Request","Response","Headers"].map(Bn),eP=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Rl(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let i,o;if(typeof r!="object"&&(r=[r]),Ho(r))for(i=0,o=r.length;i<o;i++)e.call(null,r[i],i,r);else{if(Sl(r))return;const l=t?Object.getOwnPropertyNames(r):Object.keys(r),h=l.length;let f;for(i=0;i<h;i++)f=l[i],e.call(null,r[f],f,r)}}function xE(r,e){if(Sl(r))return null;e=e.toLowerCase();const t=Object.keys(r);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const ms=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,NE=r=>!Mo(r)&&r!==ms;function Rf(){const{caseless:r,skipUndefined:e}=NE(this)&&this||{},t={},i=(o,l)=>{const h=r&&xE(t,l)||l;lc(t[h])&&lc(o)?t[h]=Rf(t[h],o):lc(o)?t[h]=Rf({},o):Ho(o)?t[h]=o.slice():(!e||!Mo(o))&&(t[h]=o)};for(let o=0,l=arguments.length;o<l;o++)arguments[o]&&Rl(arguments[o],i);return t}const tP=(r,e,t,{allOwnKeys:i}={})=>(Rl(e,(o,l)=>{t&&rn(o)?r[l]=RE(o,t):r[l]=o},{allOwnKeys:i}),r),nP=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),rP=(r,e,t,i)=>{r.prototype=Object.create(e.prototype,i),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},iP=(r,e,t,i)=>{let o,l,h;const f={};if(e=e||{},r==null)return e;do{for(o=Object.getOwnPropertyNames(r),l=o.length;l-- >0;)h=o[l],(!i||i(h,r,e))&&!f[h]&&(e[h]=r[h],f[h]=!0);r=t!==!1&&Ep(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},sP=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const i=r.indexOf(e,t);return i!==-1&&i===t},oP=r=>{if(!r)return null;if(Ho(r))return r;let e=r.length;if(!PE(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},aP=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&Ep(Uint8Array)),lP=(r,e)=>{const i=(r&&r[Zc]).call(r);let o;for(;(o=i.next())&&!o.done;){const l=o.value;e.call(r,l[0],l[1])}},uP=(r,e)=>{let t;const i=[];for(;(t=r.exec(e))!==null;)i.push(t);return i},cP=Bn("HTMLFormElement"),hP=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),__=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),dP=Bn("RegExp"),bE=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),i={};Rl(t,(o,l)=>{let h;(h=e(o,l,r))!==!1&&(i[l]=h||o)}),Object.defineProperties(r,i)},fP=r=>{bE(r,(e,t)=>{if(rn(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=r[t];if(rn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},pP=(r,e)=>{const t={},i=o=>{o.forEach(l=>{t[l]=!0})};return Ho(r)?i(r):i(String(r).split(e)),t},mP=()=>{},gP=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function yP(r){return!!(r&&rn(r.append)&&r[CE]==="FormData"&&r[Zc])}const _P=r=>{const e=new Array(10),t=(i,o)=>{if(Al(i)){if(e.indexOf(i)>=0)return;if(Sl(i))return i;if(!("toJSON"in i)){e[o]=i;const l=Ho(i)?[]:{};return Rl(i,(h,f)=>{const g=t(h,o+1);!Mo(g)&&(l[f]=g)}),e[o]=void 0,l}}return i};return t(r,0)},vP=Bn("AsyncFunction"),wP=r=>r&&(Al(r)||rn(r))&&rn(r.then)&&rn(r.catch),DE=((r,e)=>r?setImmediate:e?((t,i)=>(ms.addEventListener("message",({source:o,data:l})=>{o===ms&&l===t&&i.length&&i.shift()()},!1),o=>{i.push(o),ms.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",rn(ms.postMessage)),EP=typeof queueMicrotask<"u"?queueMicrotask.bind(ms):typeof process<"u"&&process.nextTick||DE,TP=r=>r!=null&&rn(r[Zc]),H={isArray:Ho,isArrayBuffer:kE,isBuffer:Sl,isFormData:Gk,isArrayBufferView:Uk,isString:jk,isNumber:PE,isBoolean:zk,isObject:Al,isPlainObject:lc,isEmptyObject:Bk,isReadableStream:Xk,isRequest:Jk,isResponse:Yk,isHeaders:Zk,isUndefined:Mo,isDate:$k,isFile:qk,isBlob:Hk,isRegExp:dP,isFunction:rn,isStream:Kk,isURLSearchParams:Qk,isTypedArray:aP,isFileList:Wk,forEach:Rl,merge:Rf,extend:tP,trim:eP,stripBOM:nP,inherits:rP,toFlatObject:iP,kindOf:eh,kindOfTest:Bn,endsWith:sP,toArray:oP,forEachEntry:lP,matchAll:uP,isHTMLForm:cP,hasOwnProperty:__,hasOwnProp:__,reduceDescriptors:bE,freezeMethods:fP,toObjectSet:pP,toCamelCase:hP,noop:mP,toFiniteNumber:gP,findKey:xE,global:ms,isContextDefined:NE,isSpecCompliantForm:yP,toJSONObject:_P,isAsyncFn:vP,isThenable:wP,setImmediate:DE,asap:EP,isIterable:TP};function ke(r,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}H.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const OE=ke.prototype,VE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{VE[r]={value:r}});Object.defineProperties(ke,VE);Object.defineProperty(OE,"isAxiosError",{value:!0});ke.from=(r,e,t,i,o,l)=>{const h=Object.create(OE);H.toFlatObject(r,h,function(v){return v!==Error.prototype},y=>y!=="isAxiosError");const f=r&&r.message?r.message:"Error",g=e==null&&r?r.code:e;return ke.call(h,f,g,t,i,o),r&&h.cause==null&&Object.defineProperty(h,"cause",{value:r,configurable:!0}),h.name=r&&r.name||"Error",l&&Object.assign(h,l),h};const IP=null;function Cf(r){return H.isPlainObject(r)||H.isArray(r)}function LE(r){return H.endsWith(r,"[]")?r.slice(0,-2):r}function v_(r,e,t){return r?r.concat(e).map(function(o,l){return o=LE(o),!t&&l?"["+o+"]":o}).join(t?".":""):e}function SP(r){return H.isArray(r)&&!r.some(Cf)}const AP=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function nh(r,e,t){if(!H.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=H.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,L){return!H.isUndefined(L[j])});const i=t.metaTokens,o=t.visitor||v,l=t.dots,h=t.indexes,g=(t.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(o))throw new TypeError("visitor must be a function");function y(O){if(O===null)return"";if(H.isDate(O))return O.toISOString();if(H.isBoolean(O))return O.toString();if(!g&&H.isBlob(O))throw new ke("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(O)||H.isTypedArray(O)?g&&typeof Blob=="function"?new Blob([O]):Buffer.from(O):O}function v(O,j,L){let Z=O;if(O&&!L&&typeof O=="object"){if(H.endsWith(j,"{}"))j=i?j:j.slice(0,-2),O=JSON.stringify(O);else if(H.isArray(O)&&SP(O)||(H.isFileList(O)||H.endsWith(j,"[]"))&&(Z=H.toArray(O)))return j=LE(j),Z.forEach(function(W,te){!(H.isUndefined(W)||W===null)&&e.append(h===!0?v_([j],te,l):h===null?j:j+"[]",y(W))}),!1}return Cf(O)?!0:(e.append(v_(L,j,l),y(O)),!1)}const E=[],C=Object.assign(AP,{defaultVisitor:v,convertValue:y,isVisitable:Cf});function z(O,j){if(!H.isUndefined(O)){if(E.indexOf(O)!==-1)throw Error("Circular reference detected in "+j.join("."));E.push(O),H.forEach(O,function(Z,X){(!(H.isUndefined(Z)||Z===null)&&o.call(e,Z,H.isString(X)?X.trim():X,j,C))===!0&&z(Z,j?j.concat(X):[X])}),E.pop()}}if(!H.isObject(r))throw new TypeError("data must be an object");return z(r),e}function w_(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Tp(r,e){this._pairs=[],r&&nh(r,this,e)}const ME=Tp.prototype;ME.append=function(e,t){this._pairs.push([e,t])};ME.toString=function(e){const t=e?function(i){return e.call(this,i,w_)}:w_;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function RP(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function FE(r,e,t){if(!e)return r;const i=t&&t.encode||RP;H.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let l;if(o?l=o(e,t):l=H.isURLSearchParams(e)?e.toString():new Tp(e,t).toString(i),l){const h=r.indexOf("#");h!==-1&&(r=r.slice(0,h)),r+=(r.indexOf("?")===-1?"?":"&")+l}return r}class E_{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(i){i!==null&&e(i)})}}const UE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CP=typeof URLSearchParams<"u"?URLSearchParams:Tp,kP=typeof FormData<"u"?FormData:null,PP=typeof Blob<"u"?Blob:null,xP={isBrowser:!0,classes:{URLSearchParams:CP,FormData:kP,Blob:PP},protocols:["http","https","file","blob","url","data"]},Ip=typeof window<"u"&&typeof document<"u",kf=typeof navigator=="object"&&navigator||void 0,NP=Ip&&(!kf||["ReactNative","NativeScript","NS"].indexOf(kf.product)<0),bP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",DP=Ip&&window.location.href||"http://localhost",OP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ip,hasStandardBrowserEnv:NP,hasStandardBrowserWebWorkerEnv:bP,navigator:kf,origin:DP},Symbol.toStringTag,{value:"Module"})),$t={...OP,...xP};function VP(r,e){return nh(r,new $t.classes.URLSearchParams,{visitor:function(t,i,o,l){return $t.isNode&&H.isBuffer(t)?(this.append(i,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function LP(r){return H.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function MP(r){const e={},t=Object.keys(r);let i;const o=t.length;let l;for(i=0;i<o;i++)l=t[i],e[l]=r[l];return e}function jE(r){function e(t,i,o,l){let h=t[l++];if(h==="__proto__")return!0;const f=Number.isFinite(+h),g=l>=t.length;return h=!h&&H.isArray(o)?o.length:h,g?(H.hasOwnProp(o,h)?o[h]=[o[h],i]:o[h]=i,!f):((!o[h]||!H.isObject(o[h]))&&(o[h]=[]),e(t,i,o[h],l)&&H.isArray(o[h])&&(o[h]=MP(o[h])),!f)}if(H.isFormData(r)&&H.isFunction(r.entries)){const t={};return H.forEachEntry(r,(i,o)=>{e(LP(i),o,t,0)}),t}return null}function FP(r,e,t){if(H.isString(r))try{return(e||JSON.parse)(r),H.trim(r)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(r)}const Cl={transitional:UE,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,l=H.isObject(e);if(l&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return o?JSON.stringify(jE(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return VP(e,this.formSerializer).toString();if((f=H.isFileList(e))||i.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return nh(f?{"files[]":e}:e,g&&new g,this.formSerializer)}}return l||o?(t.setContentType("application/json",!1),FP(e)):e}],transformResponse:[function(e){const t=this.transitional||Cl.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(i&&!this.responseType||o)){const h=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(f){if(h)throw f.name==="SyntaxError"?ke.from(f,ke.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$t.classes.FormData,Blob:$t.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],r=>{Cl.headers[r]={}});const UP=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jP=r=>{const e={};let t,i,o;return r&&r.split(`
`).forEach(function(h){o=h.indexOf(":"),t=h.substring(0,o).trim().toLowerCase(),i=h.substring(o+1).trim(),!(!t||e[t]&&UP[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},T_=Symbol("internals");function Ba(r){return r&&String(r).trim().toLowerCase()}function uc(r){return r===!1||r==null?r:H.isArray(r)?r.map(uc):String(r)}function zP(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(r);)e[i[1]]=i[2];return e}const BP=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function qd(r,e,t,i,o){if(H.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!H.isString(e)){if(H.isString(i))return e.indexOf(i)!==-1;if(H.isRegExp(i))return i.test(e)}}function $P(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function qP(r,e){const t=H.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(r,i+t,{value:function(o,l,h){return this[i].call(this,e,o,l,h)},configurable:!0})})}let sn=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function l(f,g,y){const v=Ba(g);if(!v)throw new Error("header name must be a non-empty string");const E=H.findKey(o,v);(!E||o[E]===void 0||y===!0||y===void 0&&o[E]!==!1)&&(o[E||g]=uc(f))}const h=(f,g)=>H.forEach(f,(y,v)=>l(y,v,g));if(H.isPlainObject(e)||e instanceof this.constructor)h(e,t);else if(H.isString(e)&&(e=e.trim())&&!BP(e))h(jP(e),t);else if(H.isObject(e)&&H.isIterable(e)){let f={},g,y;for(const v of e){if(!H.isArray(v))throw TypeError("Object iterator must return a key-value pair");f[y=v[0]]=(g=f[y])?H.isArray(g)?[...g,v[1]]:[g,v[1]]:v[1]}h(f,t)}else e!=null&&l(t,e,i);return this}get(e,t){if(e=Ba(e),e){const i=H.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return zP(o);if(H.isFunction(t))return t.call(this,o,i);if(H.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ba(e),e){const i=H.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||qd(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function l(h){if(h=Ba(h),h){const f=H.findKey(i,h);f&&(!t||qd(i,i[f],f,t))&&(delete i[f],o=!0)}}return H.isArray(e)?e.forEach(l):l(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const l=t[i];(!e||qd(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const t=this,i={};return H.forEach(this,(o,l)=>{const h=H.findKey(i,l);if(h){t[h]=uc(o),delete t[l];return}const f=e?$P(l):String(l).trim();f!==l&&delete t[l],t[f]=uc(o),i[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return H.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&H.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[T_]=this[T_]={accessors:{}}).accessors,o=this.prototype;function l(h){const f=Ba(h);i[f]||(qP(o,h),i[f]=!0)}return H.isArray(e)?e.forEach(l):l(e),this}};sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(sn.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(i){this[t]=i}}});H.freezeMethods(sn);function Hd(r,e){const t=this||Cl,i=e||t,o=sn.from(i.headers);let l=i.data;return H.forEach(r,function(f){l=f.call(t,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function zE(r){return!!(r&&r.__CANCEL__)}function Wo(r,e,t){ke.call(this,r??"canceled",ke.ERR_CANCELED,e,t),this.name="CanceledError"}H.inherits(Wo,ke,{__CANCEL__:!0});function BE(r,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?r(t):e(new ke("Request failed with status code "+t.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function HP(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function WP(r,e){r=r||10;const t=new Array(r),i=new Array(r);let o=0,l=0,h;return e=e!==void 0?e:1e3,function(g){const y=Date.now(),v=i[l];h||(h=y),t[o]=g,i[o]=y;let E=l,C=0;for(;E!==o;)C+=t[E++],E=E%r;if(o=(o+1)%r,o===l&&(l=(l+1)%r),y-h<e)return;const z=v&&y-v;return z?Math.round(C*1e3/z):void 0}}function KP(r,e){let t=0,i=1e3/e,o,l;const h=(y,v=Date.now())=>{t=v,o=null,l&&(clearTimeout(l),l=null),r(...y)};return[(...y)=>{const v=Date.now(),E=v-t;E>=i?h(y,v):(o=y,l||(l=setTimeout(()=>{l=null,h(o)},i-E)))},()=>o&&h(o)]}const xc=(r,e,t=3)=>{let i=0;const o=WP(50,250);return KP(l=>{const h=l.loaded,f=l.lengthComputable?l.total:void 0,g=h-i,y=o(g),v=h<=f;i=h;const E={loaded:h,total:f,progress:f?h/f:void 0,bytes:g,rate:y||void 0,estimated:y&&f&&v?(f-h)/y:void 0,event:l,lengthComputable:f!=null,[e?"download":"upload"]:!0};r(E)},t)},I_=(r,e)=>{const t=r!=null;return[i=>e[0]({lengthComputable:t,total:r,loaded:i}),e[1]]},S_=r=>(...e)=>H.asap(()=>r(...e)),GP=$t.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,$t.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL($t.origin),$t.navigator&&/(msie|trident)/i.test($t.navigator.userAgent)):()=>!0,QP=$t.hasStandardBrowserEnv?{write(r,e,t,i,o,l,h){if(typeof document>"u")return;const f=[`${r}=${encodeURIComponent(e)}`];H.isNumber(t)&&f.push(`expires=${new Date(t).toUTCString()}`),H.isString(i)&&f.push(`path=${i}`),H.isString(o)&&f.push(`domain=${o}`),l===!0&&f.push("secure"),H.isString(h)&&f.push(`SameSite=${h}`),document.cookie=f.join("; ")},read(r){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function XP(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function JP(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function $E(r,e,t){let i=!XP(e);return r&&(i||t==!1)?JP(r,e):e}const A_=r=>r instanceof sn?{...r}:r;function As(r,e){e=e||{};const t={};function i(y,v,E,C){return H.isPlainObject(y)&&H.isPlainObject(v)?H.merge.call({caseless:C},y,v):H.isPlainObject(v)?H.merge({},v):H.isArray(v)?v.slice():v}function o(y,v,E,C){if(H.isUndefined(v)){if(!H.isUndefined(y))return i(void 0,y,E,C)}else return i(y,v,E,C)}function l(y,v){if(!H.isUndefined(v))return i(void 0,v)}function h(y,v){if(H.isUndefined(v)){if(!H.isUndefined(y))return i(void 0,y)}else return i(void 0,v)}function f(y,v,E){if(E in e)return i(y,v);if(E in r)return i(void 0,y)}const g={url:l,method:l,data:l,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:f,headers:(y,v,E)=>o(A_(y),A_(v),E,!0)};return H.forEach(Object.keys({...r,...e}),function(v){const E=g[v]||o,C=E(r[v],e[v],v);H.isUndefined(C)&&E!==f||(t[v]=C)}),t}const qE=r=>{const e=As({},r);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:l,headers:h,auth:f}=e;if(e.headers=h=sn.from(h),e.url=FE($E(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),f&&h.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),H.isFormData(t)){if($t.hasStandardBrowserEnv||$t.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(H.isFunction(t.getHeaders)){const g=t.getHeaders(),y=["content-type","content-length"];Object.entries(g).forEach(([v,E])=>{y.includes(v.toLowerCase())&&h.set(v,E)})}}if($t.hasStandardBrowserEnv&&(i&&H.isFunction(i)&&(i=i(e)),i||i!==!1&&GP(e.url))){const g=o&&l&&QP.read(l);g&&h.set(o,g)}return e},YP=typeof XMLHttpRequest<"u",ZP=YP&&function(r){return new Promise(function(t,i){const o=qE(r);let l=o.data;const h=sn.from(o.headers).normalize();let{responseType:f,onUploadProgress:g,onDownloadProgress:y}=o,v,E,C,z,O;function j(){z&&z(),O&&O(),o.cancelToken&&o.cancelToken.unsubscribe(v),o.signal&&o.signal.removeEventListener("abort",v)}let L=new XMLHttpRequest;L.open(o.method.toUpperCase(),o.url,!0),L.timeout=o.timeout;function Z(){if(!L)return;const W=sn.from("getAllResponseHeaders"in L&&L.getAllResponseHeaders()),se={data:!f||f==="text"||f==="json"?L.responseText:L.response,status:L.status,statusText:L.statusText,headers:W,config:r,request:L};BE(function(k){t(k),j()},function(k){i(k),j()},se),L=null}"onloadend"in L?L.onloadend=Z:L.onreadystatechange=function(){!L||L.readyState!==4||L.status===0&&!(L.responseURL&&L.responseURL.indexOf("file:")===0)||setTimeout(Z)},L.onabort=function(){L&&(i(new ke("Request aborted",ke.ECONNABORTED,r,L)),L=null)},L.onerror=function(te){const se=te&&te.message?te.message:"Network Error",de=new ke(se,ke.ERR_NETWORK,r,L);de.event=te||null,i(de),L=null},L.ontimeout=function(){let te=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const se=o.transitional||UE;o.timeoutErrorMessage&&(te=o.timeoutErrorMessage),i(new ke(te,se.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,r,L)),L=null},l===void 0&&h.setContentType(null),"setRequestHeader"in L&&H.forEach(h.toJSON(),function(te,se){L.setRequestHeader(se,te)}),H.isUndefined(o.withCredentials)||(L.withCredentials=!!o.withCredentials),f&&f!=="json"&&(L.responseType=o.responseType),y&&([C,O]=xc(y,!0),L.addEventListener("progress",C)),g&&L.upload&&([E,z]=xc(g),L.upload.addEventListener("progress",E),L.upload.addEventListener("loadend",z)),(o.cancelToken||o.signal)&&(v=W=>{L&&(i(!W||W.type?new Wo(null,r,L):W),L.abort(),L=null)},o.cancelToken&&o.cancelToken.subscribe(v),o.signal&&(o.signal.aborted?v():o.signal.addEventListener("abort",v)));const X=HP(o.url);if(X&&$t.protocols.indexOf(X)===-1){i(new ke("Unsupported protocol "+X+":",ke.ERR_BAD_REQUEST,r));return}L.send(l||null)})},ex=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let i=new AbortController,o;const l=function(y){if(!o){o=!0,f();const v=y instanceof Error?y:this.reason;i.abort(v instanceof ke?v:new Wo(v instanceof Error?v.message:v))}};let h=e&&setTimeout(()=>{h=null,l(new ke(`timeout ${e} of ms exceeded`,ke.ETIMEDOUT))},e);const f=()=>{r&&(h&&clearTimeout(h),h=null,r.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),r=null)};r.forEach(y=>y.addEventListener("abort",l));const{signal:g}=i;return g.unsubscribe=()=>H.asap(f),g}},tx=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let i=0,o;for(;i<t;)o=i+e,yield r.slice(i,o),i=o},nx=async function*(r,e){for await(const t of rx(r))yield*tx(t,e)},rx=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},R_=(r,e,t,i)=>{const o=nx(r,e);let l=0,h,f=g=>{h||(h=!0,i&&i(g))};return new ReadableStream({async pull(g){try{const{done:y,value:v}=await o.next();if(y){f(),g.close();return}let E=v.byteLength;if(t){let C=l+=E;t(C)}g.enqueue(new Uint8Array(v))}catch(y){throw f(y),y}},cancel(g){return f(g),o.return()}},{highWaterMark:2})},C_=64*1024,{isFunction:Xu}=H,ix=(({Request:r,Response:e})=>({Request:r,Response:e}))(H.global),{ReadableStream:k_,TextEncoder:P_}=H.global,x_=(r,...e)=>{try{return!!r(...e)}catch{return!1}},sx=r=>{r=H.merge.call({skipUndefined:!0},ix,r);const{fetch:e,Request:t,Response:i}=r,o=e?Xu(e):typeof fetch=="function",l=Xu(t),h=Xu(i);if(!o)return!1;const f=o&&Xu(k_),g=o&&(typeof P_=="function"?(O=>j=>O.encode(j))(new P_):async O=>new Uint8Array(await new t(O).arrayBuffer())),y=l&&f&&x_(()=>{let O=!1;const j=new t($t.origin,{body:new k_,method:"POST",get duplex(){return O=!0,"half"}}).headers.has("Content-Type");return O&&!j}),v=h&&f&&x_(()=>H.isReadableStream(new i("").body)),E={stream:v&&(O=>O.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(O=>{!E[O]&&(E[O]=(j,L)=>{let Z=j&&j[O];if(Z)return Z.call(j);throw new ke(`Response type '${O}' is not supported`,ke.ERR_NOT_SUPPORT,L)})});const C=async O=>{if(O==null)return 0;if(H.isBlob(O))return O.size;if(H.isSpecCompliantForm(O))return(await new t($t.origin,{method:"POST",body:O}).arrayBuffer()).byteLength;if(H.isArrayBufferView(O)||H.isArrayBuffer(O))return O.byteLength;if(H.isURLSearchParams(O)&&(O=O+""),H.isString(O))return(await g(O)).byteLength},z=async(O,j)=>{const L=H.toFiniteNumber(O.getContentLength());return L??C(j)};return async O=>{let{url:j,method:L,data:Z,signal:X,cancelToken:W,timeout:te,onDownloadProgress:se,onUploadProgress:de,responseType:k,headers:I,withCredentials:R="same-origin",fetchOptions:b}=qE(O),x=e||fetch;k=k?(k+"").toLowerCase():"text";let M=ex([X,W&&W.toAbortSignal()],te),A=null;const Le=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let lt;try{if(de&&y&&L!=="get"&&L!=="head"&&(lt=await z(I,Z))!==0){let V=new t(j,{method:"POST",body:Z,duplex:"half"}),G;if(H.isFormData(Z)&&(G=V.headers.get("content-type"))&&I.setContentType(G),V.body){const[Se,Te]=I_(lt,xc(S_(de)));Z=R_(V.body,C_,Se,Te)}}H.isString(R)||(R=R?"include":"omit");const He=l&&"credentials"in t.prototype,We={...b,signal:M,method:L.toUpperCase(),headers:I.normalize().toJSON(),body:Z,duplex:"half",credentials:He?R:void 0};A=l&&new t(j,We);let re=await(l?x(A,b):x(j,We));const me=v&&(k==="stream"||k==="response");if(v&&(se||me&&Le)){const V={};["status","statusText","headers"].forEach(Pe=>{V[Pe]=re[Pe]});const G=H.toFiniteNumber(re.headers.get("content-length")),[Se,Te]=se&&I_(G,xc(S_(se),!0))||[];re=new i(R_(re.body,C_,Se,()=>{Te&&Te(),Le&&Le()}),V)}k=k||"text";let ae=await E[H.findKey(E,k)||"text"](re,O);return!me&&Le&&Le(),await new Promise((V,G)=>{BE(V,G,{data:ae,headers:sn.from(re.headers),status:re.status,statusText:re.statusText,config:O,request:A})})}catch(He){throw Le&&Le(),He&&He.name==="TypeError"&&/Load failed|fetch/i.test(He.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,O,A),{cause:He.cause||He}):ke.from(He,He&&He.code,O,A)}}},ox=new Map,HE=r=>{let e=r&&r.env||{};const{fetch:t,Request:i,Response:o}=e,l=[i,o,t];let h=l.length,f=h,g,y,v=ox;for(;f--;)g=l[f],y=v.get(g),y===void 0&&v.set(g,y=f?new Map:sx(e)),v=y;return y};HE();const Sp={http:IP,xhr:ZP,fetch:{get:HE}};H.forEach(Sp,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const N_=r=>`- ${r}`,ax=r=>H.isFunction(r)||r===null||r===!1;function lx(r,e){r=H.isArray(r)?r:[r];const{length:t}=r;let i,o;const l={};for(let h=0;h<t;h++){i=r[h];let f;if(o=i,!ax(i)&&(o=Sp[(f=String(i)).toLowerCase()],o===void 0))throw new ke(`Unknown adapter '${f}'`);if(o&&(H.isFunction(o)||(o=o.get(e))))break;l[f||"#"+h]=o}if(!o){const h=Object.entries(l).map(([g,y])=>`adapter ${g} `+(y===!1?"is not supported by the environment":"is not available in the build"));let f=t?h.length>1?`since :
`+h.map(N_).join(`
`):" "+N_(h[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return o}const WE={getAdapter:lx,adapters:Sp};function Wd(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Wo(null,r)}function b_(r){return Wd(r),r.headers=sn.from(r.headers),r.data=Hd.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),WE.getAdapter(r.adapter||Cl.adapter,r)(r).then(function(i){return Wd(r),i.data=Hd.call(r,r.transformResponse,i),i.headers=sn.from(i.headers),i},function(i){return zE(i)||(Wd(r),i&&i.response&&(i.response.data=Hd.call(r,r.transformResponse,i.response),i.response.headers=sn.from(i.response.headers))),Promise.reject(i)})}const KE="1.13.2",rh={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{rh[r]=function(i){return typeof i===r||"a"+(e<1?"n ":" ")+r}});const D_={};rh.transitional=function(e,t,i){function o(l,h){return"[Axios v"+KE+"] Transitional option '"+l+"'"+h+(i?". "+i:"")}return(l,h,f)=>{if(e===!1)throw new ke(o(h," has been removed"+(t?" in "+t:"")),ke.ERR_DEPRECATED);return t&&!D_[h]&&(D_[h]=!0,console.warn(o(h," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,h,f):!0}};rh.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function ux(r,e,t){if(typeof r!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const i=Object.keys(r);let o=i.length;for(;o-- >0;){const l=i[o],h=e[l];if(h){const f=r[l],g=f===void 0||h(f,l,r);if(g!==!0)throw new ke("option "+l+" must be "+g,ke.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ke("Unknown option "+l,ke.ERR_BAD_OPTION)}}const cc={assertOptions:ux,validators:rh},ar=cc.validators;let _s=class{constructor(e){this.defaults=e||{},this.interceptors={request:new E_,response:new E_}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=As(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:l}=t;i!==void 0&&cc.assertOptions(i,{silentJSONParsing:ar.transitional(ar.boolean),forcedJSONParsing:ar.transitional(ar.boolean),clarifyTimeoutError:ar.transitional(ar.boolean)},!1),o!=null&&(H.isFunction(o)?t.paramsSerializer={serialize:o}:cc.assertOptions(o,{encode:ar.function,serialize:ar.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),cc.assertOptions(t,{baseUrl:ar.spelling("baseURL"),withXsrfToken:ar.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let h=l&&H.merge(l.common,l[t.method]);l&&H.forEach(["delete","get","head","post","put","patch","common"],O=>{delete l[O]}),t.headers=sn.concat(h,l);const f=[];let g=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(t)===!1||(g=g&&j.synchronous,f.unshift(j.fulfilled,j.rejected))});const y=[];this.interceptors.response.forEach(function(j){y.push(j.fulfilled,j.rejected)});let v,E=0,C;if(!g){const O=[b_.bind(this),void 0];for(O.unshift(...f),O.push(...y),C=O.length,v=Promise.resolve(t);E<C;)v=v.then(O[E++],O[E++]);return v}C=f.length;let z=t;for(;E<C;){const O=f[E++],j=f[E++];try{z=O(z)}catch(L){j.call(this,L);break}}try{v=b_.call(this,z)}catch(O){return Promise.reject(O)}for(E=0,C=y.length;E<C;)v=v.then(y[E++],y[E++]);return v}getUri(e){e=As(this.defaults,e);const t=$E(e.baseURL,e.url,e.allowAbsoluteUrls);return FE(t,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){_s.prototype[e]=function(t,i){return this.request(As(i||{},{method:e,url:t,data:(i||{}).data}))}});H.forEach(["post","put","patch"],function(e){function t(i){return function(l,h,f){return this.request(As(f||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:h}))}}_s.prototype[e]=t(),_s.prototype[e+"Form"]=t(!0)});let cx=class GE{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const h=new Promise(f=>{i.subscribe(f),l=f}).then(o);return h.cancel=function(){i.unsubscribe(l)},h},e(function(l,h,f){i.reason||(i.reason=new Wo(l,h,f),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new GE(function(o){e=o}),cancel:e}}};function hx(r){return function(t){return r.apply(null,t)}}function dx(r){return H.isObject(r)&&r.isAxiosError===!0}const Pf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Pf).forEach(([r,e])=>{Pf[e]=r});function QE(r){const e=new _s(r),t=RE(_s.prototype.request,e);return H.extend(t,_s.prototype,e,{allOwnKeys:!0}),H.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return QE(As(r,o))},t}const st=QE(Cl);st.Axios=_s;st.CanceledError=Wo;st.CancelToken=cx;st.isCancel=zE;st.VERSION=KE;st.toFormData=nh;st.AxiosError=ke;st.Cancel=st.CanceledError;st.all=function(e){return Promise.all(e)};st.spread=hx;st.isAxiosError=dx;st.mergeConfig=As;st.AxiosHeaders=sn;st.formToJSON=r=>jE(H.isHTMLForm(r)?new FormData(r):r);st.getAdapter=WE.getAdapter;st.HttpStatusCode=Pf;st.default=st;const{Axios:Ex,AxiosError:Tx,CanceledError:Ix,isCancel:Sx,CancelToken:Ax,VERSION:Rx,all:Cx,Cancel:kx,isAxiosError:Px,spread:xx,toFormData:Nx,AxiosHeaders:bx,HttpStatusCode:Dx,formToJSON:Ox,getAdapter:Vx,mergeConfig:Lx}=st;function fx(){const{user:r,db:e}=Il(),[t,i]=Ee.useState(!1),[o,l]=Ee.useState(""),[h,f]=Ee.useState(null),[g,y]=Ee.useState(!1),[v,E]=Ee.useState(""),[C,z]=Ee.useState(!1);Ee.useEffect(()=>{chrome.tabs.query({active:!0,currentWindow:!0},X=>{X[0].id&&chrome.tabs.sendMessage(X[0].id,{action:"getArticleText"},W=>{const te=W;te?.text&&(l(te.text),O(te.text))})})},[]);const O=async X=>{i(!0);try{const te=await st.post("http://localhost:5000/api/analyze",{text:X,userId:r?.uid});f({reliabilityScore:te.data.reliabilityScore,summary:te.data.summary,claims:te.data.claims,sourceAnalysis:te.data.sourceAnalysis,timestamp:new Date})}catch(W){console.error("Analysis failed:",W)}finally{i(!1)}},j=async()=>{z(!0);try{await st.post("http://localhost:5000/api/report-inaccuracy",{userId:r?.uid,text:o,report:v,reliabilityScore:h?.reliabilityScore,timestamp:new Date}),E(""),y(!1)}catch(X){console.error("Report submission failed:",X)}finally{z(!1)}},L=X=>X>=80?"text-green-400":X>=60?"text-yellow-400":"text-red-400",Z=X=>X>=80?"from-green-500/20 to-green-600/20":X>=60?"from-yellow-500/20 to-yellow-600/20":"from-red-500/20 to-red-600/20";return D.jsxs("div",{className:"w-full h-full overflow-y-auto",children:[t?D.jsx("div",{className:"flex items-center justify-center h-full",children:D.jsxs("div",{className:"text-center",children:[D.jsx("div",{className:"w-12 h-12 border-4 border-teal border-t-electric-blue rounded-full animate-spin mx-auto mb-4"}),D.jsx("p",{className:"text-gray-400",children:"Analyzing article..."})]})}):h?D.jsxs("div",{className:"p-4 space-y-4",children:[D.jsxs("div",{className:`bg-gradient-to-br ${Z(h.reliabilityScore)} border border-white/10 rounded-2xl p-6 text-center`,children:[D.jsxs("div",{className:"w-32 h-32 mx-auto relative",children:[D.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[D.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"2"}),D.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"url(#reliabilityGradient)",strokeWidth:"3",strokeDasharray:`${h.reliabilityScore/100*283} 283`,strokeLinecap:"round",transform:"rotate(-90 50 50)"}),D.jsx("defs",{children:D.jsxs("linearGradient",{id:"reliabilityGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[D.jsx("stop",{offset:"0%",stopColor:"#00D9D9"}),D.jsx("stop",{offset:"100%",stopColor:"#0066FF"})]})})]}),D.jsxs("div",{className:`absolute inset-0 flex items-center justify-center text-4xl font-bold ${L(h.reliabilityScore)}`,children:[h.reliabilityScore,"%"]})]}),D.jsx("p",{className:"text-gray-300 mt-4 font-semibold",children:h.reliabilityScore>=80?"Highly Reliable":h.reliabilityScore>=60?"Moderately Reliable":"Low Reliability"})]}),D.jsxs("div",{className:"bg-card-bg border border-white/10 rounded-xl p-4",children:[D.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[D.jsx(Ek,{size:18,className:"text-electric-blue"}),"Summary"]}),D.jsx("ul",{className:"space-y-2",children:h.summary.map((X,W)=>D.jsxs("li",{className:"text-gray-300 text-sm flex gap-2",children:[D.jsx("span",{className:"text-teal",children:""}),D.jsx("span",{children:X})]},W))})]}),h.claims.length>0&&D.jsxs("div",{className:"bg-card-bg border border-white/10 rounded-xl p-4",children:[D.jsx("h3",{className:"text-white font-semibold mb-3",children:"Key Claims"}),D.jsx("div",{className:"space-y-2",children:h.claims.slice(0,3).map((X,W)=>D.jsx("div",{className:"text-gray-300 text-sm p-2 bg-white/5 rounded-lg",children:X},W))})]})]}):D.jsx("div",{className:"flex items-center justify-center h-full",children:D.jsx("p",{className:"text-gray-400",children:"No article detected on this page"})}),h&&D.jsx("div",{className:"fixed bottom-20 right-4",children:D.jsx("button",{onClick:()=>y(!0),className:"bg-gradient-to-r from-red-500 to-red-600 text-white p-3 rounded-full shadow-lg hover:shadow-red-500/50 transition-all",title:"Report Inaccuracy",children:D.jsx(Ck,{size:20})})}),g&&D.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-end z-50",children:D.jsxs("div",{className:"w-full bg-card-bg border-t border-white/10 rounded-t-2xl p-4 animate-slide-up",children:[D.jsx("h3",{className:"text-white font-semibold mb-3",children:"Report Inaccuracy"}),D.jsx("textarea",{value:v,onChange:X=>E(X.target.value),placeholder:"Describe what's inaccurate about this article...",className:"w-full p-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-electric-blue mb-3 resize-none h-24"}),D.jsxs("div",{className:"flex gap-2",children:[D.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-2 px-3 bg-white/5 border border-white/10 text-gray-300 rounded-lg hover:bg-white/10 transition-colors",children:"Cancel"}),D.jsxs("button",{onClick:j,disabled:C||!v.trim(),className:"flex-1 py-2 px-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[C&&D.jsx(wp,{size:16,className:"animate-spin"}),"Submit Report"]})]})]})})]})}function px(){const{user:r}=Il(),[e,t]=Ee.useState([{id:"1",role:"assistant",content:"Hello! I'm TrueLensGPT, your intelligent news verification assistant. I can analyze articles, fact-check claims, and discuss news with multimedia support (text, images, audio, and documents). How can I help you today?",timestamp:new Date}]),[i,o]=Ee.useState(""),[l,h]=Ee.useState(!1),[f,g]=Ee.useState(!1),[y,v]=Ee.useState([]),E=Ee.useRef(null),C=Ee.useRef(null),z=Ee.useRef(null),O=Ee.useRef(null);Ee.useEffect(()=>{E.current?.scrollIntoView({behavior:"smooth"})},[e]);const j=async()=>{if(!i.trim()&&y.length===0)return;const W={id:Date.now().toString(),role:"user",content:i,attachments:y.map(te=>({type:te.type,url:URL.createObjectURL(te.file)})),timestamp:new Date};t(te=>[...te,W]),o(""),v([]),h(!0);try{const se=(await chrome.tabs.query({active:!0,currentWindow:!0}))[0];let de="";se.id&&await new Promise(x=>{chrome.tabs.sendMessage(se.id,{action:"getArticleText"},M=>{const A=M;A?.text&&(de=A.text.substring(0,1e3)),x()})});const k="http://localhost:5000",I=new FormData;I.append("message",W.content),I.append("userId",r?.uid||""),I.append("articleContext",de),y.forEach(x=>{I.append("attachments",x.file)});const R=await st.post(`${k}/api/chat`,I,{headers:{"Content-Type":"multipart/form-data"}}),b={id:(Date.now()+1).toString(),role:"assistant",content:R.data.response,timestamp:new Date};t(x=>[...x,b])}catch(te){console.error("Chat failed:",te);const se={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};t(de=>[...de,se])}finally{h(!1)}},L=async()=>{try{const W=await navigator.mediaDevices.getUserMedia({audio:!0}),te=new MediaRecorder(W);C.current=te;const se=[];te.ondataavailable=de=>se.push(de.data),te.onstop=()=>{const de=new Blob(se,{type:"audio/webm"});v(k=>[...k,{type:"audio",file:new File([de],"audio.webm")}]),W.getTracks().forEach(k=>k.stop())},te.start(),g(!0)}catch(W){console.error("Microphone access denied:",W)}},Z=()=>{C.current&&(C.current.stop(),g(!1))},X=(W,te)=>{const se=W.target.files?.[0];se&&v(de=>[...de,{type:te,file:se}])};return D.jsxs("div",{className:"w-full h-full flex flex-col bg-gradient-to-br from-dark-bg to-gray-900",children:[D.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.map(W=>D.jsx("div",{className:`flex ${W.role==="user"?"justify-end":"justify-start"}`,children:D.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-3 rounded-xl ${W.role==="user"?"bg-gradient-to-r from-electric-blue to-teal text-white":"bg-card-bg border border-white/10 text-gray-200"}`,children:[D.jsx("p",{className:"text-sm leading-relaxed",children:W.content}),W.attachments&&W.attachments.length>0&&D.jsx("div",{className:"mt-2 pt-2 border-t border-white/10 space-y-1",children:W.attachments.map((te,se)=>D.jsxs("p",{className:"text-xs opacity-75",children:[" ",te.type]},se))})]})},W.id)),l&&D.jsx("div",{className:"flex justify-start",children:D.jsx("div",{className:"bg-card-bg border border-white/10 text-gray-200 px-4 py-3 rounded-xl",children:D.jsxs("div",{className:"flex gap-2",children:[D.jsx("div",{className:"w-2 h-2 bg-electric-blue rounded-full animate-bounce"}),D.jsx("div",{className:"w-2 h-2 bg-teal rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),D.jsx("div",{className:"w-2 h-2 bg-electric-blue rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})}),D.jsx("div",{ref:E})]}),y.length>0&&D.jsx("div",{className:"px-4 py-2 bg-white/5 border-y border-white/10 space-y-2 max-h-24 overflow-y-auto",children:y.map((W,te)=>D.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300 bg-white/5 px-2 py-1 rounded",children:[D.jsx(Dk,{size:14}),D.jsx("span",{className:"truncate flex-1",children:W.file.name}),D.jsx("button",{onClick:()=>v(se=>se.filter((de,k)=>k!==te)),className:"text-gray-500 hover:text-white",children:D.jsx(AE,{size:14})})]},te))}),D.jsx("div",{className:"bg-card-bg border-t border-white/10 p-4 space-y-3",children:D.jsxs("div",{className:"flex gap-2",children:[D.jsx("button",{onClick:()=>O.current?.click(),title:"Upload Image",className:"p-2 bg-white/5 border border-white/10 text-gray-400 rounded-lg hover:bg-white/10 hover:text-white transition-colors",children:D.jsx(kk,{size:18})}),D.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:W=>X(W,"image"),className:"hidden"}),D.jsx("button",{onClick:()=>z.current?.click(),title:"Upload Document",className:"p-2 bg-white/5 border border-white/10 text-gray-400 rounded-lg hover:bg-white/10 hover:text-white transition-colors",children:D.jsx(Rk,{size:18})}),D.jsx("input",{ref:z,type:"file",accept:".pdf,.doc,.docx,.txt",onChange:W=>X(W,"file"),className:"hidden"}),D.jsx("button",{onClick:f?Z:L,title:f?"Stop Recording":"Start Recording",className:`p-2 rounded-lg transition-colors ${f?"bg-red-500/20 border border-red-500/50 text-red-400":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-white"}`,children:D.jsx(bk,{size:18})}),D.jsx("input",{type:"text",value:i,onChange:W=>o(W.target.value),onKeyPress:W=>W.key==="Enter"&&!W.shiftKey&&j(),placeholder:"Ask TrueLensGPT...",className:"flex-1 px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-electric-blue"}),D.jsx("button",{onClick:j,disabled:l||!i.trim()&&y.length===0,className:"p-2 bg-gradient-to-r from-electric-blue to-teal text-white rounded-lg hover:shadow-lg hover:shadow-electric-blue/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:l?D.jsx(wp,{size:18,className:"animate-spin"}):D.jsx(Ok,{size:18})})]})})]})}function mx(){const{user:r,db:e}=Il(),[t,i]=Ee.useState([]),[o,l]=Ee.useState(!0);Ee.useEffect(()=>{h()},[]);const h=async()=>{l(!0);try{if(!e||!r)return;const{collection:v,query:E,where:C,getDocs:z}=await Kd(async()=>{const{collection:X,query:W,where:te,getDocs:se}=await Promise.resolve().then(()=>y_);return{collection:X,query:W,where:te,getDocs:se}},void 0),O=v(e,"analysis"),j=E(O,C("userId","==",r.uid)),Z=(await z(j)).docs.map(X=>({id:X.id,text:X.data().text,reliabilityScore:X.data().reliabilityScore,timestamp:X.data().timestamp?.toDate()||new Date,url:X.data().url}));i(Z.sort((X,W)=>W.timestamp.getTime()-X.timestamp.getTime()))}catch(v){console.error("Failed to load history:",v)}finally{l(!1)}},f=async v=>{try{if(!e)return;const{doc:E,deleteDoc:C}=await Kd(async()=>{const{doc:z,deleteDoc:O}=await Promise.resolve().then(()=>y_);return{doc:z,deleteDoc:O}},void 0);await C(E(e,"analysis",v)),i(z=>z.filter(O=>O.id!==v))}catch(E){console.error("Failed to delete item:",E)}},g=v=>v>=80?"text-green-400":v>=60?"text-yellow-400":"text-red-400",y=v=>v>=80?"Reliable":v>=60?"Moderate":"Unreliable";return D.jsx("div",{className:"w-full h-full overflow-y-auto",children:D.jsxs("div",{className:"p-4 space-y-3",children:[D.jsx("h2",{className:"text-white font-semibold mb-4",children:"Analysis History"}),o?D.jsx("div",{className:"flex items-center justify-center h-64",children:D.jsxs("div",{className:"text-center",children:[D.jsx("div",{className:"w-12 h-12 border-4 border-teal border-t-electric-blue rounded-full animate-spin mx-auto mb-4"}),D.jsx("p",{className:"text-gray-400",children:"Loading history..."})]})}):t.length===0?D.jsxs("div",{className:"text-center py-12",children:[D.jsx("p",{className:"text-gray-400",children:"No analysis history yet"}),D.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Analyze articles to build your history"})]}):D.jsx("div",{className:"space-y-3",children:t.map(v=>D.jsx("div",{className:"bg-card-bg border border-white/10 rounded-lg p-4 hover:border-white/20 transition-colors",children:D.jsxs("div",{className:"flex items-start justify-between gap-3",children:[D.jsxs("div",{className:"flex-1 min-w-0",children:[D.jsx("p",{className:"text-gray-300 text-sm line-clamp-2",children:v.text}),D.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[D.jsxs("span",{className:`text-sm font-semibold ${g(v.reliabilityScore)}`,children:[v.reliabilityScore,"% - ",y(v.reliabilityScore)]}),D.jsx("span",{className:"text-xs text-gray-500",children:new Date(v.timestamp).toLocaleDateString()})]}),v.url&&D.jsxs("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-electric-blue hover:text-teal flex items-center gap-1 mt-2",children:["Open source ",D.jsx(Ik,{size:12})]})]}),D.jsx("button",{onClick:()=>f(v.id),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete",children:D.jsx(Lk,{size:18})})]})},v.id))})]})})}function gx({open:r,onClose:e}){const[t,i]=Ee.useState(""),[o,l]=Ee.useState(""),[h,f]=Ee.useState({apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""}),[g,y]=Ee.useState("");Ee.useEffect(()=>{r&&typeof chrome<"u"&&chrome.storage&&chrome.storage.local&&chrome.storage.local.get(["apiKeys","firebaseConfig"],E=>{E.apiKeys&&(i(E.apiKeys.newsApiKey||""),l(E.apiKeys.geminiApiKey||"")),E.firebaseConfig&&f(C=>({...C,...E.firebaseConfig}))})},[r]);const v=()=>{typeof chrome<"u"&&chrome.storage&&chrome.storage.local?chrome.storage.local.set({apiKeys:{newsApiKey:t,geminiApiKey:o},firebaseConfig:h},()=>{y("Saved"),setTimeout(()=>y(""),2e3)}):y("Storage not available")};return r?D.jsx("div",{className:"fixed inset-0 z-50 flex items-end justify-center px-4 pb-8",children:D.jsxs("div",{className:"w-full max-w-md bg-card-bg border border-white/10 rounded-lg p-4 shadow-lg",children:[D.jsxs("div",{className:"flex items-center justify-between mb-2",children:[D.jsx("h3",{className:"text-white text-sm font-semibold",children:"Settings"}),D.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:"Close"})]}),D.jsxs("div",{className:"space-y-3",children:[D.jsxs("div",{children:[D.jsx("label",{className:"text-xs text-gray-300",children:"NewsAPI Key"}),D.jsx("input",{value:t,onChange:E=>i(E.target.value),className:"w-full mt-1 p-2 rounded bg-transparent border border-white/10 text-white text-sm"})]}),D.jsxs("div",{children:[D.jsx("label",{className:"text-xs text-gray-300",children:"Gemini API Key"}),D.jsx("input",{value:o,onChange:E=>l(E.target.value),className:"w-full mt-1 p-2 rounded bg-transparent border border-white/10 text-white text-sm"})]}),D.jsxs("div",{children:[D.jsx("label",{className:"text-xs text-gray-300",children:"Firebase Config"}),D.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[D.jsx("input",{placeholder:"apiKey",value:h.apiKey,onChange:E=>f({...h,apiKey:E.target.value}),className:"p-2 rounded bg-transparent border border-white/10 text-white text-sm"}),D.jsx("input",{placeholder:"authDomain",value:h.authDomain,onChange:E=>f({...h,authDomain:E.target.value}),className:"p-2 rounded bg-transparent border border-white/10 text-white text-sm"}),D.jsx("input",{placeholder:"projectId",value:h.projectId,onChange:E=>f({...h,projectId:E.target.value}),className:"p-2 rounded bg-transparent border border-white/10 text-white text-sm"}),D.jsx("input",{placeholder:"storageBucket",value:h.storageBucket,onChange:E=>f({...h,storageBucket:E.target.value}),className:"p-2 rounded bg-transparent border border-white/10 text-white text-sm"}),D.jsx("input",{placeholder:"messagingSenderId",value:h.messagingSenderId,onChange:E=>f({...h,messagingSenderId:E.target.value}),className:"p-2 rounded bg-transparent border border-white/10 text-white text-sm"}),D.jsx("input",{placeholder:"appId",value:h.appId,onChange:E=>f({...h,appId:E.target.value}),className:"p-2 rounded bg-transparent border border-white/10 text-white text-sm"})]})]}),D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx("div",{className:"text-sm text-green-400",children:g}),D.jsxs("div",{className:"flex gap-2",children:[D.jsx("button",{onClick:v,className:"bg-electric-blue text-white px-3 py-1 rounded text-sm",children:"Save"}),D.jsx("button",{onClick:e,className:"text-gray-400 px-3 py-1 rounded text-sm",children:"Close"})]})]})]})]})}):null}function yx(){const{user:r,loading:e}=Il(),[t,i]=Ee.useState("analyzer"),[o,l]=Ee.useState(!1);return Ee.useEffect(()=>{typeof chrome<"u"&&chrome.storage&&chrome.storage.local&&chrome.storage.local.get(["firebaseConfig"],h=>{h.firebaseConfig||l(!0)})},[]),e?D.jsx("div",{className:"w-full h-screen bg-gradient-to-br from-dark-bg to-gray-900 flex items-center justify-center",children:D.jsxs("div",{className:"text-center",children:[D.jsx("div",{className:"w-12 h-12 border-4 border-teal border-t-electric-blue rounded-full animate-spin mx-auto mb-4"}),D.jsx("p",{className:"text-white",children:"Loading TrueLensAI..."})]})}):r?D.jsxs("div",{className:"w-full h-screen bg-gradient-to-br from-dark-bg via-gray-900 to-dark-bg flex flex-col",children:[D.jsxs("div",{className:"bg-card-bg backdrop-blur-md border-b border-white/10 px-4 py-3 flex items-center justify-between",children:[D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("div",{className:"w-6 h-6 bg-gradient-to-br from-electric-blue to-teal rounded-full flex items-center justify-center",children:D.jsx("div",{className:"w-4 h-4 bg-dark-bg rounded-full"})}),D.jsx("h1",{className:"text-white font-bold text-sm",children:"TrueLensAI"})]}),D.jsx("button",{onClick:()=>window.close(),className:"text-gray-400 hover:text-white transition-colors p-1",title:"Close",children:D.jsx(AE,{size:20})})]}),D.jsxs("div",{className:"flex-1 overflow-hidden",children:[t==="analyzer"&&D.jsx(fx,{}),t==="chat"&&D.jsx(px,{}),t==="history"&&D.jsx(mx,{})]}),D.jsxs("div",{className:"bg-card-bg backdrop-blur-md border-t border-white/10 px-4 py-3 flex gap-2",children:[D.jsxs("button",{onClick:()=>i("analyzer"),className:`flex-1 py-2 px-3 rounded-lg flex items-center justify-center gap-2 transition-all ${t==="analyzer"?"bg-electric-blue text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[D.jsx(wk,{size:18}),D.jsx("span",{className:"text-xs font-medium",children:"Analyzer"})]}),D.jsxs("button",{onClick:()=>i("chat"),className:`flex-1 py-2 px-3 rounded-lg flex items-center justify-center gap-2 transition-all ${t==="chat"?"bg-electric-blue text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[D.jsx(Nk,{size:18}),D.jsx("span",{className:"text-xs font-medium",children:"TrueLensGPT"})]}),D.jsxs("button",{onClick:()=>i("history"),className:`flex-1 py-2 px-3 rounded-lg flex items-center justify-center gap-2 transition-all ${t==="history"?"bg-electric-blue text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[D.jsx(Tk,{size:18}),D.jsx("span",{className:"text-xs font-medium",children:"History"})]})]}),D.jsx("button",{onClick:()=>l(!0),className:"fixed right-4 bottom-20 z-50 bg-card-bg p-3 rounded-full border border-white/10 shadow-lg hover:scale-105 transition-transform",title:"Settings",children:D.jsx(Vk,{size:18,className:"text-white"})}),D.jsx(gx,{open:o,onClose:()=>l(!1)})]}):D.jsx(Mk,{})}dT.createRoot(document.getElementById("root")||document.createElement("div")).render(D.jsx(sT.StrictMode,{children:D.jsx(gk,{children:D.jsx(yx,{})})}));
