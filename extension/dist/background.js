chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch(o=>console.error(o));chrome.runtime.onMessage.addListener((o,r,e)=>{const n=o;return n?.action==="getArticleText"?e({received:!0}):n?.action==="analyzeArticle"&&e({status:"processing"}),!0});chrome.runtime.onInstalled.addListener(()=>{console.log("TrueLensAI extension installed!")});(async()=>{try{if(!await new Promise(r=>{chrome.storage.local.get(["firebaseConfig"],e=>r(e.firebaseConfig??null))})){const r=chrome.runtime.getURL("firebase-config.json"),e=await fetch(r);if(e.ok){const n=await e.json();await new Promise((t,i)=>{chrome.storage.local.set({firebaseConfig:n},()=>{const s=chrome.runtime.lastError;s?i(s):t()})}),console.log("Seeded firebaseConfig from bundled firebase-config.json");try{chrome.runtime.sendMessage({type:"FIREBASE_CONFIG_UPDATED"})}catch{}}}}catch(o){console.warn("Failed to seed firebase config:",o)}})();
